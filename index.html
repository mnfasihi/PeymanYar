<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ù¾ÛŒÙ…Ø§Ù†â€ŒÛŒØ§Ø± | Ù¾Ù„ØªÙØ±Ù… Ù‡ÙˆØ´Ù…Ù†Ø¯ Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø±Ø§Ù† Ø³Ø§Ø®ØªÙ…Ø§Ù†ÛŒ</title>
<meta name="description" content="Ù¾Ù„ØªÙØ±Ù… Ù‡ÙˆØ´Ù…Ù†Ø¯ Ù¾ÛŒÙ…Ø§Ù†â€ŒÛŒØ§Ø±ØŒ Ø§ÙˆÙ„ÛŒÙ† Ùˆ ØªØ®ØµØµÛŒâ€ŒØªØ±ÛŒÙ† Ù¾Ù„ØªÙØ±Ù… Ø§Ø±ØªØ¨Ø§Ø· Ú©Ø§Ø±ÙØ±Ù…Ø§ÛŒØ§Ù† Ùˆ Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø±Ø§Ù† Ø³Ø§Ø®ØªÙ…Ø§Ù†ÛŒ Ø¯Ø± Ø§ÛŒØ±Ø§Ù†">
<meta name="keywords" content="Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø±, Ú©Ø§Ø±ÙØ±Ù…Ø§, Ø³Ø§Ø®ØªÙ…Ø§Ù†, Ø³Ø§Ø®Øªâ€ŒÙˆØ³Ø§Ø², Ù¾ÛŒÙ…Ø§Ù†â€ŒÛŒØ§Ø±, Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø±ÛŒ Ø³Ø§Ø®ØªÙ…Ø§Ù†, Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø±ÛŒ, Ø³Ø§Ø®ØªÙ…Ø§Ù†ÛŒ">
<meta name="author" content="Ù¾ÛŒÙ…Ø§Ù†â€ŒÛŒØ§Ø±">
<meta name="robots" content="index, follow">
<meta property="og:title" content="Ù¾ÛŒÙ…Ø§Ù†â€ŒÛŒØ§Ø± | Ù¾Ù„ØªÙØ±Ù… Ù‡ÙˆØ´Ù…Ù†Ø¯ Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø±Ø§Ù† Ø³Ø§Ø®ØªÙ…Ø§Ù†ÛŒ">
<meta property="og:description" content="Ù¾Ù„ØªÙØ±Ù… ØªØ®ØµØµÛŒ Ø¨Ø±Ø§ÛŒ ÛŒØ§ÙØªÙ†ØŒ Ø¨Ø±Ø±Ø³ÛŒ Ùˆ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø±Ø§Ù† Ù…Ø¹ØªØ¨Ø± Ø³Ø§Ø®ØªÙ…Ø§Ù†ÛŒ">
<meta property="og:type" content="website">
<meta property="og:image" content="https://images.unsplash.com/photo-1541888946425-d81bb19240f5?ixlib=rb-1.2.1&auto=format&fit=crop&w=1200&q=80">
<meta property="og:url" content="https://peymanyar.com">
<meta property="og:locale" content="fa_IR">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
<link href="https://cdn.jsdelivr.net/gh/rastikerdar/vazirmatn@v33.003/Vazirmatn-font-face.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
<link rel="stylesheet" href="theme.css">
<style>
:root {
--primary-color: #4361ee;
--secondary-color: #3a0ca3;
--accent-color: #f72585;
--employer-color: #4cc9f0;
--contractor-color: #7209b7;
--dark-color: #1a1a2e;
--light-color: #f8f9fa;
--success-color: #28a745;
--warning-color: #ffc107;
--danger-color: #dc3545;
--info-color: #17a2b8;
--gradient-primary: linear-gradient(135deg, #4361ee 0%, #3a0ca3 100%);
--gradient-accent: linear-gradient(135deg, #f72585 0%, #b5179e 100%);
--gradient-employer: linear-gradient(135deg, #4cc9f0 0%, #4895ef 100%);
--gradient-contractor: linear-gradient(135deg, #7209b7 0%, #560bad 100%);
--gradient-success: linear-gradient(135deg, #28a745 0%, #20c997 100%);
--shadow-sm: 0 2px 10px rgba(0,0,0,0.05);
--shadow-md: 0 5px 20px rgba(0,0,0,0.08);
--shadow-lg: 0 10px 30px rgba(0,0,0,0.12);
--shadow-xl: 0 15px 35px rgba(0,0,0,0.2);
--border-radius-sm: 8px;
--border-radius-md: 15px;
--border-radius-lg: 20px;
--border-radius-xl: 30px;
--transition-fast: 0.2s ease;
--transition-normal: 0.3s ease;
--transition-slow: 0.5s ease;
}
* {
margin: 0;
padding: 0;
box-sizing: border-box;
}
html {
scroll-behavior: smooth;
scroll-padding-top: 80px;
}
body {
font-family: 'Vazirmatn', 'Segoe UI', Tahoma, sans-serif;
background-color: var(--light-color);
overflow-x: hidden;
line-height: 1.6;
color: var(--dark-color);
-webkit-font-smoothing: antialiased;
-moz-osx-font-smoothing: grayscale;
font-size: 16px;
}
:focus {
outline: 3px solid var(--primary-color);
outline-offset: 3px;
}
:focus:not(:focus-visible) {
outline: none;
}
:focus-visible {
outline: 3px solid var(--primary-color);
outline-offset: 3px;
}
::-webkit-scrollbar {
width: 10px;
height: 10px;
}
::-webkit-scrollbar-track {
background: #f1f1f1;
border-radius: var(--border-radius-sm);
}
::-webkit-scrollbar-thumb {
background: var(--primary-color);
border-radius: var(--border-radius-sm);
}
::-webkit-scrollbar-thumb:hover {
background: var(--secondary-color);
}
.navbar {
background-color: rgba(255,255,255,0.98);
backdrop-filter: blur(10px);
-webkit-backdrop-filter: blur(10px);
box-shadow: var(--shadow-md);
padding: 12px 0;
transition: all var(--transition-normal);
z-index: 1030;
border-bottom: 1px solid rgba(0,0,0,0.05);
}
.navbar-brand {
font-weight: 900;
font-size: 2rem;
background: var(--gradient-primary);
-webkit-background-clip: text;
-webkit-text-fill-color: transparent;
background-clip: text;
letter-spacing: -1px;
transition: all var(--transition-normal);
}
.navbar-brand:hover {
transform: translateY(-2px);
}
.nav-link {
font-weight: 500;
color: var(--dark-color);
margin: 0 8px;
padding: 8px 16px !important;
border-radius: var(--border-radius-sm);
transition: all var(--transition-normal);
position: relative;
}
.nav-link:hover,
.nav-link.active,
.nav-link:focus {
background-color: rgba(67,97,238,0.1);
color: var(--primary-color);
}
.nav-link.active::after {
content: '';
position: absolute;
bottom: -12px;
right: 50%;
transform: translateX(50%);
width: 6px;
height: 6px;
background: var(--primary-color);
border-radius: 50%;
}
.btn {
font-weight: 600;
border: none;
transition: all var(--transition-normal);
position: relative;
overflow: hidden;
}
.btn::after {
content: '';
position: absolute;
top: 50%;
right: 50%;
width: 5px;
height: 5px;
background: rgba(255,255,255,0.5);
opacity: 0;
border-radius: 100%;
transform: scale(1,1) translate(-50%);
transform-origin: 50% 50%;
}
.btn:focus:not(:active)::after {
animation: ripple 1s ease-out;
}
.btn-peymanyar {
background: var(--gradient-primary);
color: white;
border-radius: var(--border-radius-xl);
padding: 12px 30px;
box-shadow: 0 5px 15px rgba(67,97,238,0.3);
}
.btn-peymanyar:hover {
transform: translateY(-3px);
box-shadow: 0 8px 25px rgba(67,97,238,0.4);
color: white;
}
.btn-employer {
background: var(--gradient-employer);
color: white;
border-radius: var(--border-radius-xl);
padding: 12px 30px;
box-shadow: 0 5px 15px rgba(76,201,240,0.3);
}
.btn-employer:hover {
transform: translateY(-3px);
box-shadow: 0 8px 25px rgba(76,201,240,0.4);
color: white;
}
.btn-contractor {
background: var(--gradient-contractor);
color: white;
border-radius: var(--border-radius-xl);
padding: 12px 30px;
box-shadow: 0 5px 15px rgba(114,9,183,0.3);
}
.btn-contractor:hover {
transform: translateY(-3px);
box-shadow: 0 8px 25px rgba(114,9,183,0.4);
color: white;
}
.page-section {
display: none;
min-height: 80vh;
animation: fadeIn 0.5s ease;
opacity: 0;
transform: translateY(20px);
transition: opacity 0.5s ease, transform 0.5s ease;
}
.page-section.active {
display: block;
opacity: 1;
transform: translateY(0);
}
.page-header {
padding-top: 120px;
margin-bottom: 40px;
}
.section-title {
color: var(--dark-color);
font-size: 2.5rem;
font-weight: 800;
margin-bottom: 20px;
position: relative;
display: inline-block;
}
.section-title::after {
content: '';
position: absolute;
bottom: -10px;
right: 0;
width: 80px;
height: 4px;
background: var(--gradient-primary);
border-radius: 2px;
}
.card-peymanyar {
background: white;
border-radius: var(--border-radius-lg);
padding: 25px;
box-shadow: var(--shadow-lg);
transition: all var(--transition-normal);
height: 100%;
border: 1px solid rgba(0,0,0,0.05);
position: relative;
overflow: hidden;
}
.card-peymanyar::before {
content: '';
position: absolute;
top: 0;
right: 0;
width: 100%;
height: 4px;
background: var(--gradient-primary);
}
.card-peymanyar:hover {
transform: translateY(-10px);
box-shadow: var(--shadow-xl);
}
.assistant-container {
position: fixed;
bottom: 30px;
left: 30px;
z-index: 1050;
}
.assistant-window {
width: 400px;
max-width: calc(100vw - 60px);
height: 600px;
max-height: 70vh;
background: white;
border-radius: var(--border-radius-lg);
box-shadow: var(--shadow-xl);
display: flex;
flex-direction: column;
overflow: hidden;
display: none;
border: 1px solid rgba(0,0,0,0.1);
}
.assistant-window.active {
display: flex;
}
.assistant-header {
background: var(--gradient-primary);
color: white;
padding: 20px;
display: flex;
justify-content: space-between;
align-items: center;
border-bottom: 1px solid rgba(255,255,255,0.1);
}
.assistant-messages {
flex: 1;
padding: 20px;
overflow-y: auto;
background: #f8f9fa;
display: flex;
flex-direction: column;
gap: 15px;
}
.message {
display: flex;
max-width: 85%;
animation: slideIn 0.3s ease;
}
.message.user {
margin-left: auto;
justify-content: flex-end;
}
.message-bubble {
padding: 12px 18px;
border-radius: 18px;
position: relative;
max-width: 100%;
word-wrap: break-word;
box-shadow: var(--shadow-sm);
}
.message.assistant .message-bubble {
background: white;
border: 1px solid #dee2e6;
border-top-right-radius: 5px;
}
.message.user .message-bubble {
background: var(--gradient-primary);
color: white;
border-top-left-radius: 5px;
}
.assistant-input {
padding: 20px;
border-top: 1px solid #dee2e6;
background: white;
}
.assistant-toggle {
width: 70px;
height: 70px;
border-radius: 50%;
background: var(--gradient-primary);
color: white;
display: flex;
align-items: center;
justify-content: center;
font-size: 1.8rem;
box-shadow: var(--shadow-xl);
cursor: pointer;
transition: all var(--transition-normal);
position: relative;
border: none;
}
.assistant-toggle:hover {
transform: scale(1.1);
box-shadow: 0 15px 35px rgba(67,97,238,0.5);
}
.assistant-toggle:focus {
outline: 3px solid rgba(67,97,238,0.5);
}
.assistant-toggle .notification-badge {
position: absolute;
top: -5px;
left: -5px;
background: var(--accent-color);
color: white;
border-radius: 50%;
width: 24px;
height: 24px;
font-size: 0.8rem;
display: flex;
align-items: center;
justify-content: center;
font-weight: bold;
animation: pulse 2s infinite;
}
.messaging-page {
min-height: 70vh;
background: white;
border-radius: var(--border-radius-lg);
padding: 30px;
box-shadow: var(--shadow-lg);
}
.messages-header {
text-align: center;
margin-bottom: 40px;
padding: 20px;
background: rgba(255,255,255,0.9);
border-radius: 15px;
box-shadow: 0 10px 30px rgba(0,0,0,0.1);
}
.messages-header h2 {
color: #4a5568;
font-size: 2.5rem;
margin-bottom: 10px;
}
.messages-header p {
color: #718096;
font-size: 1.1rem;
}
.messages-cards-container {
display: grid;
grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
gap: 25px;
margin-bottom: 40px;
}
.messages-card {
background: rgba(255,255,255,0.95);
border-radius: 15px;
padding: 25px;
box-shadow: 0 10px 25px rgba(0,0,0,0.1);
transition: transform 0.3s ease, box-shadow 0.3s ease;
border: 1px solid rgba(255,255,255,0.2);
}
.messages-card:hover {
transform: translateY(-5px);
box-shadow: 0 15px 35px rgba(0,0,0,0.15);
}
.messages-card h3 {
color: #4a5568;
margin-bottom: 15px;
font-size: 1.5rem;
border-bottom: 2px solid var(--primary-color);
padding-bottom: 10px;
}
.messages-card p {
color: #718096;
margin-bottom: 20px;
line-height: 1.6;
}
.btn-messages {
background: var(--gradient-primary);
color: white;
border: none;
padding: 12px 25px;
border-radius: 8px;
cursor: pointer;
font-size: 1rem;
font-weight: 600;
transition: all 0.3s ease;
width: 100%;
margin-top: 10px;
}
.btn-messages:hover {
transform: scale(1.03);
box-shadow: 0 5px 15px rgba(102,126,234,0.4);
}
.btn-messages-secondary {
background: var(--gradient-success);
}
.btn-messages-danger {
background: var(--gradient-accent);
}
.messages-result-section {
background: rgba(255,255,255,0.95);
border-radius: 15px;
padding: 30px;
margin-top: 30px;
box-shadow: 0 10px 25px rgba(0,0,0,0.1);
}
.messages-result-section h2 {
color: #4a5568;
margin-bottom: 20px;
font-size: 1.8rem;
}
#messagesResult {
background: #f7fafc;
padding: 20px;
border-radius: 10px;
border: 1px solid #e2e8f0;
min-height: 150px;
font-size: 1.1rem;
line-height: 1.7;
color: #4a5568;
}
.messages-loading {
display: none;
text-align: center;
padding: 20px;
}
.messages-spinner {
border: 4px solid #f3f3f3;
border-top: 4px solid var(--primary-color);
border-radius: 50%;
width: 40px;
height: 40px;
animation: spin 1s linear infinite;
margin: 0 auto 15px;
}
@keyframes fadeIn {
from { opacity: 0; transform: translateY(20px); }
to { opacity: 1; transform: translateY(0); }
}
@keyframes slideIn {
from { opacity: 0; transform: translateX(20px); }
to { opacity: 1; transform: translateX(0); }
}
@keyframes pulse {
0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(247,37,133,0.7); }
70% { transform: scale(1.1); box-shadow: 0 0 0 10px rgba(247,37,133,0); }
100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(247,37,133,0); }
}
@keyframes ripple {
0% { transform: scale(0,0); opacity: 0.5; }
100% { transform: scale(40,40); opacity: 0; }
}
@keyframes float {
0%,100% { transform: translateY(0); }
50% { transform: translateY(-10px); }
}
@keyframes spin {
0% { transform: rotate(0deg); }
100% { transform: rotate(360deg); }
}
.animate-float {
animation: float 3s ease-in-out infinite;
}
.stat-value {
font-size: 2.5rem;
font-weight: 800;
color: var(--dark-color);
margin-bottom: 5px;
font-feature-settings: "tnum";
}
.stat-label {
color: #6c757d;
font-size: 0.95rem;
}
.registration-page {
min-height: 100vh;
background-color: #f8f9fa;
}
.btn-back {
background: none;
border: none;
color: var(--primary-color);
font-weight: 500;
padding: 10px 0;
transition: all var(--transition-normal);
}
.btn-back:hover {
color: var(--secondary-color);
transform: translateX(-5px);
}
.form-container {
background: white;
border-radius: var(--border-radius-lg);
padding: 30px;
box-shadow: var(--shadow-lg);
border-top: 4px solid;
margin-bottom: 40px;
}
.form-section {
margin-bottom: 30px;
padding-bottom: 30px;
border-bottom: 1px solid #e9ecef;
animation: fadeIn 0.5s ease;
}
.form-section:last-child {
border-bottom: none;
margin-bottom: 0;
padding-bottom: 0;
}
.form-section h5 {
color: var(--dark-color);
margin-bottom: 20px;
font-weight: 700;
display: flex;
align-items: center;
}
.form-section h5 i {
margin-left: 10px;
}
.required::after {
content: " *";
color: var(--danger-color);
font-weight: bold;
}
.form-navigation {
display: flex;
justify-content: space-between;
margin-top: 30px;
padding-top: 20px;
border-top: 1px solid #e9ecef;
}
.invalid-feedback {
display: none;
color: var(--danger-color);
font-size: 0.875rem;
margin-top: 0.25rem;
animation: fadeIn 0.3s ease;
}
.was-validated .form-control:invalid ~ .invalid-feedback,
.form-control.is-invalid ~ .invalid-feedback {
display: block;
}
.progress {
height: 8px;
margin-bottom: 40px;
border-radius: var(--border-radius-sm);
background-color: #e9ecef;
overflow: hidden;
}
.step-indicator {
display: flex;
justify-content: space-between;
margin-bottom: 30px;
position: relative;
}
.step-indicator::before {
content: '';
position: absolute;
top: 20px;
right: 0;
left: 0;
height: 2px;
background: #e9ecef;
z-index: 1;
}
.step {
width: 40px;
height: 40px;
border-radius: 50%;
background: #e9ecef;
color: #6c757d;
display: flex;
align-items: center;
justify-content: center;
font-weight: bold;
position: relative;
z-index: 2;
transition: all var(--transition-normal);
cursor: default;
}
.step.active {
background: var(--contractor-color);
color: white;
transform: scale(1.1);
box-shadow: 0 0 0 4px rgba(114,9,183,0.2);
}
.step.completed {
background: var(--success-color);
color: white;
}
.upload-box {
border: 2px dashed #dee2e6;
border-radius: var(--border-radius-md);
padding: 40px 20px;
text-align: center;
cursor: pointer;
transition: all var(--transition-normal);
position: relative;
}
.upload-box:hover,
.upload-box:focus-within {
border-color: var(--primary-color);
background-color: rgba(67,97,238,0.05);
}
.upload-box.dragover {
border-color: var(--success-color);
background-color: rgba(40,167,69,0.1);
}
.project-card {
border: 1px solid #dee2e6;
border-radius: var(--border-radius-md);
transition: all var(--transition-normal);
}
.project-card:hover {
border-color: var(--primary-color);
box-shadow: var(--shadow-sm);
}
.multiselect-hint {
font-size: 0.85rem;
color: #6c757d;
margin-top: 5px;
padding: 8px;
background-color: #f8f9fa;
border-radius: var(--border-radius-sm);
border-right: 3px solid var(--primary-color);
}
.select-all-option {
font-weight: bold;
background-color: #e8f5e9 !important;
position: sticky;
top: 0;
z-index: 1;
}
.summary-box {
background: #f8f9fa;
border-radius: var(--border-radius-md);
padding: 20px;
margin-top: 20px;
border-right: 4px solid var(--contractor-color);
animation: fadeIn 0.5s ease;
}
.conditional-field {
display: none;
animation: fadeIn 0.3s ease;
}
.conditional-field.show {
display: block;
}
.auto-save-status {
font-size: 0.9rem;
color: #6c757d;
margin-bottom: 15px;
text-align: center;
min-height: 1.5em;
transition: all var(--transition-normal);
}
.auto-save-status.saving {
color: var(--warning-color);
}
.auto-save-status.saved {
color: var(--success-color);
}
.auto-save-status.error {
color: var(--danger-color);
}
.footer {
background-color: var(--dark-color);
color: white;
padding: 80px 0 30px;
margin-top: 100px;
position: relative;
}
.footer::before {
content: '';
position: absolute;
top: 0;
right: 0;
width: 100%;
height: 4px;
background: var(--gradient-primary);
}
.footer-logo {
font-size: 2.5rem;
font-weight: 900;
background: var(--gradient-primary);
-webkit-background-clip: text;
-webkit-text-fill-color: transparent;
background-clip: text;
margin-bottom: 20px;
display: inline-block;
}
.footer-title {
font-size: 1.2rem;
font-weight: 700;
margin-bottom: 25px;
color: white;
position: relative;
padding-bottom: 10px;
}
.footer-title::after {
content: '';
position: absolute;
bottom: 0;
right: 0;
width: 40px;
height: 3px;
background: var(--primary-color);
border-radius: 2px;
}
.footer-links {
list-style: none;
padding: 0;
}
.footer-links li {
margin-bottom: 12px;
}
.footer-links a {
color: #b0bec5;
text-decoration: none;
transition: all var(--transition-normal);
display: inline-block;
}
.footer-links a:hover {
color: white;
transform: translateX(-5px);
}
.social-links {
display: flex;
gap: 15px;
margin-top: 20px;
}
.social-link {
width: 40px;
height: 40px;
border-radius: 50%;
background: rgba(255,255,255,0.1);
color: white;
display: flex;
align-items: center;
justify-content: center;
font-size: 1.2rem;
transition: all var(--transition-normal);
text-decoration: none;
}
.social-link:hover {
background: var(--primary-color);
transform: translateY(-3px);
}
.copyright {
text-align: center;
padding-top: 30px;
margin-top: 50px;
border-top: 1px solid rgba(255,255,255,0.1);
color: #b0bec5;
font-size: 0.9rem;
}
.hero-image-slider {
position: relative;
width: 100%;
height: 400px;
overflow: hidden;
border-radius: var(--border-radius-lg);
box-shadow: var(--shadow-xl);
}
.hero-slide {
position: absolute;
top: 0;
right: 0;
width: 100%;
height: 100%;
opacity: 0;
transition: opacity 1s ease-in-out;
object-fit: cover;
}
.hero-slide.active {
opacity: 1;
}
.hero-slide-controls {
position: absolute;
bottom: 20px;
right: 50%;
transform: translateX(50%);
display: flex;
gap: 10px;
z-index: 2;
}
.hero-slide-dot {
width: 12px;
height: 12px;
border-radius: 50%;
background: rgba(255,255,255,0.5);
cursor: pointer;
transition: all var(--transition-normal);
}
.hero-slide-dot.active {
background: white;
transform: scale(1.2);
}
.blog-card {
background: white;
border-radius: var(--border-radius-lg);
overflow: hidden;
box-shadow: var(--shadow-lg);
transition: all var(--transition-normal);
height: 100%;
border: 1px solid rgba(0,0,0,0.05);
}
.blog-card:hover {
transform: translateY(-10px);
box-shadow: var(--shadow-xl);
}
.blog-image-placeholder {
width: 100%;
height: 200px;
background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
display: flex;
align-items: center;
justify-content: center;
color: white;
font-size: 1.5rem;
font-weight: bold;
position: relative;
overflow: hidden;
}
.blog-image-placeholder::before {
content: '';
position: absolute;
top: -50%;
left: -50%;
width: 200%;
height: 200%;
background: linear-gradient(0deg, transparent, rgba(255,255,255,0.3), transparent);
transform: rotate(30deg);
animation: shimmer 3s infinite;
}
@keyframes shimmer {
0% { transform: translateX(-100%) rotate(30deg); }
100% { transform: translateX(100%) rotate(30deg); }
}
.blog-card-content {
padding: 20px;
}
.blog-card-title {
font-size: 1.3rem;
font-weight: 700;
margin-bottom: 10px;
color: var(--dark-color);
}
.blog-card-excerpt {
color: #6c757d;
font-size: 0.95rem;
line-height: 1.6;
margin-bottom: 15px;
}
.blog-card-meta {
display: flex;
justify-content: space-between;
align-items: center;
font-size: 0.85rem;
color: #6c757d;
}
.blog-card-date {
display: flex;
align-items: center;
gap: 5px;
}
.advanced-search-card {
background: white;
border-radius: var(--border-radius-lg);
padding: 25px;
box-shadow: var(--shadow-lg);
margin-bottom: 30px;
border-top: 4px solid var(--primary-color);
}
.search-results-grid {
display: grid;
grid-template-columns: repeat(auto-fill, minmax(300px,1fr));
gap: 20px;
}
.admin-only {
display: none;
}
.log-entry {
font-family: monospace;
font-size: 0.9rem;
}
.log-container {
background: #f8f9fa;
border-radius: 8px;
padding: 15px;
}
.user-avatar {
width: 80px;
height: 80px;
border-radius: 50%;
background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
color: white;
display: flex;
align-items: center;
justify-content: center;
font-size: 2rem;
font-weight: bold;
margin: 0 auto;
}
.modal-content {
border-radius: var(--border-radius-lg);
border: none;
}
.modal-header {
background: var(--gradient-primary);
color: white;
border-radius: var(--border-radius-lg) var(--border-radius-lg) 0 0;
}
.modal-header .btn-close {
filter: brightness(0) invert(1);
}
.toast {
position: fixed;
top: 20px;
left: 20px;
z-index: 9999;
min-width: 250px;
}
.skip-to-content {
position: absolute;
top: -40px;
right: 0;
background: var(--primary-color);
color: white;
padding: 8px 16px;
text-decoration: none;
z-index: 9999;
}
.skip-to-content:focus {
top: 0;
}
@media (max-width: 768px) {
.assistant-container { bottom: 20px; left: 20px; }
.assistant-window { width: calc(100vw - 40px); height: 70vh; }
.section-title { font-size: 2rem; }
.navbar-nav { background: white; padding: 20px; border-radius: var(--border-radius-md); margin-top: 10px; box-shadow: var(--shadow-lg); }
.nav-link { margin: 5px 0; padding: 12px 15px !important; }
.nav-link.active::after { bottom: -8px; }
.form-container { padding: 20px; margin: 0 -15px; border-radius: 0; }
.step { width: 35px; height: 35px; font-size: 0.9rem; }
.form-navigation { flex-direction: column; gap: 10px; }
.btn-form-next, .btn-form-prev, .btn-form-submit { width: 100%; }
.hero-title { font-size: 2rem; text-align: center; }
.hero-subtitle { text-align: center; }
.hero-buttons { justify-content: center; flex-wrap: wrap; }
.stat-value { font-size: 2rem; }
.footer { padding: 50px 0 20px; margin-top: 50px; }
.page-header { padding-top: 100px; }
.messages-cards-container { grid-template-columns: 1fr; }
.messages-header h2 { font-size: 2rem; }
.hero-image-slider { height: 300px; }
.search-results-grid { grid-template-columns: 1fr; }
}
@media (max-width: 576px) {
.navbar-brand { font-size: 1.5rem; }
.section-title { font-size: 1.8rem; }
.section-title::after { width: 50px; }
.btn-peymanyar, .btn-employer, .btn-contractor { padding: 10px 20px; font-size: 0.9rem; width: 100%; margin-bottom: 10px; }
.assistant-toggle { width: 60px; height: 60px; font-size: 1.5rem; }
.assistant-toggle .notification-badge { width: 20px; height: 20px; font-size: 0.7rem; }
.hero-image-slider { height: 250px; }
}
@media (hover: none) and (pointer: coarse) {
.nav-link { padding: 15px 20px !important; }
.btn-peymanyar, .btn-employer, .btn-contractor { min-height: 44px; }
.form-control, .form-select { min-height: 44px; font-size: 16px; }
.btn-messages { min-height: 44px; }
.hero-slide-dot { width: 16px; height: 16px; }
}
@media (prefers-color-scheme: dark) {
:root { --dark-color: #f8f9fa; --light-color: #1a1a2e; }
body { background-color: #121212; color: #e0e0e0; }
.navbar { background-color: rgba(26,26,46,0.95); }
.card-peymanyar { background: #2d2d2d; border-color: #404040; }
.form-container { background: #2d2d2d; color: #e0e0e0; }
.form-control, .form-select { background-color: #404040; border-color: #555; color: #e0e0e0; }
.form-control:focus, .form-select:focus { background-color: #404040; border-color: var(--primary-color); color: #e0e0e0; }
.messages-card, .messaging-page, .messages-result-section, .messages-header { background: #2d2d2d; color: #e0e0e0; }
#messagesResult { background: #404040; color: #e0e0e0; border-color: #555; }
.blog-card { background: #2d2d2d; border-color: #404040; }
.blog-card-title { color: #e0e0e0; }
.advanced-search-card { background: #2d2d2d; border-color: #404040; }
}
@media (prefers-reduced-motion: reduce) {
*, *::before, *::after { animation-duration: 0.01ms !important; animation-iteration-count: 1 !important; transition-duration: 0.01ms !important; }
.page-section { animation: none; transition: none; }
.hero-slide { transition: none; }
}
</style>
</head>
<body>
<!-- Ù…ÙˆØ¯Ø§Ù„ Ù‚ÙˆØ§Ù†ÛŒÙ† Ùˆ Ù…Ù‚Ø±Ø±Ø§Øª -->
<div class="modal fade" id="termsModal" tabindex="-1" aria-labelledby="termsModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="termsModalLabel">Ù‚ÙˆØ§Ù†ÛŒÙ† Ùˆ Ù…Ù‚Ø±Ø±Ø§Øª Ù¾ÛŒÙ…Ø§Ù†â€ŒÛŒØ§Ø±</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Ø¨Ø³ØªÙ†"></button>
      </div>
      <div class="modal-body">
        <h6>Û±. Ù‚ÙˆØ§Ù†ÛŒÙ† Ø¹Ù…ÙˆÙ…ÛŒ</h6>
        <p>Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ø®Ø¯Ù…Ø§Øª Ù¾Ù„ØªÙØ±Ù… Ù¾ÛŒÙ…Ø§Ù†â€ŒÛŒØ§Ø± Ø¨Ù‡ Ù…Ø¹Ù†Ø§ÛŒ Ù¾Ø°ÛŒØ±Ø´ Ú©Ø§Ù…Ù„ Ù‚ÙˆØ§Ù†ÛŒÙ† Ùˆ Ù…Ù‚Ø±Ø±Ø§Øª Ø²ÛŒØ± Ù…ÛŒâ€ŒØ¨Ø§Ø´Ø¯.</p>
        
        <h6>Û². Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ùˆ Ø­Ø³Ø§Ø¨ Ú©Ø§Ø±Ø¨Ø±ÛŒ</h6>
        <p>Ú©Ø§Ø±Ø¨Ø±Ø§Ù† Ù…ÙˆØ¸ÙÙ†Ø¯ Ø§Ø·Ù„Ø§Ø¹Ø§Øª ØµØ­ÛŒØ­ Ùˆ Ú©Ø§Ù…Ù„ Ø¯Ø± Ù‡Ù†Ú¯Ø§Ù… Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ø§Ø±Ø§Ø¦Ù‡ Ø¯Ù‡Ù†Ø¯. Ù…Ø³Ø¦ÙˆÙ„ÛŒØª Ù‡Ø±Ú¯ÙˆÙ†Ù‡ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù†Ø§Ø¯Ø±Ø³Øª Ø¨Ø± Ø¹Ù‡Ø¯Ù‡ Ú©Ø§Ø±Ø¨Ø± Ù…ÛŒâ€ŒØ¨Ø§Ø´Ø¯.</p>
        
        <h6>Û³. Ø­Ø±ÛŒÙ… Ø®ØµÙˆØµÛŒ</h6>
        <p>Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ú©Ø§Ø±Ø¨Ø±Ø§Ù† Ù†Ø²Ø¯ Ù¾ÛŒÙ…Ø§Ù†â€ŒÛŒØ§Ø± Ù…Ø­ÙÙˆØ¸ Ø¨ÙˆØ¯Ù‡ Ùˆ Ø¨Ø¯ÙˆÙ† Ø±Ø¶Ø§ÛŒØª Ú©Ø§Ø±Ø¨Ø± Ø¯Ø± Ø§Ø®ØªÛŒØ§Ø± Ø§Ø´Ø®Ø§Øµ Ø«Ø§Ù„Ø« Ù‚Ø±Ø§Ø± Ù†Ø®ÙˆØ§Ù‡Ø¯ Ú¯Ø±ÙØª.</p>
        
        <h6>Û´. Ù‚ÙˆØ§Ù†ÛŒÙ† Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯Ù‡Ø§</h6>
        <p>Ù¾ÛŒÙ…Ø§Ù†â€ŒÛŒØ§Ø± ØµØ±ÙØ§Ù‹ ÛŒÚ© Ù¾Ù„ØªÙØ±Ù… Ø§Ø±ØªØ¨Ø§Ø·ÛŒ Ø§Ø³Øª Ùˆ Ù…Ø³Ø¦ÙˆÙ„ÛŒØªÛŒ Ø¯Ø± Ù‚Ø¨Ø§Ù„ Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯Ù‡Ø§ÛŒ Ù…Ù†Ø¹Ù‚Ø¯ Ø´Ø¯Ù‡ Ø¨ÛŒÙ† Ú©Ø§Ø±ÙØ±Ù…Ø§ÛŒØ§Ù† Ùˆ Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø±Ø§Ù† Ù†Ø¯Ø§Ø±Ø¯.</p>
        
        <h6>Ûµ. Ø­Ù‚ Ù„ØºÙˆ Ø¹Ø¶ÙˆÛŒØª</h6>
        <p>Ù¾ÛŒÙ…Ø§Ù†â€ŒÛŒØ§Ø± Ø§ÛŒÙ† Ø­Ù‚ Ø±Ø§ Ø¨Ø±Ø§ÛŒ Ø®ÙˆØ¯ Ù…Ø­ÙÙˆØ¸ Ù…ÛŒâ€ŒØ¯Ø§Ø±Ø¯ Ø¯Ø± ØµÙˆØ±Øª Ù…Ø´Ø§Ù‡Ø¯Ù‡ ØªØ®Ù„ÙØŒ Ø­Ø³Ø§Ø¨ Ú©Ø§Ø±Ø¨Ø±ÛŒ Ø±Ø§ Ø¨Ø¯ÙˆÙ† Ø§Ø·Ù„Ø§Ø¹ Ù‚Ø¨Ù„ÛŒ Ù…Ø³Ø¯ÙˆØ¯ Ù†Ù…Ø§ÛŒØ¯.</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Ø¨Ø³ØªÙ†</button>
        <button type="button" class="btn btn-primary" onclick="acceptTerms()">Ù¾Ø°ÛŒØ±Ø´ Ù‚ÙˆØ§Ù†ÛŒÙ†</button>
      </div>
    </div>
  </div>
</div>

<!-- Ú©Ø§Ù†ØªÛŒÙ†Ø± toast Ø¨Ø±Ø§ÛŒ Ù†Ù…Ø§ÛŒØ´ Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§ -->
<div id="toastContainer" style="position: fixed; top: 20px; left: 20px; z-index: 9999;"></div>

<div class="assistant-container" role="complementary" aria-label="Ø¯Ø³ØªÛŒØ§Ø± Ù‡ÙˆØ´Ù…Ù†Ø¯">
<div id="assistantWindow" class="assistant-window" aria-hidden="true" aria-label="Ù¾Ù†Ø¬Ø±Ù‡ Ø¯Ø³ØªÛŒØ§Ø± Ù‡ÙˆØ´Ù…Ù†Ø¯">
<div class="assistant-header">
<div>
<h5 class="mb-1"><i class="bi bi-robot me-2" aria-hidden="true"></i>Ø¯Ø³ØªÛŒØ§Ø± Ù‡ÙˆØ´Ù…Ù†Ø¯ Ù¾ÛŒÙ…Ø§Ù†â€ŒÛŒØ§Ø±</h5>
<small class="opacity-75">Ø¨Ø±Ø§ÛŒ Ú©Ù…Ú© Ø¨Ù‡ Ø´Ù…Ø§ Ø§ÛŒÙ†Ø¬Ø§ÛŒÙ…!</small>
</div>
<button class="btn btn-sm btn-light" onclick="toggleAssistant()" aria-label="Ø¨Ø³ØªÙ† Ø¯Ø³ØªÛŒØ§Ø±">
<i class="bi bi-x-lg" aria-hidden="true"></i>
</button>
</div>
<div class="assistant-messages" id="assistantMessages" role="log" aria-live="polite"></div>
<div class="assistant-input">
<div class="input-group">
<input type="text" class="form-control" id="assistantInput" placeholder="Ø³ÙˆØ§Ù„ Ø®ÙˆØ¯ Ø±Ø§ Ø¨Ù¾Ø±Ø³ÛŒØ¯..." aria-label="Ù¾ÛŒØ§Ù… Ø¨Ø±Ø§ÛŒ Ø¯Ø³ØªÛŒØ§Ø± Ù‡ÙˆØ´Ù…Ù†Ø¯" aria-describedby="assistantHint">
<button class="btn btn-primary" onclick="sendAssistantMessage()" aria-label="Ø§Ø±Ø³Ø§Ù„ Ù¾ÛŒØ§Ù…">
<i class="bi bi-send" aria-hidden="true"></i>
</button>
</div>
<small id="assistantHint" class="text-muted mt-2 d-block">
<i class="bi bi-info-circle me-1" aria-hidden="true"></i>
Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø¯Ø± Ù…ÙˆØ±Ø¯ Ø«Ø¨Øªâ€ŒÙ†Ø§Ù…ØŒ Ø¬Ø³ØªØ¬ÙˆØŒ Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯Ù‡Ø§ Ùˆ ... Ø³ÙˆØ§Ù„ Ø¨Ù¾Ø±Ø³ÛŒØ¯
</small>
</div>
</div>
<button class="assistant-toggle" onclick="toggleAssistant()" aria-label="Ø¨Ø§Ø² Ú©Ø±Ø¯Ù† Ø¯Ø³ØªÛŒØ§Ø± Ù‡ÙˆØ´Ù…Ù†Ø¯" aria-expanded="false">
<i class="bi bi-robot" aria-hidden="true"></i>
<span class="notification-badge" id="assistantNotification" aria-live="polite">Û±</span>
</button>
</div>
<nav class="navbar navbar-expand-lg navbar-light fixed-top" aria-label="Ù…Ù†ÙˆÛŒ Ø§ØµÙ„ÛŒ">
<div class="container">
<a class="navbar-brand" href="#" onclick="showPage('home')" aria-label="Ù¾ÛŒÙ…Ø§Ù†â€ŒÛŒØ§Ø± - Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ ØµÙØ­Ù‡ Ø§ØµÙ„ÛŒ">
<span role="img" aria-label="Ø¢ÛŒÚ©ÙˆÙ† Ù¾ÛŒÙ…Ø§Ù†â€ŒÛŒØ§Ø±">ğŸ—ï¸</span> Ù¾ÛŒÙ…Ø§Ù†â€ŒÛŒØ§Ø±
</a>
<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarMain" aria-controls="navbarMain" aria-expanded="false" aria-label="Ù†Ù…Ø§ÛŒØ´/Ù…Ø®ÙÛŒ Ú©Ø±Ø¯Ù† Ù…Ù†Ùˆ">
<span class="navbar-toggler-icon"></span>
</button>
<div class="collapse navbar-collapse" id="navbarMain">
<ul class="navbar-nav ms-auto mb-2 mb-lg-0">
<li class="nav-item">
<a class="nav-link active" href="#" onclick="showPage('home')" aria-current="page">Ø®Ø§Ù†Ù‡</a>
</li>
<li class="nav-item">
<a class="nav-link" href="#" onclick="showPage('features')">ÙˆÛŒÚ˜Ú¯ÛŒâ€ŒÙ‡Ø§</a>
</li>
<li class="nav-item">
<a class="nav-link" href="#" onclick="showPage('search')">Ø¬Ø³ØªØ¬ÙˆÛŒ Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø±</a>
</li>
<li class="nav-item">
<a class="nav-link" href="#" onclick="showPage('projects')">Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§</a>
</li>
<li class="nav-item">
<a class="nav-link" href="#" onclick="showPage('blog')">Ø¨Ù„Ø§Ú¯</a>
</li>
<li class="nav-item dropdown">
<a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false" id="userMenuDropdown">
<i class="bi bi-person-circle me-1" aria-hidden="true"></i>
<span class="d-none d-md-inline">Ø­Ø³Ø§Ø¨ Ú©Ø§Ø±Ø¨Ø±ÛŒ</span>
</a>
<ul class="dropdown-menu" aria-labelledby="userMenuDropdown">
<li><a class="dropdown-item" href="#" onclick="showPage('profile')">Ù¾Ù†Ù„ Ú©Ø§Ø±Ø¨Ø±ÛŒ</a></li>
<li><a class="dropdown-item" href="#" onclick="showLogin()">ÙˆØ±ÙˆØ¯</a></li>
<li><hr class="dropdown-divider"></li>
<li><a class="dropdown-item" href="#" onclick="showEmployerRegistration()">Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ú©Ø§Ø±ÙØ±Ù…Ø§</a></li>
<li><a class="dropdown-item" href="#" onclick="showContractorRegistration()">Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø±</a></li>
<li><hr class="dropdown-divider"></li>
<li><a class="dropdown-item admin-only" href="#" onclick="showAdminLogin()" style="display: none;">
<i class="bi bi-shield-lock me-2"></i>ÙˆØ±ÙˆØ¯ Ù…Ø¯ÛŒØ±
</a></li>
<li><a class="dropdown-item admin-only" href="#" onclick="showAdminMessages()" style="display: none;">
<i class="bi bi-gear me-2"></i>Ù¾Ù†Ù„ Ù…Ø¯ÛŒØ±ÛŒØª
</a></li>
</ul>
</li>
</ul>
</div>
</div>
</nav>
<!-- ØµÙØ­Ù‡ Ø§ØµÙ„ÛŒ -->
<div id="home" class="page-section active" role="main" aria-label="ØµÙØ­Ù‡ Ø§ØµÙ„ÛŒ">

  <!-- Ø¨Ø®Ø´ Ø§ÙˆÙ„ - Ù‡Ø¯Ø± Ø¨Ø§ Ø¹Ú©Ø³ Ùˆ Ø¢Ù…Ø§Ø± -->
  <section class="hero-section" aria-label="Ø¨Ø®Ø´ Ù…Ø¹Ø±ÙÛŒ" style="padding-top: 100px;">
    <div class="container">
      
      <!-- Ø±Ø¯ÛŒÙ Ø§ØµÙ„ÛŒ Ø¨Ø±Ø§ÛŒ Ù…ØªÙ† Ùˆ Ø¹Ú©Ø³ -->
      <div class="row align-items-center">
        <!-- Ø³ØªÙˆÙ† Ù…ØªÙ† (Ø³Ù…Øª Ø±Ø§Ø³Øª) -->
        <div class="col-lg-6">
          <div class="hero-content-wrapper">
            <h1 class="hero-title mb-4 animate__animated animate__fadeInUp">
              <span class="d-block">Ù¾Ù„ØªÙØ±Ù… Ù‡ÙˆØ´Ù…Ù†Ø¯</span>
              <span class="gradient-text d-block" style="font-size: 3.5rem; line-height: 1.2;">Ù¾ÛŒÙ…Ø§Ù†â€ŒÛŒØ§Ø±</span>
              <span class="accent-text d-block mt-2" style="color: var(--accent-color); font-size: 1.8rem;">Ø§ØªØµØ§Ù„ Ú©Ø§Ø±ÙØ±Ù…Ø§ÛŒØ§Ù† Ùˆ Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø±Ø§Ù†</span>
            </h1>
            
            <p class="hero-subtitle mb-5 animate__animated animate__fadeInUp animate__delay-1s" style="max-width: 90%; line-height: 1.8;">
              Ù¾Ù„ØªÙØ±Ù… ØªØ®ØµØµÛŒ Ø¨Ø±Ø§ÛŒ ÛŒØ§ÙØªÙ†ØŒ Ø¨Ø±Ø±Ø³ÛŒ Ùˆ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø±Ø§Ù† Ù…Ø¹ØªØ¨Ø± Ø³Ø§Ø®ØªÙ…Ø§Ù†ÛŒ. 
              Ø¨Ø§ Ù…Ø§ØŒ Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§ÛŒ Ø³Ø§Ø®ØªÙ…Ø§Ù†ÛŒ Ø®ÙˆØ¯ Ø±Ø§ Ø¨Ù‡ Ø¯Ø³Øª Ø¨Ù‡ØªØ±ÛŒÙ† Ù…ØªØ®ØµØµØ§Ù† Ø¨Ø³Ù¾Ø§Ø±ÛŒØ¯.
            </p>
            
            <div class="d-flex gap-3 mb-5 animate__animated animate__fadeInUp animate__delay-2s">
              <button class="btn btn-employer btn-lg flex-grow-1" onclick="showEmployerRegistration()">
                <i class="bi bi-briefcase me-2" aria-hidden="true"></i>Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ú©Ø§Ø±ÙØ±Ù…Ø§
              </button>
              <button class="btn btn-contractor btn-lg flex-grow-1" onclick="showContractorRegistration()">
                <i class="bi bi-tools me-2" aria-hidden="true"></i>Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø±
              </button>
            </div>
          </div>
        </div>
        
        <!-- Ø³ØªÙˆÙ† Ø¹Ú©Ø³ (Ø³Ù…Øª Ú†Ù¾) -->
        <div class="col-lg-6">
          <div class="position-relative">
            <div class="hero-image-slider" style="height: 600px;">
              <img src="https://fycyznoykgxpaatjsawi.supabase.co/storage/v1/object/public/peymanyar-images/photo1.jpg" alt="ØªÛŒÙ… Ø³Ø§Ø®ØªÙ…Ø§Ù†ÛŒ Ø¯Ø± Ø­Ø§Ù„ Ù‡Ù…Ú©Ø§Ø±ÛŒ" class="hero-slide active">
              <img src="https://fycyznoykgxpaatjsawi.supabase.co/storage/v1/object/public/peymanyar-images/photo2.jpg" alt="Ù¾Ø±ÙˆÚ˜Ù‡ Ø³Ø§Ø®ØªÙ…Ø§Ù†ÛŒ Ø¯Ø± Ø­Ø§Ù„ Ø§Ø¬Ø±Ø§" class="hero-slide">
              <img src="https://fycyznoykgxpaatjsawi.supabase.co/storage/v1/object/public/peymanyar-images/photo3.jpg" alt="Ù…Ø¹Ù…Ø§Ø± Ø¯Ø± Ø­Ø§Ù„ Ø·Ø±Ø§Ø­ÛŒ Ù¾Ø±ÙˆÚ˜Ù‡" class="hero-slide">
              <img src="https://fycyznoykgxpaatjsawi.supabase.co/storage/v1/object/public/peymanyar-images/photo4.jpg" alt="Ù¾Ø±ÙˆÚ˜Ù‡ Ù…Ø¯Ø±Ù† Ø³Ø§Ø®ØªÙ…Ø§Ù†ÛŒ" class="hero-slide">
              <div class="hero-slide-controls">
                <div class="hero-slide-dot active" data-slide="0"></div>
                <div class="hero-slide-dot" data-slide="1"></div>
                <div class="hero-slide-dot" data-slide="2"></div>
                <div class="hero-slide-dot" data-slide="3"></div>
              </div>
            </div>
            <div class="position-absolute top-0 end-0 mt-4 me-4">
              <button class="btn btn-peymanyar btn-sm" onclick="toggleAssistant()">
                <i class="bi bi-robot me-1" aria-hidden="true"></i>Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ Ù‡ÙˆØ´Ù…Ù†Ø¯
              </button>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Ù†ÙˆØ§Ø± Ø¢Ù…Ø§Ø± -->
      <div class="stats-row animate__animated animate__fadeInUp animate__delay-1s mt-5">
        <div class="stat-box">
          <div class="stat-value" data-count="1250">Û°</div>
          <div class="stat-label">Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø± Ø«Ø¨Øªâ€ŒÙ†Ø§Ù…ÛŒ</div>
        </div>
        <div class="stat-box">
          <div class="stat-value" data-count="540">Û°</div>
          <div class="stat-label">Ù¾Ø±ÙˆÚ˜Ù‡ ØªÚ©Ù…ÛŒÙ„ Ø´Ø¯Ù‡</div>
        </div>
        <div class="stat-box">
          <div class="stat-value" data-count="320">Û°</div>
          <div class="stat-label">Ú©Ø§Ø±ÙØ±Ù…Ø§ÛŒ ÙØ¹Ø§Ù„</div>
        </div>
        <div class="stat-box">
          <div class="stat-value" data-count="98">Û°</div>
          <div class="stat-label">Ø±Ø¶Ø§ÛŒØªâ€ŒÙ…Ù†Ø¯ÛŒ</div>
        </div>
      </div>
      
    </div> <!-- Ø¨Ø³ØªÙ‡ Ø´Ø¯Ù† container Ø¨Ø®Ø´ Ø§ÙˆÙ„ -->
  </section> <!-- Ø¨Ø³ØªÙ‡ Ø´Ø¯Ù† section Ø¨Ø®Ø´ Ø§ÙˆÙ„ -->

  <!-- Ø¨Ø®Ø´ Ø¯ÙˆÙ… - "Ú†Ø±Ø§ Ù¾ÛŒÙ…Ø§Ù†â€ŒÛŒØ§Ø±" -->
  <section class="py-5" aria-label="ÙˆÛŒÚ˜Ú¯ÛŒâ€ŒÙ‡Ø§ÛŒ Ú©Ù„ÛŒØ¯ÛŒ">
    <div class="container">
      <h2 class="section-title text-center mb-5">Ú†Ø±Ø§ Ù¾ÛŒÙ…Ø§Ù†â€ŒÛŒØ§Ø±ØŸ</h2>
      <div class="row">
        <div class="col-md-4 mb-4">
          <div class="card-peymanyar text-center">
            <div class="stat-icon mb-4">
              <i class="bi bi-shield-check" aria-hidden="true" style="font-size: 3rem; color: var(--primary-color);"></i>
            </div>
            <h4 class="mb-3">Ø§Ø¹ØªØ¨Ø§Ø±Ø³Ù†Ø¬ÛŒ Ù‡ÙˆØ´Ù…Ù†Ø¯</h4>
            <p class="text-muted">Ø¨Ø±Ø±Ø³ÛŒ Ú©Ø§Ù…Ù„ Ù…Ø¯Ø§Ø±Ú© Ùˆ Ø³ÙˆØ§Ø¨Ù‚ Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø±Ø§Ù† ØªÙˆØ³Ø· ØªÛŒÙ… ØªØ®ØµØµÛŒ</p>
          </div>
        </div>
        <div class="col-md-4 mb-4">
          <div class="card-peymanyar text-center">
            <div class="stat-icon mb-4">
              <i class="bi bi-search-heart" aria-hidden="true" style="font-size: 3rem; color: var(--primary-color);"></i>
            </div>
            <h4 class="mb-3">Ø¬Ø³ØªØ¬ÙˆÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡</h4>
            <p class="text-muted">ÛŒØ§ÙØªÙ† Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø± Ù…Ù†Ø§Ø³Ø¨ Ø¨Ø§ ÙÛŒÙ„ØªØ±Ù‡Ø§ÛŒ Ù…ØªÙ†ÙˆØ¹ Ùˆ Ù‡ÙˆØ´Ù…Ù†Ø¯</p>
          </div>
        </div>
        <div class="col-md-4 mb-4">
          <div class="card-peymanyar text-center">
            <div class="stat-icon mb-4">
              <i class="bi bi-chat-dots" aria-hidden="true" style="font-size: 3rem; color: var(--primary-color);"></i>
            </div>
            <h4 class="mb-3">Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Û²Û´/Û·</h4>
            <p class="text-muted">Ø¯Ø³ØªÛŒØ§Ø± Ù‡ÙˆØ´Ù…Ù†Ø¯ Ùˆ ØªÛŒÙ… Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ù‡Ù…ÛŒØ´Ù‡ Ø¯Ø± Ø¯Ø³ØªØ±Ø³</p>
          </div>
        </div>
      </div>
    </div> 
  </section> 
</div>
<!-- ØµÙØ­Ù‡ ÙˆÛŒÚ˜Ú¯ÛŒâ€ŒÙ‡Ø§ -->
<div id="features" class="page-section" role="main" aria-label="ØµÙØ­Ù‡ ÙˆÛŒÚ˜Ú¯ÛŒâ€ŒÙ‡Ø§">
<div class="container page-header">
<h2 class="section-title mb-4">ÙˆÛŒÚ˜Ú¯ÛŒâ€ŒÙ‡Ø§ÛŒ Ù¾Ù„ØªÙØ±Ù… Ù¾ÛŒÙ…Ø§Ù†â€ŒÛŒØ§Ø±</h2>
<p class="text-muted mb-5">Ù¾Ù„ØªÙØ±Ù… Ù¾ÛŒÙ…Ø§Ù†â€ŒÛŒØ§Ø± Ø¨Ø§ Ø§Ø±Ø§Ø¦Ù‡ Ø±Ø§Ù‡Ú©Ø§Ø±Ù‡Ø§ÛŒ Ù‡ÙˆØ´Ù…Ù†Ø¯ØŒ ÙØ±Ø¢ÛŒÙ†Ø¯ ÛŒØ§ÙØªÙ† Ùˆ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø±Ø§Ù† Ø³Ø§Ø®ØªÙ…Ø§Ù†ÛŒ Ø±Ø§ Ù…ØªØ­ÙˆÙ„ Ú©Ø±Ø¯Ù‡ Ø§Ø³Øª.</p>
<div class="row">
<div class="col-lg-6 mb-5">
<div class="card-peymanyar h-100">
<h3 class="mb-3"><i class="bi bi-search text-primary me-2"></i>Ø³ÛŒØ³ØªÙ… Ø¬Ø³ØªØ¬ÙˆÛŒ Ù‡ÙˆØ´Ù…Ù†Ø¯</h3>
<p class="text-muted mb-4">Ø¨Ø§ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² ÙÛŒÙ„ØªØ±Ù‡Ø§ÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡ Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø±Ø§Ù† Ø±Ø§ Ø¨Ø± Ø§Ø³Ø§Ø³ ØªØ®ØµØµØŒ Ø³Ø§Ø¨Ù‚Ù‡ Ú©Ø§Ø±ØŒ Ù…ÙˆÙ‚Ø¹ÛŒØª Ø¬ØºØ±Ø§ÙÛŒØ§ÛŒÛŒ Ùˆ Ø¨ÙˆØ¯Ø¬Ù‡ Ù¾ÛŒØ¯Ø§ Ú©Ù†ÛŒØ¯.</p>
<ul class="list-unstyled">
<li class="mb-2"><i class="bi bi-check-circle-fill text-success me-2"></i>Ø¬Ø³ØªØ¬ÙˆÛŒ Ø¨Ø± Ø§Ø³Ø§Ø³ ØªØ®ØµØµ Ùˆ Ù…Ù‡Ø§Ø±Øª</li>
<li class="mb-2"><i class="bi bi-check-circle-fill text-success me-2"></i>ÙÛŒÙ„ØªØ± Ø¬ØºØ±Ø§ÙÛŒØ§ÛŒÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡</li>
<li class="mb-2"><i class="bi bi-check-circle-fill text-success me-2"></i>Ù…Ù‚Ø§ÛŒØ³Ù‡ Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø±Ø§Ù†</li>
<li><i class="bi bi-check-circle-fill text-success me-2"></i>Ø³ÛŒØ³ØªÙ… Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ Ù‡ÙˆØ´Ù…Ù†Ø¯</li>
</ul>
</div>
</div>
<div class="col-lg-6 mb-5">
<div class="card-peymanyar h-100">
<h3 class="mb-3"><i class="bi bi-shield-check text-primary me-2"></i>Ø³ÛŒØ³ØªÙ… Ø§Ø¹ØªØ¨Ø§Ø±Ø³Ù†Ø¬ÛŒ</h3>
<p class="text-muted mb-4">ØªÛŒÙ… ØªØ®ØµØµÛŒ Ù…Ø§ Ù…Ø¯Ø§Ø±Ú©ØŒ Ú¯ÙˆØ§Ù‡ÛŒÙ†Ø§Ù…Ù‡â€ŒÙ‡Ø§ Ùˆ Ø³ÙˆØ§Ø¨Ù‚ Ù‡Ø± Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø± Ø±Ø§ Ø¨Ù‡ Ø¯Ù‚Øª Ø¨Ø±Ø±Ø³ÛŒ Ù…ÛŒâ€ŒÚ©Ù†Ø¯.</p>
<ul class="list-unstyled">
<li class="mb-2"><i class="bi bi-check-circle-fill text-success me-2"></i>Ø¨Ø±Ø±Ø³ÛŒ Ù…Ø¯Ø§Ø±Ú© Ùˆ Ú¯ÙˆØ§Ù‡ÛŒÙ†Ø§Ù…Ù‡â€ŒÙ‡Ø§</li>
<li class="mb-2"><i class="bi bi-check-circle-fill text-success me-2"></i>Ø§Ø¹ØªØ¨Ø§Ø±Ø³Ù†Ø¬ÛŒ Ø³ÙˆØ§Ø¨Ù‚ Ú©Ø§Ø±ÛŒ</li>
<li class="mb-2"><i class="bi bi-check-circle-fill text-success me-2"></i>Ø³ÛŒØ³ØªÙ… Ø§Ù…ØªÛŒØ§Ø²Ø¯Ù‡ÛŒ Ùˆ Ù†Ø¸Ø±Ø§Øª</li>
<li><i class="bi bi-check-circle-fill text-success me-2"></i>ØªØ¶Ù…ÛŒÙ† Ú©ÛŒÙÛŒØª Ùˆ Ø§Ù…Ù†ÛŒØª</li>
</ul>
</div>
</div>
</div>
</div>
</div>

<!-- ØµÙØ­Ù‡ Ø¬Ø³ØªØ¬Ùˆ -->
<div id="search" class="page-section" role="main" aria-label="ØµÙØ­Ù‡ Ø¬Ø³ØªØ¬ÙˆÛŒ Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø±">
<div class="container page-header">
<h2 class="section-title mb-4">Ø¬Ø³ØªØ¬ÙˆÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡ Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø±Ø§Ù†</h2>
<p class="text-muted mb-5">Ø¨Ø§ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² ÙÛŒÙ„ØªØ±Ù‡Ø§ÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡ØŒ Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø± Ù…Ù†Ø§Ø³Ø¨ Ù¾Ø±ÙˆÚ˜Ù‡ Ø®ÙˆØ¯ Ø±Ø§ Ù¾ÛŒØ¯Ø§ Ú©Ù†ÛŒØ¯.</p>
<div class="advanced-search-card">
<div class="row g-3">
<div class="col-md-6">
<label for="searchKeyword" class="form-label">Ú©Ù„Ù…Ù‡ Ú©Ù„ÛŒØ¯ÛŒ ÛŒØ§ Ù†Ø§Ù… Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø±</label>
<input type="text" class="form-control" id="searchKeyword" placeholder="Ø¬Ø³ØªØ¬Ùˆ Ø¨Ø± Ø§Ø³Ø§Ø³ ØªØ®ØµØµØŒ Ù†Ø§Ù… ÛŒØ§ Ø´Ù‡Ø±...">
</div>
<div class="col-md-6">
<label for="searchSpecialty" class="form-label">Ø­ÙˆØ²Ù‡ ØªØ®ØµØµ Ø§ØµÙ„ÛŒ</label>
<select class="form-select" id="searchSpecialty">
<option value="">Ù‡Ù…Ù‡ ØªØ®ØµØµâ€ŒÙ‡Ø§</option>
<option value="steel_fabrication">Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø± Ø³Ø§Ø®Øª Ø§Ø³Ú©Ù„Øª ÙÙ„Ø²ÛŒ</option>
<option value="steel_installation">Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø± Ù†ØµØ¨ Ø§Ø³Ú©Ù„Øª ÙÙ„Ø²ÛŒ</option>
<option value="formwork">Ø§Ú©ÛŒÙ¾ Ù‚Ø§Ù„Ø¨â€ŒØ¨Ù†Ø¯ÛŒ</option>
<option value="rebar">Ø§Ú©ÛŒÙ¾ Ø¢Ø±Ù…Ø§ØªÙˆØ±Ø¨Ù†Ø¯ÛŒ</option>
<option value="concrete_execution">Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø± Ø§Ø¬Ø±Ø§ÛŒ Ø¨ØªÙ†</option>
<option value="grouting">Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø± Ú¯Ø±ÙˆØªâ€ŒØ±ÛŒØ²ÛŒ</option>
<option value="welding">Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø± Ø¬ÙˆØ´Ú©Ø§Ø±ÛŒ Ø³Ø§Ø²Ù‡</option>
<option value="coating">Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø± Ø±Ù†Ú¯ Ùˆ Ù¾ÙˆØ´Ø´ ØµÙ†Ø¹ØªÛŒ</option>
<option value="excavation">Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø± Ø®Ø§Ú©Ø¨Ø±Ø¯Ø§Ø±ÛŒ Ùˆ Ù¾Ø§ÛŒØ¯Ø§Ø±Ø³Ø§Ø²ÛŒ</option>
<option value="foundation">Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø± ÙÙˆÙ†Ø¯Ø§Ø³ÛŒÙˆÙ† Ùˆ Ø§Ø¨Ù†ÛŒÙ‡</option>
<option value="site_development">Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø± Ù…Ø­ÙˆØ·Ù‡â€ŒØ³Ø§Ø²ÛŒ</option>
<option value="civil_works">Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø± Civil Works ØµÙ†Ø¹ØªÛŒ</option>
<option value="special_structures">Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø± Ø³Ø§Ø²Ù‡â€ŒÙ‡Ø§ÛŒ Ø®Ø§Øµ</option>
<option value="support_teams">Ø§Ú©ÛŒÙ¾â€ŒÙ‡Ø§ÛŒ Ù¾Ø´ØªÛŒØ¨Ø§Ù†</option>
<option value="equipment_rental">Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø± Ø§Ø¬Ø§Ø±Ù‡ Ù…Ø§Ø´ÛŒÙ†â€ŒØ¢Ù„Ø§Øª</option>
<option value="industrial_flooring">Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø± Ú©Ùâ€ŒØ³Ø§Ø²ÛŒ ØµÙ†Ø¹ØªÛŒ</option>
<option value="cutting_coring">Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø± Ø¨Ø±Ø´ Ùˆ Ú©Ø±Ú¯ÛŒØ±ÛŒ</option>
<option value="waterproofing">Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø± Ø¢Ø¨â€ŒØ¨Ù†Ø¯ÛŒ</option>
<option value="seismic_retrofit">Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø± Ù…Ù‚Ø§ÙˆÙ…â€ŒØ³Ø§Ø²ÛŒ</option>
<option value="special_concrete">Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø± Ø¨ØªÙ†â€ŒÙ‡Ø§ÛŒ Ø®Ø§Øµ</option>
<option value="precast">Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø± Ø³Ø§Ø²Ù‡â€ŒÙ‡Ø§ÛŒ Ù¾ÛŒØ´â€ŒØ³Ø§Ø®ØªÙ‡</option>
<option value="tunneling">Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø± ØªÙˆÙ†Ù„ Ùˆ Ø­ÙØ§Ø±ÛŒ</option>
</select>
</div>
<div class="col-md-6">
<label for="searchLocation" class="form-label">Ù…ÙˆÙ‚Ø¹ÛŒØª Ø¬ØºØ±Ø§ÙÛŒØ§ÛŒÛŒ</label>
<select class="form-select" id="searchLocation" multiple style="height: 200px;">
<optgroup label="Ù…Ù†Ø§Ø·Ù‚ Ù…Ø±Ú©Ø²ÛŒ">
  <option value="tehran">ØªÙ‡Ø±Ø§Ù†</option>
  <option value="alborz">Ø§Ù„Ø¨Ø±Ø²</option>
  <option value="qom">Ù‚Ù…</option>
  <option value="markazi">Ù…Ø±Ú©Ø²ÛŒ</option>
  <option value="qazvin">Ù‚Ø²ÙˆÛŒÙ†</option>
  <option value="zanjan">Ø²Ù†Ø¬Ø§Ù†</option>
  <option value="esfahan">Ø§ØµÙÙ‡Ø§Ù†</option>
  <option value="yazd">ÛŒØ²Ø¯</option>
  <option value="semnan">Ø³Ù…Ù†Ø§Ù†</option>
</optgroup>
<optgroup label="Ù…Ù†Ø§Ø·Ù‚ Ø´Ù…Ø§Ù„ÛŒ">
  <option value="gilan">Ú¯ÛŒÙ„Ø§Ù†</option>
  <option value="mazandaran">Ù…Ø§Ø²Ù†Ø¯Ø±Ø§Ù†</option>
  <option value="golestan">Ú¯Ù„Ø³ØªØ§Ù†</option>
  <option value="ardabil">Ø§Ø±Ø¯Ø¨ÛŒÙ„</option>
</optgroup>
<optgroup label="Ù…Ù†Ø§Ø·Ù‚ ØºØ±Ø¨ÛŒ">
  <option value="west-azerbaijan">Ø¢Ø°Ø±Ø¨Ø§ÛŒØ¬Ø§Ù† ØºØ±Ø¨ÛŒ</option>
  <option value="east-azerbaijan">Ø¢Ø°Ø±Ø¨Ø§ÛŒØ¬Ø§Ù† Ø´Ø±Ù‚ÛŒ</option>
  <option value="kurdistan">Ú©Ø±Ø¯Ø³ØªØ§Ù†</option>
  <option value="hamadan">Ù‡Ù…Ø¯Ø§Ù†</option>
  <option value="kermanshah">Ú©Ø±Ù…Ø§Ù†Ø´Ø§Ù‡</option>
  <option value="ilam">Ø§ÛŒÙ„Ø§Ù…</option>
  <option value="lorestan">Ù„Ø±Ø³ØªØ§Ù†</option>
</optgroup>
<optgroup label="Ù…Ù†Ø§Ø·Ù‚ Ø¬Ù†ÙˆØ¨ÛŒ">
  <option value="khuzestan">Ø®ÙˆØ²Ø³ØªØ§Ù†</option>
  <option value="fars">ÙØ§Ø±Ø³</option>
  <option value="hormozgan">Ù‡Ø±Ù…Ø²Ú¯Ø§Ù†</option>
  <option value="bushehr">Ø¨ÙˆØ´Ù‡Ø±</option>
  <option value="kohgiluyeh-boyer-ahmad">Ú©Ù‡Ú¯ÛŒÙ„ÙˆÛŒÙ‡ Ùˆ Ø¨ÙˆÛŒØ±Ø§Ø­Ù…Ø¯</option>
  <option value="chaharmahal-bakhtiari">Ú†Ù‡Ø§Ø±Ù…Ø­Ø§Ù„ Ùˆ Ø¨Ø®ØªÛŒØ§Ø±ÛŒ</option>
</optgroup>
<optgroup label="Ù…Ù†Ø§Ø·Ù‚ Ø´Ø±Ù‚ÛŒ">
  <option value="kerman">Ú©Ø±Ù…Ø§Ù†</option>
  <option value="sistan-baluchestan">Ø³ÛŒØ³ØªØ§Ù† Ùˆ Ø¨Ù„ÙˆÚ†Ø³ØªØ§Ù†</option>
  <option value="razavi-khorasan">Ø®Ø±Ø§Ø³Ø§Ù† Ø±Ø¶ÙˆÛŒ</option>
  <option value="south-khorasan">Ø®Ø±Ø§Ø³Ø§Ù† Ø¬Ù†ÙˆØ¨ÛŒ</option>
  <option value="north-khorasan">Ø®Ø±Ø§Ø³Ø§Ù† Ø´Ù…Ø§Ù„ÛŒ</option>
</optgroup>
</select>
<div class="multiselect-hint mt-2">
<i class="bi bi-info-circle me-1"></i>
Ø¨Ø±Ø§ÛŒ Ø§Ù†ØªØ®Ø§Ø¨ Ú†Ù†Ø¯ Ø§Ø³ØªØ§Ù†ØŒ Ú©Ù„ÛŒØ¯ Ctrl Ø±Ø§ Ù†Ú¯Ù‡ Ø¯Ø§Ø±ÛŒØ¯.
</div>
</div>
<div class="col-md-6">
<label for="searchExperience" class="form-label">Ø­Ø¯Ø§Ù‚Ù„ Ø³Ø§Ø¨Ù‚Ù‡ Ú©Ø§Ø± (Ø³Ø§Ù„)</label>
<select class="form-select" id="searchExperience">
<option value="">Ø¨Ø¯ÙˆÙ† Ù…Ø­Ø¯ÙˆØ¯ÛŒØª</option>
<option value="1">1 Ø³Ø§Ù„</option>
<option value="3">3 Ø³Ø§Ù„</option>
<option value="5">5 Ø³Ø§Ù„</option>
<option value="10">10 Ø³Ø§Ù„</option>
<option value="15">15 Ø³Ø§Ù„ Ø¨Ù‡ Ø¨Ø§Ù„Ø§</option>
</select>
</div>
<div class="col-12">
<button class="btn btn-peymanyar w-100" onclick="performSearch()">
<i class="bi bi-search me-2"></i>Ø¬Ø³ØªØ¬ÙˆÛŒ Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø±
</button>
</div>
</div>
</div>
<div class="search-results-grid" id="searchResults"></div>
</div>
</div>

<!-- ØµÙØ­Ù‡ Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§ -->
<div id="projects" class="page-section" role="main" aria-label="ØµÙØ­Ù‡ Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§">
  <div class="container page-header">
    <div class="d-flex justify-content-between align-items-center mb-4">
      <h2 class="section-title">ğŸ“‹ Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§</h2>
  <button class="btn btn-primary" onclick="openNewProjectModal()">
  <i class="bi bi-plus-circle me-2"></i>Ù¾Ø±ÙˆÚ˜Ù‡ Ø¬Ø¯ÛŒØ¯
</button>
    </div>

    <!-- ÙÛŒÙ„ØªØ±Ù‡Ø§ -->
    <div class="card-peymanyar mb-4">
      <div class="row g-3">
        <div class="col-md-4">
          <select class="form-select" id="projectFilterStatus" onchange="filterProjectsFrontend()">
            <option value="all">Ù‡Ù…Ù‡ Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§</option>
            <option value="open">Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø± Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø±</option>
            <option value="in_progress">Ø¯Ø± Ø­Ø§Ù„ Ø§Ù†Ø¬Ø§Ù…</option>
            <option value="completed">ØªÚ©Ù…ÛŒÙ„ Ø´Ø¯Ù‡</option>
          </select>
        </div>
        <div class="col-md-4">
          <input type="text" class="form-control" id="projectSearch" placeholder="Ø¬Ø³ØªØ¬Ùˆ Ø¯Ø± Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§...">
        </div>
        <div class="col-md-4">
          <button class="btn btn-peymanyar w-100" onclick="filterProjectsFrontend()">
            <i class="bi bi-search me-2"></i>Ø§Ø¹Ù…Ø§Ù„ ÙÛŒÙ„ØªØ±
          </button>
        </div>
      </div>
    </div>

    <!-- Ù„ÛŒØ³Øª Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§ -->
    <div id="projectsList" class="row">
      <!-- Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§ ØªÙˆØ³Ø· Ø¬Ø§ÙˆØ§Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ø§ÛŒÙ†Ø¬Ø§ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯ -->
    </div>
  </div>
</div>

<!-- Ù…ÙˆØ¯Ø§Ù„ Ù¾Ø±ÙˆÚ˜Ù‡ Ø¬Ø¯ÛŒØ¯ -->
<div class="modal fade" id="newProjectModal" tabindex="-1">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Ø§ÛŒØ¬Ø§Ø¯ Ù¾Ø±ÙˆÚ˜Ù‡ Ø¬Ø¯ÛŒØ¯</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Ø¨Ø³ØªÙ†"></button>
      </div>
      <div class="modal-body">
        <form id="newProjectForm">
          <div class="mb-3">
            <label class="form-label required">Ø¹Ù†ÙˆØ§Ù† Ù¾Ø±ÙˆÚ˜Ù‡</label>
            <input type="text" class="form-control" id="projectTitle" required>
          </div>
          <div class="mb-3">
            <label class="form-label required">ØªÙˆØ¶ÛŒØ­Ø§Øª Ù¾Ø±ÙˆÚ˜Ù‡</label>
            <textarea class="form-control" id="projectDescription" rows="4" required></textarea>
          </div>
          <div class="row">
            <div class="col-md-6 mb-3">
              <label class="form-label">Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ</label>
              <select class="form-select" id="projectCategory">
                <option value="">Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</option>
                <option value="residential">Ù…Ø³Ú©ÙˆÙ†ÛŒ</option>
                <option value="commercial">ØªØ¬Ø§Ø±ÛŒ</option>
                <option value="industrial">ØµÙ†Ø¹ØªÛŒ</option>
                <option value="renovation">Ù†ÙˆØ³Ø§Ø²ÛŒ</option>
              </select>
            </div>
            <div class="col-md-6 mb-3">
              <label class="form-label">Ø¨ÙˆØ¯Ø¬Ù‡ ØªÙ‚Ø±ÛŒØ¨ÛŒ</label>
              <select class="form-select" id="projectBudget">
                <option value="">Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</option>
                <option value="under100">Ø²ÛŒØ± Û±Û°Û° Ù…ÛŒÙ„ÛŒÙˆÙ†</option>
                <option value="100-500">Û±Û°Û° ØªØ§ ÛµÛ°Û° Ù…ÛŒÙ„ÛŒÙˆÙ†</option>
                <option value="500-1000">ÛµÛ°Û° Ù…ÛŒÙ„ÛŒÙˆÙ† ØªØ§ Û± Ù…ÛŒÙ„ÛŒØ§Ø±Ø¯</option>
                <option value="1-5">Û± ØªØ§ Ûµ Ù…ÛŒÙ„ÛŒØ§Ø±Ø¯</option>
                <option value="5+">Ø¨Ø§Ù„Ø§ÛŒ Ûµ Ù…ÛŒÙ„ÛŒØ§Ø±Ø¯</option>
              </select>
            </div>
          </div>
          <div class="row">
            <div class="col-md-6 mb-3">
              <label class="form-label">Ù…ÙˆÙ‚Ø¹ÛŒØª Ù…Ú©Ø§Ù†ÛŒ</label>
              <input type="text" class="form-control" id="projectLocation" placeholder="Ù…Ø«Ø§Ù„: ØªÙ‡Ø±Ø§Ù†ØŒ Ø³Ø¹Ø§Ø¯Øªâ€ŒØ¢Ø¨Ø§Ø¯">
            </div>
            <div class="col-md-6 mb-3">
              <label class="form-label">Ø²Ù…Ø§Ù†Ø¨Ù†Ø¯ÛŒ</label>
              <select class="form-select" id="projectTimeline">
                <option value="">Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</option>
                <option value="urgent">ÙÙˆØ±ÛŒ (Ú©Ù…ØªØ± Ø§Ø² Û± Ù…Ø§Ù‡)</option>
                <option value="1-3">Û± ØªØ§ Û³ Ù…Ø§Ù‡</option>
                <option value="3-6">Û³ ØªØ§ Û¶ Ù…Ø§Ù‡</option>
                <option value="6-12">Û¶ ØªØ§ Û±Û² Ù…Ø§Ù‡</option>
                <option value="flexible">Ø§Ù†Ø¹Ø·Ø§Ùâ€ŒÙ¾Ø°ÛŒØ±</option>
              </select>
            </div>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Ø§Ù†ØµØ±Ø§Ù</button>
        <button type="button" class="btn btn-primary" onclick="saveProjectToDatabase()">Ø§ÛŒØ¬Ø§Ø¯ Ù¾Ø±ÙˆÚ˜Ù‡</button>
      </div>
    </div>
  </div>
</div>

<!-- ØµÙØ­Ù‡ Ø¨Ù„Ø§Ú¯ -->
<div id="blog" class="page-section" role="main" aria-label="ØµÙØ­Ù‡ Ø¨Ù„Ø§Ú¯">
<div class="container page-header">
<h2 class="section-title mb-4">Ù…Ù‚Ø§Ù„Ø§Øª Ùˆ Ù…Ø·Ø§Ù„Ø¨ Ø¢Ù…ÙˆØ²Ø´ÛŒ</h2>
<p class="text-muted mb-5">Ø¢Ø®Ø±ÛŒÙ† Ù…Ø·Ø§Ù„Ø¨ Ùˆ Ù…Ù‚Ø§Ù„Ø§Øª ØªØ®ØµØµÛŒ Ø¯Ø± Ø­ÙˆØ²Ù‡ Ø³Ø§Ø®ØªÙ…Ø§Ù† Ùˆ Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø±ÛŒ</p>
<div class="row">
<div class="col-lg-4 col-md-6 mb-4">
<div class="blog-card">
<div class="blog-image-placeholder">
<span>ğŸ“‹ Ù…Ø¯ÛŒØ±ÛŒØª Ù¾Ø±ÙˆÚ˜Ù‡</span>
</div>
<div class="blog-card-content">
<h3 class="blog-card-title">Û±Û° Ù†Ú©ØªÙ‡ Ú©Ù„ÛŒØ¯ÛŒ Ø¯Ø± Ù…Ø¯ÛŒØ±ÛŒØª Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§ÛŒ Ø³Ø§Ø®ØªÙ…Ø§Ù†ÛŒ</h3>
<p class="blog-card-excerpt">Ø¢Ù…ÙˆØ²Ø´ Ø¨Ù‡ØªØ±ÛŒÙ† Ø±ÙˆØ´â€ŒÙ‡Ø§ Ø¨Ø±Ø§ÛŒ Ù…Ø¯ÛŒØ±ÛŒØª Ø¨Ù‡ÛŒÙ†Ù‡ Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§ÛŒ Ø³Ø§Ø®ØªÙ…Ø§Ù†ÛŒ Ùˆ Ú©Ø§Ù‡Ø´ Ù‡Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§</p>
<div class="blog-card-meta">
<span class="blog-card-date"><i class="bi bi-calendar"></i> Û±Ûµ ÙØ±ÙˆØ±Ø¯ÛŒÙ† Û±Û´Û°Û³</span>
<span>Ûµ Ø¯Ù‚ÛŒÙ‚Ù‡ Ù…Ø·Ø§Ù„Ø¹Ù‡</span>
</div>
</div>
</div>
</div>
<div class="col-lg-4 col-md-6 mb-4">
<div class="blog-card">
<div class="blog-image-placeholder">
<span>ğŸ” Ø§Ù†ØªØ®Ø§Ø¨ Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø±</span>
</div>
<div class="blog-card-content">
<h3 class="blog-card-title">Ú†Ú¯ÙˆÙ†Ù‡ Ø¨Ù‡ØªØ±ÛŒÙ† Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø± Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒÙ…ØŸ</h3>
<p class="blog-card-excerpt">Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ Ø¬Ø§Ù…Ø¹ Ø¨Ø±Ø§ÛŒ Ø§Ø±Ø²ÛŒØ§Ø¨ÛŒ Ùˆ Ø§Ù†ØªØ®Ø§Ø¨ Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø± Ù…Ù†Ø§Ø³Ø¨ Ø¨Ø± Ø§Ø³Ø§Ø³ Ù…Ø¹ÛŒØ§Ø±Ù‡Ø§ÛŒ Ú©Ù„ÛŒØ¯ÛŒ</p>
<div class="blog-card-meta">
<span class="blog-card-date"><i class="bi bi-calendar"></i> Û±Û° ÙØ±ÙˆØ±Ø¯ÛŒÙ† Û±Û´Û°Û³</span>
<span>Û· Ø¯Ù‚ÛŒÙ‚Ù‡ Ù…Ø·Ø§Ù„Ø¹Ù‡</span>
</div>
</div>
</div>
</div>
<div class="col-lg-4 col-md-6 mb-4">
<div class="blog-card">
<div class="blog-image-placeholder">
<span>ğŸ“„ Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯ Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø±ÛŒ</span>
</div>
<div class="blog-card-content">
<h3 class="blog-card-title">Ø§Ù†ÙˆØ§Ø¹ Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯Ù‡Ø§ÛŒ Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø±ÛŒ Ùˆ Ù…Ø²Ø§ÛŒØ§ÛŒ Ù‡Ø±Ú©Ø¯Ø§Ù…</h3>
<p class="blog-card-excerpt">Ø¨Ø±Ø±Ø³ÛŒ Ø§Ù†ÙˆØ§Ø¹ Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯Ù‡Ø§ÛŒ Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø±ÛŒ Ùˆ Ø§Ù†ØªØ®Ø§Ø¨ Ø¨Ù‡ØªØ±ÛŒÙ† Ù†ÙˆØ¹ Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯ Ø¨Ø±Ø§ÛŒ Ù¾Ø±ÙˆÚ˜Ù‡ Ø´Ù…Ø§</p>
<div class="blog-card-meta">
<span class="blog-card-date"><i class="bi bi-calendar"></i> Ûµ ÙØ±ÙˆØ±Ø¯ÛŒÙ† Û±Û´Û°Û³</span>
<span>Û±Û° Ø¯Ù‚ÛŒÙ‚Ù‡ Ù…Ø·Ø§Ù„Ø¹Ù‡</span>
</div>
</div>
</div>
</div>
<div class="col-lg-4 col-md-6 mb-4">
<div class="blog-card">
<div class="blog-image-placeholder">
<span>ğŸ§± Ù…ØµØ§Ù„Ø­ Ø³Ø§Ø®ØªÙ…Ø§Ù†ÛŒ</span>
</div>
<div class="blog-card-content">
<h3 class="blog-card-title">Ø¨Ù‡ØªØ±ÛŒÙ† Ù…ØµØ§Ù„Ø­ Ø³Ø§Ø®ØªÙ…Ø§Ù†ÛŒ Ø³Ø§Ù„ Û±Û´Û°Û³</h3>
<p class="blog-card-excerpt">Ù…Ø¹Ø±ÙÛŒ Ø¬Ø¯ÛŒØ¯ØªØ±ÛŒÙ† Ùˆ Ø¨Ø§Ú©ÛŒÙÛŒØªâ€ŒØªØ±ÛŒÙ† Ù…ØµØ§Ù„Ø­ Ø³Ø§Ø®ØªÙ…Ø§Ù†ÛŒ Ùˆ ÙˆÛŒÚ˜Ú¯ÛŒâ€ŒÙ‡Ø§ÛŒ Ù‡Ø±Ú©Ø¯Ø§Ù…</p>
<div class="blog-card-meta">
<span class="blog-card-date"><i class="bi bi-calendar"></i> Û± ÙØ±ÙˆØ±Ø¯ÛŒÙ† Û±Û´Û°Û³</span>
<span>Û¸ Ø¯Ù‚ÛŒÙ‚Ù‡ Ù…Ø·Ø§Ù„Ø¹Ù‡</span>
</div>
</div>
</div>
</div>
<div class="col-lg-4 col-md-6 mb-4">
<div class="blog-card">
<div class="blog-image-placeholder">
<span>ğŸ›¡ï¸ Ø§ÛŒÙ…Ù†ÛŒ Ø³Ø§Ø®ØªÙ…Ø§Ù†</span>
</div>
<div class="blog-card-content">
<h3 class="blog-card-title">Ø±Ø¹Ø§ÛŒØª Ù†Ú©Ø§Øª Ø§ÛŒÙ…Ù†ÛŒ Ø¯Ø± Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§ÛŒ Ø³Ø§Ø®ØªÙ…Ø§Ù†ÛŒ</h3>
<p class="blog-card-excerpt">Ù…Ù‡Ù…â€ŒØªØ±ÛŒÙ† Ù†Ú©Ø§Øª Ø§ÛŒÙ…Ù†ÛŒ Ú©Ù‡ Ù‡Ø± Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø± Ùˆ Ú©Ø§Ø±ÙØ±Ù…Ø§ Ø¨Ø§ÛŒØ¯ Ø¨Ø¯Ø§Ù†Ø¯</p>
<div class="blog-card-meta">
<span class="blog-card-date"><i class="bi bi-calendar"></i> Û²Ûµ Ø§Ø³ÙÙ†Ø¯ Û±Û´Û°Û²</span>
<span>Û¶ Ø¯Ù‚ÛŒÙ‚Ù‡ Ù…Ø·Ø§Ù„Ø¹Ù‡</span>
</div>
</div>
</div>
</div>
<div class="col-lg-4 col-md-6 mb-4">
<div class="blog-card">
<div class="blog-image-placeholder">
<span>ğŸ¤– ØªÚ©Ù†ÙˆÙ„ÙˆÚ˜ÛŒ Ø³Ø§Ø®ØªÙ…Ø§Ù†</span>
</div>
<div class="blog-card-content">
<h3 class="blog-card-title">ØªÚ©Ù†ÙˆÙ„ÙˆÚ˜ÛŒâ€ŒÙ‡Ø§ÛŒ Ø¬Ø¯ÛŒØ¯ Ø¯Ø± ØµÙ†Ø¹Øª Ø³Ø§Ø®ØªÙ…Ø§Ù†</h3>
<p class="blog-card-excerpt">Ø¨Ø±Ø±Ø³ÛŒ Ø¢Ø®Ø±ÛŒÙ† Ù†ÙˆØ¢ÙˆØ±ÛŒâ€ŒÙ‡Ø§ Ùˆ ØªÚ©Ù†ÙˆÙ„ÙˆÚ˜ÛŒâ€ŒÙ‡Ø§ÛŒ Ø±ÙˆØ² Ø¯Ø± ØµÙ†Ø¹Øª Ø³Ø§Ø®ØªÙ…Ø§Ù†â€ŒØ³Ø§Ø²ÛŒ</p>
<div class="blog-card-meta">
<span class="blog-card-date"><i class="bi bi-calendar"></i> Û²Û° Ø§Ø³ÙÙ†Ø¯ Û±Û´Û°Û²</span>
<span>Û¹ Ø¯Ù‚ÛŒÙ‚Ù‡ Ù…Ø·Ø§Ù„Ø¹Ù‡</span>
</div>
</div>
</div>
</div>
</div>
</div>
</div>

<!-- ØµÙØ­Ù‡ ÙˆØ±ÙˆØ¯ -->
<div id="login" class="page-section" role="main" aria-label="ØµÙØ­Ù‡ ÙˆØ±ÙˆØ¯">
<div class="container page-header">
<div class="row justify-content-center">
<div class="col-md-6 col-lg-5">
<div class="card-peymanyar">
<div class="text-center mb-4">
<h2 class="section-title">ğŸ‘¤ ÙˆØ±ÙˆØ¯ Ø¨Ù‡ Ø­Ø³Ø§Ø¨ Ú©Ø§Ø±Ø¨Ø±ÛŒ</h2>
<p class="text-muted">Ù„Ø·ÙØ§Ù‹ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø­Ø³Ø§Ø¨ Ø®ÙˆØ¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯</p>
</div>
<form id="loginForm">
<div class="mb-3">
<label for="loginEmail" class="form-label required">Ø§ÛŒÙ…ÛŒÙ„</label>
<input type="email" class="form-control" id="loginEmail" placeholder="example@peymanyar.com" required>
<div class="invalid-feedback">Ù„Ø·ÙØ§Ù‹ Ø§ÛŒÙ…ÛŒÙ„ Ù…Ø¹ØªØ¨Ø± ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯</div>
</div>
<div class="mb-3">
<label for="loginPassword" class="form-label required">Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±</label>
<div class="input-group">
<input type="password" class="form-control" id="loginPassword" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" required>
<button type="button" class="btn btn-outline-secondary" onclick="togglePasswordVisibility('loginPassword')">
<i class="bi bi-eye"></i>
</button>
</div>
<div class="invalid-feedback">Ù„Ø·ÙØ§Ù‹ Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯</div>
</div>
<div class="mb-3 form-check">
<input type="checkbox" class="form-check-input" id="rememberMe">
<label class="form-check-label" for="rememberMe">Ù…Ø±Ø§ Ø¨Ù‡ Ø®Ø§Ø·Ø± Ø¨Ø³Ù¾Ø§Ø±</label>
</div>
<div class="mb-3 text-end">
<a href="#" class="text-primary" onclick="showForgotPassword()">Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø®ÙˆØ¯ Ø±Ø§ ÙØ±Ø§Ù…ÙˆØ´ Ú©Ø±Ø¯Ù‡â€ŒØ§ÛŒØ¯ØŸ</a>
</div>
<div class="d-grid gap-2">
<button type="submit" class="btn btn-peymanyar">
<i class="bi bi-box-arrow-in-right me-2"></i>ÙˆØ±ÙˆØ¯ Ø¨Ù‡ Ø­Ø³Ø§Ø¨
</button>
<button type="button" class="btn btn-outline-secondary" onclick="showMainPage()">Ø¨Ø§Ø²Ú¯Ø´Øª</button>
</div>
</form>
<div class="mt-4 text-center">
<p class="text-muted small">Ø­Ø³Ø§Ø¨ Ú©Ø§Ø±Ø¨Ø±ÛŒ Ù†Ø¯Ø§Ø±ÛŒØ¯ØŸ
<a href="#" class="text-primary" onclick="showEmployerRegistration()">Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ú©Ø§Ø±ÙØ±Ù…Ø§</a> ÛŒØ§
<a href="#" class="text-primary" onclick="showContractorRegistration()">Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø±</a>
</p>
</div>
</div>
</div>
</div>
</div>
</div>

<!-- ØµÙØ­Ù‡ ÙØ±Ø§Ù…ÙˆØ´ÛŒ Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± -->
<div id="forgotPassword" class="page-section" role="main" aria-label="ØµÙØ­Ù‡ Ø¨Ø§Ø²ÛŒØ§Ø¨ÛŒ Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±">
<div class="container page-header">
<div class="row justify-content-center">
<div class="col-md-6 col-lg-5">
<div class="card-peymanyar">
<button class="btn btn-back mb-3" onclick="showPage('login')" aria-label="Ø¨Ø§Ø²Ú¯Ø´Øª">
<i class="bi bi-arrow-right me-2"></i>Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ ÙˆØ±ÙˆØ¯
</button>
<div class="text-center mb-4">
<h2 class="section-title">ğŸ” Ø¨Ø§Ø²ÛŒØ§Ø¨ÛŒ Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±</h2>
<p class="text-muted">Ø§ÛŒÙ…ÛŒÙ„ Ø®ÙˆØ¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯ ØªØ§ Ù„ÛŒÙ†Ú© Ø¨Ø§Ø²ÛŒØ§Ø¨ÛŒ Ø§Ø±Ø³Ø§Ù„ Ø´ÙˆØ¯</p>
</div>
<form id="forgotPasswordForm">
<div class="mb-3">
<label for="forgotEmail" class="form-label required">Ø§ÛŒÙ…ÛŒÙ„</label>
<input type="email" class="form-control" id="forgotEmail" placeholder="example@peymanyar.com" required>
<div class="invalid-feedback">Ù„Ø·ÙØ§Ù‹ Ø§ÛŒÙ…ÛŒÙ„ Ù…Ø¹ØªØ¨Ø± ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯</div>
</div>
<div class="d-grid gap-2">
<button type="submit" class="btn btn-peymanyar">
<i class="bi bi-envelope me-2"></i>Ø§Ø±Ø³Ø§Ù„ Ù„ÛŒÙ†Ú© Ø¨Ø§Ø²ÛŒØ§Ø¨ÛŒ
</button>
</div>
</form>
<div class="mt-4 text-center">
<p class="text-muted small">Ù„ÛŒÙ†Ú© Ø¨Ø§Ø²ÛŒØ§Ø¨ÛŒ Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø¨Ù‡ Ø§ÛŒÙ…ÛŒÙ„ Ø´Ù…Ø§ Ø§Ø±Ø³Ø§Ù„ Ø®ÙˆØ§Ù‡Ø¯ Ø´Ø¯.</p>
</div>
</div>
</div>
</div>
</div>
</div>

<!-- ØµÙØ­Ù‡ ÙˆØ±ÙˆØ¯ Ø§Ø¯Ù…ÛŒÙ† -->
<div id="adminLogin" class="page-section" role="main" aria-label="ØµÙØ­Ù‡ ÙˆØ±ÙˆØ¯ Ø§Ø¯Ù…ÛŒÙ†">
<div class="container page-header">
<div class="row justify-content-center">
<div class="col-md-6 col-lg-5">
<div class="card-peymanyar">
<div class="text-center mb-4">
<h2 class="section-title">ğŸ” ÙˆØ±ÙˆØ¯ Ø¨Ù‡ Ù¾Ù†Ù„ Ù…Ø¯ÛŒØ±ÛŒØª</h2>
<p class="text-muted">ÙÙ‚Ø· Ø¨Ø±Ø§ÛŒ Ù…Ø¯ÛŒØ±Ø§Ù† Ø³ÛŒØ³ØªÙ…</p>
</div>
<form id="adminLoginForm">
<div class="mb-3">
<label for="adminEmail" class="form-label">Ø§ÛŒÙ…ÛŒÙ„ Ù…Ø¯ÛŒØ±</label>
<input type="email" class="form-control" id="adminEmail" placeholder="admin@peymanyar.com" required>
<div class="invalid-feedback">Ù„Ø·ÙØ§Ù‹ Ø§ÛŒÙ…ÛŒÙ„ Ù…Ø¹ØªØ¨Ø± ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯</div>
</div>
<div class="mb-3">
<label for="adminPassword" class="form-label">Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±</label>
<input type="password" class="form-control" id="adminPassword" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" required>
<div class="invalid-feedback">Ù„Ø·ÙØ§Ù‹ Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯</div>
</div>
<div class="mb-3 form-check">
<input type="checkbox" class="form-check-input" id="rememberAdmin">
<label class="form-check-label" for="rememberAdmin">Ù…Ø±Ø§ Ø¨Ù‡ Ø®Ø§Ø·Ø± Ø¨Ø³Ù¾Ø§Ø±</label>
</div>
<div class="d-grid gap-2">
<button type="submit" class="btn btn-peymanyar">
<i class="bi bi-box-arrow-in-right me-2"></i>ÙˆØ±ÙˆØ¯ Ø¨Ù‡ Ù¾Ù†Ù„
</button>
<button type="button" class="btn btn-outline-secondary" onclick="showMainPage()">Ø¨Ø§Ø²Ú¯Ø´Øª</button>
</div>
</form>
<div class="mt-4 text-center">
<p class="text-muted small"><i class="bi bi-shield-lock me-1"></i>Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ù‡ Ø§ÛŒÙ† ØµÙØ­Ù‡ ÙÙ‚Ø· Ø¨Ø±Ø§ÛŒ Ù…Ø¯ÛŒØ±Ø§Ù† Ù…Ø¬Ø§Ø² Ù…ÛŒâ€ŒØ¨Ø§Ø´Ø¯</p>
</div>
</div>
</div>
</div>
</div>
</div>
<!-- ØµÙØ­Ù‡ Ù¾Ù†Ù„ Ù…Ø¯ÛŒØ±ÛŒØª - ØªÙˆØ³Ø¹Ù‡ Ú©Ø§Ù…Ù„ Û¹ Ø²Ø¨Ø§Ù†Ù‡ Ø¨Ø§ Ù‚Ø§Ø¨Ù„ÛŒØªâ€ŒÙ‡Ø§ÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡ -->
<div id="adminMessages" class="page-section" role="main" aria-label="Ù¾Ù†Ù„ Ù…Ø¯ÛŒØ±ÛŒØª Ù¾ÛŒØ§Ù…â€ŒÛŒØ§Ø±">
<div class="container page-header">
<div class="d-flex justify-content-between align-items-center mb-4">
<div>
<h2 class="section-title mb-1">ğŸ¦‰ Ù¾Ù†Ù„ Ù…Ø¯ÛŒØ±ÛŒØª Ù¾ÛŒØ§Ù…â€ŒÛŒØ§Ø±</h2>
<p class="text-muted">Ù…Ø¯ÛŒØ±ÛŒØª Ù¾ÛŒØ´Ø±ÙØªÙ‡ Ø³ÛŒØ³ØªÙ… Ù¾ÛŒØ§Ù…â€ŒÛŒØ§Ø± Ù‡ÙˆØ´Ù…Ù†Ø¯</p>
</div>
<div>
<button class="btn btn-outline-danger btn-sm" onclick="adminLogout()">
<i class="bi bi-box-arrow-right me-1"></i>Ø®Ø±ÙˆØ¬
</button>
</div>
</div>

<!-- Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§ÛŒ Ø¢Ù…Ø§Ø± -->
<div class="card-peymanyar mb-4">
<div class="row">
<div class="col-md-3 col-6 mb-3">
<div class="text-center p-3 border rounded">
<div class="h4 mb-2" id="adminTotalMessages">0</div>
<div class="text-muted small">Ú©Ù„ Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§</div>
</div>
</div>
<div class="col-md-3 col-6 mb-3">
<div class="text-center p-3 border rounded">
<div class="h4 mb-2" id="adminActiveUsers">0</div>
<div class="text-muted small">Ú©Ø§Ø±Ø¨Ø±Ø§Ù† ÙØ¹Ø§Ù„</div>
</div>
</div>
<div class="col-md-3 col-6 mb-3">
<div class="text-center p-3 border rounded">
<div class="h4 mb-2" id="adminStorageUsed">0</div>
<div class="text-muted small">ÙØ¶Ø§ÛŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø´Ø¯Ù‡</div>
</div>
</div>
<div class="col-md-3 col-6 mb-3">
<div class="text-center p-3 border rounded">
<div class="h4 mb-2" id="adminSystemHealth">100%</div>
<div class="text-muted small">Ø³Ù„Ø§Ù…Øª Ø³ÛŒØ³ØªÙ…</div>
</div>
</div>
</div>
</div>

<!-- ØªØ¨â€ŒÙ‡Ø§ÛŒ Ù¾Ù†Ù„ Ù…Ø¯ÛŒØ±ÛŒØª Ø¨Ø§ Ù‚Ø§Ø¨Ù„ÛŒØªâ€ŒÙ‡Ø§ÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡ -->
<ul class="nav nav-tabs mb-4" id="adminTabs" role="tablist">
  <li class="nav-item" role="presentation">
    <button class="nav-link active" id="tab1-tab" data-bs-toggle="tab" data-bs-target="#tab1" type="button" role="tab">ğŸ“Š ØªØ­Ù„ÛŒÙ„ Ù¾ÛŒØ´Ø±ÙØªÙ‡ Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§</button>
  </li>
  <li class="nav-item" role="presentation">
    <button class="nav-link" id="tab2-tab" data-bs-toggle="tab" data-bs-target="#tab2" type="button" role="tab">ğŸ“¨ Ø§Ø±Ø³Ø§Ù„ Ù¾ÛŒØ§Ù… Ù…Ø¯ÛŒØ±ÛŒØªÛŒ</button>
  </li>
  <li class="nav-item" role="presentation">
    <button class="nav-link" id="tab3-tab" data-bs-toggle="tab" data-bs-target="#tab3" type="button" role="tab">ğŸ” Ø¬Ø³ØªØ¬ÙˆÛŒ Ø¬Ø§Ù…Ø¹</button>
  </li>
  <li class="nav-item" role="presentation">
    <button class="nav-link" id="tab4-tab" data-bs-toggle="tab" data-bs-target="#tab4" type="button" role="tab">ğŸ“ˆ Ø¢Ù…Ø§Ø± Ø³ÛŒØ³ØªÙ…</button>
  </li>
  <li class="nav-item" role="presentation">
    <button class="nav-link" id="tab5-tab" data-bs-toggle="tab" data-bs-target="#tab5" type="button" role="tab">âš™ï¸ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø³ÛŒØ³ØªÙ…</button>
  </li>
  <li class="nav-item" role="presentation">
    <button class="nav-link" id="tab6-tab" data-bs-toggle="tab" data-bs-target="#tab6" type="button" role="tab">ğŸ”„ Ù…Ø¯ÛŒØ±ÛŒØª Ú©Ø§Ø±Ø¨Ø±Ø§Ù†</button>
  </li>
  <li class="nav-item" role="presentation">
    <button class="nav-link" id="tab7-tab" data-bs-toggle="tab" data-bs-target="#tab7" type="button" role="tab">ğŸ§¹ Ù¾Ø§Ú©Ø³Ø§Ø²ÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡</button>
  </li>
  <li class="nav-item" role="presentation">
    <button class="nav-link" id="tab8-tab" data-bs-toggle="tab" data-bs-target="#tab8" type="button" role="tab">ğŸ“š Ù„Ø§Ú¯ Ùˆ Ú¯Ø²Ø§Ø±Ø´â€ŒÙ‡Ø§</button>
  </li>
  <li class="nav-item" role="presentation">
    <button class="nav-link" id="tab9-tab" data-bs-toggle="tab" data-bs-target="#tab9" type="button" role="tab">ğŸ“‹ Ù…Ø¯ÛŒØ±ÛŒØª Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§</button>
  </li>
</ul>

<div class="tab-content" id="adminTabsContent">
  <!-- ØªØ¨ 1: ØªØ­Ù„ÛŒÙ„ Ù¾ÛŒØ´Ø±ÙØªÙ‡ Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§ (Ù†Ù…ÙˆØ¯Ø§Ø±ØŒ Ø¢Ù…Ø§Ø± Ú©Ù„ÛŒØŒ ÙØ¹Ø§Ù„â€ŒØªØ±ÛŒÙ† Ú©Ø§Ø±Ø¨Ø±Ø§Ù†ØŒ ÙÛŒÙ„ØªØ± Ø¨Ø§Ø²Ù‡ Ø²Ù…Ø§Ù†ÛŒ) -->
  <div class="tab-pane fade show active" id="tab1" role="tabpanel">
    <div class="card-peymanyar">
      <div class="row mb-4">
        <div class="col-md-8">
          <h5>ğŸ“Š Ù†Ù…ÙˆØ¯Ø§Ø± ØªØ¹Ø¯Ø§Ø¯ Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§</h5>
          <div class="btn-group mb-3" role="group">
            <button class="btn btn-sm btn-outline-primary" onclick="adminLoadMessageChart('daily')">Ø±ÙˆØ²Ø§Ù†Ù‡</button>
            <button class="btn btn-sm btn-outline-primary" onclick="adminLoadMessageChart('weekly')">Ù‡ÙØªÚ¯ÛŒ</button>
            <button class="btn btn-sm btn-outline-primary" onclick="adminLoadMessageChart('monthly')">Ù…Ø§Ù‡Ø§Ù†Ù‡</button>
          </div>
          <div style="height: 200px; background: #f0f0f0; display: flex; align-items: flex-end; padding: 10px; gap: 10px;" id="messageChart">
            <!-- Ù†Ù…ÙˆØ¯Ø§Ø± Ø³Ø§Ø¯Ù‡ Ø¨Ø§ div -->
            <div style="flex:1; height: 30%; background: var(--primary-color);"></div>
            <div style="flex:1; height: 60%; background: var(--primary-color);"></div>
            <div style="flex:1; height: 80%; background: var(--primary-color);"></div>
            <div style="flex:1; height: 40%; background: var(--primary-color);"></div>
            <div style="flex:1; height: 70%; background: var(--primary-color);"></div>
            <div style="flex:1; height: 90%; background: var(--primary-color);"></div>
            <div style="flex:1; height: 50%; background: var(--primary-color);"></div>
          </div>
        </div>
        <div class="col-md-4">
          <h5>ğŸ“ˆ Ø¢Ù…Ø§Ø± Ú©Ù„ÛŒ</h5>
          <table class="table table-sm">
            <tr><td>Ú©Ù„ Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§:</td><td><strong id="totalMessagesStat">Û±Û²,Û¸Û´Ûµ</strong></td></tr>
            <tr><td>Ø§Ù…Ø±ÙˆØ²:</td><td><strong id="todayMessagesStat">Û´Û²Û¸</strong></td></tr>
            <tr><td>Ø¯ÛŒØ±ÙˆØ²:</td><td><strong id="yesterdayMessagesStat">Û³Û¹Ûµ</strong></td></tr>
            <tr><td>Ù…ÛŒØ§Ù†Ú¯ÛŒÙ† Ø±ÙˆØ²Ø§Ù†Ù‡:</td><td><strong>Û´Û±Ûµ</strong></td></tr>
          </table>
          <div class="mt-3">
            <label class="form-label">ÙÛŒÙ„ØªØ± Ø¨Ø§Ø²Ù‡ Ø²Ù…Ø§Ù†ÛŒ</label>
            <div class="row g-2">
              <div class="col-6"><input type="date" class="form-control form-control-sm" id="dateFrom"></div>
              <div class="col-6"><input type="date" class="form-control form-control-sm" id="dateTo"></div>
              <div class="col-12 mt-2"><button class="btn btn-sm btn-peymanyar w-100" onclick="adminFilterMessagesByDate()">Ø§Ø¹Ù…Ø§Ù„ ÙÛŒÙ„ØªØ±</button></div>
            </div>
          </div>
        </div>
      </div>
      
      <h5 class="mt-4">ğŸ”¥ ÙØ¹Ø§Ù„â€ŒØªØ±ÛŒÙ† Ú©Ø§Ø±Ø¨Ø±Ø§Ù† Ø¯Ø± Ø§Ø±Ø³Ø§Ù„ Ù¾ÛŒØ§Ù…</h5>
      <table class="table table-hover">
        <thead>
          <tr><th>Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±</th><th>ØªØ¹Ø¯Ø§Ø¯ Ù¾ÛŒØ§Ù…</th><th>Ø¢Ø®Ø±ÛŒÙ† ÙØ¹Ø§Ù„ÛŒØª</th></tr>
        </thead>
        <tbody id="topUsersTable">
          <tr><td>Ø¹Ù„ÛŒ Ù…Ø­Ù…Ø¯ÛŒ</td><td>Û±Û²Û´</td><td>Û±Û´Û°Û³/Û±Û²/Û°Û¶</td></tr>
          <tr><td>Ø´Ø±Ú©Øª Ø³Ø§Ø²Ù‡â€ŒÚ¯Ø³ØªØ±</td><td>Û¸Û¹</td><td>Û±Û´Û°Û³/Û±Û²/Û°Ûµ</td></tr>
          <tr><td>Ø§Ø­Ù…Ø¯ Ø±Ø¶Ø§ÛŒÛŒ</td><td>Û¶Û·</td><td>Û±Û´Û°Û³/Û±Û²/Û°Û¶</td></tr>
        </tbody>
      </table>
      
      <button class="btn btn-peymanyar mt-4" onclick="adminRefreshMessageStats()">Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø¢Ù…Ø§Ø±</button>
    </div>
  </div>

  <!-- ØªØ¨ 2: Ø§Ø±Ø³Ø§Ù„ Ù¾ÛŒØ§Ù… Ù…Ø¯ÛŒØ±ÛŒØªÛŒ (Ø§Ø±Ø³Ø§Ù„ Ø¨Ù‡ Ù‡Ù…Ù‡ØŒ Ú¯Ø±ÙˆÙ‡ Ø®Ø§ØµØŒ Ú©Ø§Ø±Ø¨Ø± Ø®Ø§ØµØŒ ØªØ§Ø±ÛŒØ®Ú†Ù‡) -->
  <div class="tab-pane fade" id="tab2" role="tabpanel">
    <div class="card-peymanyar">
      <h5>ğŸ“¨ Ø§Ø±Ø³Ø§Ù„ Ù¾ÛŒØ§Ù… Ù…Ø¯ÛŒØ±ÛŒØªÛŒ</h5>
      
      <div class="row">
        <div class="col-md-8">
          <div class="mb-3">
            <label class="form-label">Ú¯ÛŒØ±Ù†Ø¯Ú¯Ø§Ù†</label>
            <select class="form-select" id="messageRecipients" onchange="toggleRecipientType()">
              <option value="all">Ù‡Ù…Ù‡ Ú©Ø§Ø±Ø¨Ø±Ø§Ù†</option>
              <option value="employers">Ú©Ø§Ø±ÙØ±Ù…Ø§ÛŒØ§Ù†</option>
              <option value="contractors">Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø±Ø§Ù†</option>
              <option value="specific">Ú©Ø§Ø±Ø¨Ø± Ø®Ø§Øµ</option>
            </select>
          </div>
          
          <div id="specificUserField" style="display: none;" class="mb-3">
            <label class="form-label">Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ø§Ø±Ø¨Ø±</label>
            <select class="form-select" id="specificUserSelect">
              <option value="">-- Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯ --</option>
              <option value="1">Ø¹Ù„ÛŒ Ù…Ø­Ù…Ø¯ÛŒ (Ú©Ø§Ø±ÙØ±Ù…Ø§)</option>
              <option value="2">Ø´Ø±Ú©Øª Ø³Ø§Ø²Ù‡â€ŒÚ¯Ø³ØªØ± (Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø±)</option>
              <option value="3">Ø§Ø­Ù…Ø¯ Ø±Ø¶Ø§ÛŒÛŒ (Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø±)</option>
            </select>
          </div>
          
          <div class="mb-3">
            <label class="form-label">Ø¹Ù†ÙˆØ§Ù† Ù¾ÛŒØ§Ù…</label>
            <input type="text" class="form-control" id="messageTitle" placeholder="Ø¹Ù†ÙˆØ§Ù† Ù¾ÛŒØ§Ù…...">
          </div>
          
          <div class="mb-3">
            <label class="form-label">Ù…ØªÙ† Ù¾ÛŒØ§Ù…</label>
            <textarea class="form-control" id="messageBody" rows="5" placeholder="Ù…ØªÙ† Ù¾ÛŒØ§Ù…..."></textarea>
          </div>
          
          <div class="mb-3 form-check">
            <input type="checkbox" class="form-check-input" id="scheduleMessage">
            <label class="form-check-label">Ø²Ù…Ø§Ù†â€ŒØ¨Ù†Ø¯ÛŒ Ø§Ø±Ø³Ø§Ù„</label>
          </div>
          
          <div id="scheduleOptions" style="display: none;">
            <div class="row">
              <div class="col-md-6 mb-3">
                <label class="form-label">ØªØ§Ø±ÛŒØ®</label>
                <input type="date" class="form-control" id="scheduleDate">
              </div>
              <div class="col-md-6 mb-3">
                <label class="form-label">Ø³Ø§Ø¹Øª</label>
                <input type="time" class="form-control" id="scheduleTime">
              </div>
            </div>
          </div>
          
          <button class="btn btn-peymanyar" onclick="adminSendMessage()">Ø§Ø±Ø³Ø§Ù„ Ù¾ÛŒØ§Ù…</button>
        </div>
        
        <div class="col-md-4">
          <h6>ğŸ“‹ ØªØ§Ø±ÛŒØ®Ú†Ù‡ Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§ÛŒ Ø§Ø±Ø³Ø§Ù„ÛŒ</h6>
          <div style="max-height: 300px; overflow-y: auto;">
            <div class="border p-2 mb-2">
              <small class="text-muted">Û±Û´Û°Û³/Û±Û²/Û°Ûµ</small>
              <div class="fw-bold">ØªØºÛŒÛŒØ±Ø§Øª Ø¬Ø¯ÛŒØ¯ Ø¯Ø± Ù¾Ù„ØªÙØ±Ù…</div>
              <small>Ø§Ø±Ø³Ø§Ù„ Ø¨Ù‡: Ù‡Ù…Ù‡ Ú©Ø§Ø±Ø¨Ø±Ø§Ù†</small>
            </div>
            <div class="border p-2 mb-2">
              <small class="text-muted">Û±Û´Û°Û³/Û±Û²/Û°Û´</small>
              <div class="fw-bold">ØªÙ…Ø¯ÛŒØ¯ Ø¨ÛŒÙ…Ù‡ Ù…Ø³Ø¦ÙˆÙ„ÛŒØª</div>
              <small>Ø§Ø±Ø³Ø§Ù„ Ø¨Ù‡: Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø±Ø§Ù†</small>
            </div>
            <div class="border p-2 mb-2">
              <small class="text-muted">Û±Û´Û°Û³/Û±Û²/Û°Û³</small>
              <div class="fw-bold">Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§ÛŒ Ø¬Ø¯ÛŒØ¯</div>
              <small>Ø§Ø±Ø³Ø§Ù„ Ø¨Ù‡: Ú©Ø§Ø±ÙØ±Ù…Ø§ÛŒØ§Ù†</small>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- ØªØ¨ 3: Ø¬Ø³ØªØ¬ÙˆÛŒ Ø¬Ø§Ù…Ø¹ (Ú©Ø§Ø±Ø¨Ø±Ø§Ù†ØŒ Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§ØŒ Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§ Ø¨Ø§ ÙÛŒÙ„ØªØ±Ù‡Ø§ÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡) -->
  <div class="tab-pane fade" id="tab3" role="tabpanel">
    <div class="card-peymanyar">
      <h5>ğŸ” Ø¬Ø³ØªØ¬ÙˆÛŒ Ø¬Ø§Ù…Ø¹</h5>
      
      <div class="row mb-3">
        <div class="col-md-8">
          <input type="text" class="form-control" id="globalSearch" placeholder="Ø¬Ø³ØªØ¬Ùˆ Ø¯Ø± Ú©Ø§Ø±Ø¨Ø±Ø§Ù†ØŒ Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§ØŒ Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§...">
        </div>
        <div class="col-md-4">
          <select class="form-select" id="searchType">
            <option value="all">Ù‡Ù…Ù‡ Ù…ÙˆØ§Ø±Ø¯</option>
            <option value="users">Ú©Ø§Ø±Ø¨Ø±Ø§Ù†</option>
            <option value="projects">Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§</option>
            <option value="messages">Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§</option>
          </select>
        </div>
      </div>
      
      <div class="row mb-3">
        <div class="col-md-3">
          <label class="form-label">Ø§Ø² ØªØ§Ø±ÛŒØ®</label>
          <input type="date" class="form-control" id="searchDateFrom">
        </div>
        <div class="col-md-3">
          <label class="form-label">ØªØ§ ØªØ§Ø±ÛŒØ®</label>
          <input type="date" class="form-control" id="searchDateTo">
        </div>
        <div class="col-md-3">
          <label class="form-label">ÙˆØ¶Ø¹ÛŒØª</label>
          <select class="form-select" id="searchStatus">
            <option value="all">Ù‡Ù…Ù‡</option>
            <option value="active">ÙØ¹Ø§Ù„</option>
            <option value="inactive">ØºÛŒØ±ÙØ¹Ø§Ù„</option>
          </select>
        </div>
        <div class="col-md-3">
          <label class="form-label">Ù†ÙˆØ¹</label>
          <select class="form-select" id="searchUserType">
            <option value="all">Ù‡Ù…Ù‡</option>
            <option value="employer">Ú©Ø§Ø±ÙØ±Ù…Ø§</option>
            <option value="contractor">Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø±</option>
          </select>
        </div>
      </div>
      
      <button class="btn btn-peymanyar w-100 mb-4" onclick="adminGlobalSearch()">Ø¬Ø³ØªØ¬Ùˆ</button>
      
      <div id="searchResults" class="mt-4">
        <!-- Ù†ØªØ§ÛŒØ¬ Ø¬Ø³ØªØ¬Ùˆ -->
      </div>
    </div>
  </div>

  <!-- ØªØ¨ 4: Ø¢Ù…Ø§Ø± Ø³ÛŒØ³ØªÙ… (Ù†Ù…ÙˆØ¯Ø§Ø± Ø±Ø´Ø¯ Ú©Ø§Ø±Ø¨Ø±Ø§Ù†ØŒ Ø¢Ù…Ø§Ø± Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§ØŒ Ø«Ø¨Øªâ€ŒÙ†Ø§Ù…ØŒ ØªØ®ØµØµâ€ŒÙ‡Ø§ØŒ Ø¢Ø¯Ø±Ø³â€ŒÙ‡Ø§) -->
  <div class="tab-pane fade" id="tab4" role="tabpanel">
    <div class="card-peymanyar">
      <div class="row">
        <div class="col-md-6">
          <h5>ğŸ“ˆ Ø±Ø´Ø¯ Ú©Ø§Ø±Ø¨Ø±Ø§Ù†</h5>
          <div style="height: 150px; background: #f0f0f0; display: flex; align-items: flex-end; padding: 5px; gap: 5px;">
            <div style="flex:1; height: 40%; background: var(--primary-color);"></div>
            <div style="flex:1; height: 55%; background: var(--primary-color);"></div>
            <div style="flex:1; height: 70%; background: var(--primary-color);"></div>
            <div style="flex:1; height: 65%; background: var(--primary-color);"></div>
            <div style="flex:1; height: 85%; background: var(--primary-color);"></div>
            <div style="flex:1; height: 100%; background: var(--primary-color);"></div>
          </div>
          <table class="table table-sm mt-3">
            <tr><td>Ú©Ù„ Ú©Ø§Ø±Ø¨Ø±Ø§Ù†:</td><td>Û²,Û±ÛµÛ´</td></tr>
            <tr><td>Ú©Ø§Ø±ÙØ±Ù…Ø§ÛŒØ§Ù†:</td><td>Û¸Û¹Û²</td></tr>
            <tr><td>Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø±Ø§Ù†:</td><td>Û±,Û²Û¶Û²</td></tr>
            <tr><td>Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ø§Ù…Ø±ÙˆØ²:</td><td>Û±Û²</td></tr>
            <tr><td>Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ø§ÛŒÙ† Ù…Ø§Ù‡:</td><td>Û²Û³Û´</td></tr>
          </table>
        </div>
        <div class="col-md-6">
          <h5>ğŸ“Š Ø¢Ù…Ø§Ø± Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§</h5>
          <table class="table table-sm">
            <tr><td>Ú©Ù„ Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§:</td><td>ÛµÛ´Û°</td></tr>
            <tr><td>Ø¯Ø± Ø­Ø§Ù„ Ø§Ù†Ø¬Ø§Ù…:</td><td>Û²Û³Û°</td></tr>
            <tr><td>ØªÚ©Ù…ÛŒÙ„ Ø´Ø¯Ù‡:</td><td>Û±Û¸Ûµ</td></tr>
            <tr><td>Ù…Ù†ØªØ¸Ø± ØªØ§ÛŒÛŒØ¯:</td><td>Û±Û²Ûµ</td></tr>
          </table>
          
          <h5 class="mt-4">ğŸ”§ Ù¾Ø±Ú©Ø§Ø±Ø¨Ø±Ø¯ØªØ±ÛŒÙ† ØªØ®ØµØµâ€ŒÙ‡Ø§</h5>
          <div class="progress mb-2" style="height: 20px;"><div class="progress-bar" style="width: 35%">Ø³Ø§Ø®Øª Ø§Ø³Ú©Ù„Øª ÙÙ„Ø²ÛŒ (Û³ÛµÙª)</div></div>
          <div class="progress mb-2" style="height: 20px;"><div class="progress-bar" style="width: 28%">Ø§Ø¬Ø±Ø§ÛŒ Ø¨ØªÙ† (Û²Û¸Ùª)</div></div>
          <div class="progress mb-2" style="height: 20px;"><div class="progress-bar" style="width: 22%">Ø¬ÙˆØ´Ú©Ø§Ø±ÛŒ (Û²Û²Ùª)</div></div>
          <div class="progress mb-2" style="height: 20px;"><div class="progress-bar" style="width: 15%">Ø³Ø§ÛŒØ± (Û±ÛµÙª)</div></div>
          
          <h5 class="mt-4">ğŸ“ Ù¾Ø±Ú©Ø§Ø±Ø¨Ø±Ø¯ØªØ±ÛŒÙ† Ø¢Ø¯Ø±Ø³â€ŒÙ‡Ø§</h5>
          <ul>
            <li>ØªÙ‡Ø±Ø§Ù† (Û´ÛµÙª)</li>
            <li>Ø§ØµÙÙ‡Ø§Ù† (Û±Û¸Ùª)</li>
            <li>Ø§Ù„Ø¨Ø±Ø² (Û±Û²Ùª)</li>
            <li>Ø®Ø±Ø§Ø³Ø§Ù† Ø±Ø¶ÙˆÛŒ (Û±Û°Ùª)</li>
          </ul>
        </div>
      </div>
      <button class="btn btn-peymanyar mt-3" onclick="adminRefreshStats()">Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø¢Ù…Ø§Ø±</button>
    </div>
  </div>

  <!-- ØªØ¨ 5: ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø³ÛŒØ³ØªÙ… (Ø¹Ù…ÙˆÙ…ÛŒØŒ Ø§Ù…Ù†ÛŒØªÛŒØŒ Ø«Ø¨Øªâ€ŒÙ†Ø§Ù…ØŒ Ø¢Ù¾Ù„ÙˆØ¯ØŒ Ø§ÛŒÙ…ÛŒÙ„ØŒ Ø§Ø¹Ù„Ø§Ù†â€ŒÙ‡Ø§) -->
  <div class="tab-pane fade" id="tab5" role="tabpanel">
    <div class="card-peymanyar">
      <h5>âš™ï¸ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø¹Ù…ÙˆÙ…ÛŒ</h5>
      <div class="row">
        <div class="col-md-6 mb-3">
          <label class="form-label">Ù†Ø§Ù… Ø³Ø§ÛŒØª</label>
          <input type="text" class="form-control" id="siteName" value="Ù¾ÛŒÙ…Ø§Ù†â€ŒÛŒØ§Ø±">
        </div>
        <div class="col-md-6 mb-3">
          <label class="form-label">Ù„ÙˆÚ¯Ùˆ (Ø¢Ø¯Ø±Ø³)</label>
          <input type="text" class="form-control" id="siteLogo" value="/logo.png">
        </div>
        <div class="col-12 mb-3">
          <label class="form-label">ØªÙˆØ¶ÛŒØ­Ø§Øª Ø³Ø§ÛŒØª</label>
          <textarea class="form-control" id="siteDescription" rows="2">Ù¾Ù„ØªÙØ±Ù… Ù‡ÙˆØ´Ù…Ù†Ø¯ Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø±Ø§Ù† Ø³Ø§Ø®ØªÙ…Ø§Ù†ÛŒ</textarea>
        </div>
      </div>
      
      <h5 class="mt-4">ğŸ”’ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø§Ù…Ù†ÛŒØªÛŒ</h5>
      <div class="row">
        <div class="col-md-6 mb-3">
          <label class="form-label">Ù…Ø¯Øª Ù†Ø´Ø³Øª (Ø¯Ù‚ÛŒÙ‚Ù‡)</label>
          <input type="number" class="form-control" id="sessionTimeout" value="30">
        </div>
        <div class="col-md-6 mb-3">
          <label class="form-label">Ù‚ÙÙ„ Ø®ÙˆØ¯Ú©Ø§Ø± Ù¾Ø³ Ø§Ø² (Ø¯Ù‚ÛŒÙ‚Ù‡)</label>
          <input type="number" class="form-control" id="autoLock" value="15">
        </div>
      </div>
      
      <h5 class="mt-4">ğŸ“ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø«Ø¨Øªâ€ŒÙ†Ø§Ù…</h5>
      <div class="mb-3 form-check">
        <input type="checkbox" class="form-check-input" id="allowRegistrations" checked>
        <label class="form-check-label">Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±Ø§Ù† Ø¬Ø¯ÛŒØ¯ ÙØ¹Ø§Ù„ Ø¨Ø§Ø´Ø¯</label>
      </div>
      <div class="mb-3">
        <label class="form-label">Ø­Ø¯Ø§Ú©Ø«Ø± Ø­Ø¬Ù… Ø¢Ù¾Ù„ÙˆØ¯ (Ù…Ú¯Ø§Ø¨Ø§ÛŒØª)</label>
        <input type="number" class="form-control" id="maxUploadSize" value="50">
      </div>
      
      <h5 class="mt-4">ğŸ“§ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø§ÛŒÙ…ÛŒÙ„</h5>
      <div class="row">
        <div class="col-md-6 mb-3">
          <label class="form-label">Ø³Ø±ÙˆØ± SMTP</label>
          <input type="text" class="form-control" id="smtpServer" value="smtp.gmail.com">
        </div>
        <div class="col-md-6 mb-3">
          <label class="form-label">Ù¾ÙˆØ±Øª</label>
          <input type="text" class="form-control" id="smtpPort" value="587">
        </div>
        <div class="col-md-6 mb-3">
          <label class="form-label">Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ</label>
          <input type="text" class="form-control" id="smtpUser" value="noreply@peymanyar.com">
        </div>
        <div class="col-md-6 mb-3">
          <label class="form-label">Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±</label>
          <input type="password" class="form-control" id="smtpPass" value="****">
        </div>
      </div>
      
      <h5 class="mt-4">ğŸ”” ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø§Ø¹Ù„Ø§Ù†â€ŒÙ‡Ø§</h5>
      <div class="mb-3 form-check">
        <input type="checkbox" class="form-check-input" id="emailNotifications" checked>
        <label class="form-check-label">Ø§Ø±Ø³Ø§Ù„ Ø§ÛŒÙ…ÛŒÙ„ Ø¨Ø±Ø§ÛŒ Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ø¬Ø¯ÛŒØ¯</label>
      </div>
      <div class="mb-3 form-check">
        <input type="checkbox" class="form-check-input" id="smsNotifications">
        <label class="form-check-label">Ø§Ø±Ø³Ø§Ù„ Ù¾ÛŒØ§Ù…Ú© Ø¨Ø±Ø§ÛŒ Ø±ÙˆÛŒØ¯Ø§Ø¯Ù‡Ø§ÛŒ Ù…Ù‡Ù…</label>
      </div>
      
      <button class="btn btn-peymanyar mt-3" onclick="adminSaveSettings()">Ø°Ø®ÛŒØ±Ù‡ ØªÙ†Ø¸ÛŒÙ…Ø§Øª</button>
    </div>
  </div>

  <!-- ØªØ¨ 6: Ù…Ø¯ÛŒØ±ÛŒØª Ú©Ø§Ø±Ø¨Ø±Ø§Ù† (Ù„ÛŒØ³Øª Ø¨Ø§ paginationØŒ ÙÛŒÙ„ØªØ±ØŒ ÙˆÛŒØ±Ø§ÛŒØ´ØŒ ØªØºÛŒÛŒØ± Ù†Ù‚Ø´ØŒ ÙØ¹Ø§Ù„/ØºÛŒØ±ÙØ¹Ø§Ù„) -->
  <div class="tab-pane fade" id="tab6" role="tabpanel">
    <div class="card-peymanyar">
      <div class="row mb-3">
        <div class="col-md-4">
          <input type="text" class="form-control" id="userSearch" placeholder="Ø¬Ø³ØªØ¬ÙˆÛŒ Ú©Ø§Ø±Ø¨Ø±Ø§Ù†...">
        </div>
        <div class="col-md-3">
          <select class="form-select" id="userTypeFilter">
            <option value="all">Ù‡Ù…Ù‡ Ú©Ø§Ø±Ø¨Ø±Ø§Ù†</option>
            <option value="employer">Ú©Ø§Ø±ÙØ±Ù…Ø§ÛŒØ§Ù†</option>
            <option value="contractor">Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø±Ø§Ù†</option>
            <option value="admin">Ù…Ø¯ÛŒØ±Ø§Ù†</option>
          </select>
        </div>
        <div class="col-md-3">
          <select class="form-select" id="userStatusFilter">
            <option value="all">Ù‡Ù…Ù‡ ÙˆØ¶Ø¹ÛŒØªâ€ŒÙ‡Ø§</option>
            <option value="active">ÙØ¹Ø§Ù„</option>
            <option value="inactive">ØºÛŒØ±ÙØ¹Ø§Ù„</option>
          </select>
        </div>
        <div class="col-md-2">
          <button class="btn btn-peymanyar w-100" onclick="adminFilterUsers()">Ø¬Ø³ØªØ¬Ùˆ</button>
        </div>
      </div>
      
      <div class="table-responsive">
        <table class="table table-hover">
          <thead>
            <tr>
              <th>Ù†Ø§Ù…</th>
              <th>Ø§ÛŒÙ…ÛŒÙ„</th>
              <th>Ù†ÙˆØ¹ Ú©Ø§Ø±Ø¨Ø±</th>
              <th>ÙˆØ¶Ø¹ÛŒØª</th>
              <th>ØªØ§Ø±ÛŒØ® Ø¹Ø¶ÙˆÛŒØª</th>
              <th>Ø¹Ù…Ù„ÛŒØ§Øª</th>
            </tr>
          </thead>
          <tbody id="usersTableBody">
            <tr>
              <td>Ø¹Ù„ÛŒ Ù…Ø­Ù…Ø¯ÛŒ</td>
              <td>ali@example.com</td>
              <td><span class="badge bg-primary">Ú©Ø§Ø±ÙØ±Ù…Ø§</span></td>
              <td><span class="badge bg-success">ÙØ¹Ø§Ù„</span></td>
              <td>Û±Û´Û°Û²/Û±Û²/Û°Û±</td>
              <td>
                <button class="btn btn-sm btn-info" onclick="adminViewUserDetails(1)">ğŸ‘ï¸</button>
                <button class="btn btn-sm btn-warning" onclick="adminEditUser(1)">âœï¸</button>
                <button class="btn btn-sm btn-danger" onclick="adminToggleUser(1)">ğŸ”’</button>
                <button class="btn btn-sm btn-secondary" onclick="adminMakeAdmin(1)">ğŸ‘‘</button>
              </td>
            </tr>
            <tr>
              <td>Ø´Ø±Ú©Øª Ø³Ø§Ø²Ù‡â€ŒÚ¯Ø³ØªØ±</td>
              <td>info@sazegostar.com</td>
              <td><span class="badge bg-success">Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø±</span></td>
              <td><span class="badge bg-success">ÙØ¹Ø§Ù„</span></td>
              <td>Û±Û´Û°Û²/Û±Û±/Û±Ûµ</td>
              <td>
                <button class="btn btn-sm btn-info" onclick="adminViewUserDetails(2)">ğŸ‘ï¸</button>
                <button class="btn btn-sm btn-warning" onclick="adminEditUser(2)">âœï¸</button>
                <button class="btn btn-sm btn-danger" onclick="adminToggleUser(2)">ğŸ”’</button>
                <button class="btn btn-sm btn-secondary" onclick="adminMakeAdmin(2)">ğŸ‘‘</button>
              </td>
            </tr>
            <tr>
              <td>Ù…Ø¯ÛŒØ± Ø³ÛŒØ³ØªÙ…</td>
              <td>admin@peymanyar.com</td>
              <td><span class="badge bg-danger">Ù…Ø¯ÛŒØ±</span></td>
              <td><span class="badge bg-success">ÙØ¹Ø§Ù„</span></td>
              <td>Û±Û´Û°Û²/Û°Û±/Û°Û±</td>
              <td>
                <button class="btn btn-sm btn-info" onclick="adminViewUserDetails(3)">ğŸ‘ï¸</button>
                <button class="btn btn-sm btn-warning" onclick="adminEditUser(3)">âœï¸</button>
                <button class="btn btn-sm btn-danger" onclick="adminToggleUser(3)">ğŸ”’</button>
                <button class="btn btn-sm btn-secondary" onclick="adminMakeAdmin(3)">ğŸ‘‘</button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      
      <div class="d-flex justify-content-between align-items-center">
        <span>Ù†Ù…Ø§ÛŒØ´ Û± ØªØ§ Û³ Ø§Ø² Û±Ûµ Ù†ØªÛŒØ¬Ù‡</span>
        <nav>
          <ul class="pagination">
            <li class="page-item"><a class="page-link" href="#">Ù‚Ø¨Ù„ÛŒ</a></li>
            <li class="page-item active"><a class="page-link" href="#">Û±</a></li>
            <li class="page-item"><a class="page-link" href="#">Û²</a></li>
            <li class="page-item"><a class="page-link" href="#">Û³</a></li>
            <li class="page-item"><a class="page-link" href="#">Ø¨Ø¹Ø¯ÛŒ</a></li>
          </ul>
        </nav>
      </div>
      
      <!-- Ù…ÙˆØ¯Ø§Ù„ Ø¬Ø²Ø¦ÛŒØ§Øª Ú©Ø§Ø±Ø¨Ø± -->
      <div class="modal fade" id="userDetailsModal" tabindex="-1">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title">Ø¬Ø²Ø¦ÛŒØ§Øª Ú©Ø§Ø±Ø¨Ø±</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body" id="userDetailsContent">
              <!-- Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ú©Ø§Ø±Ø¨Ø± -->
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- ØªØ¨ 7: Ù¾Ø§Ú©Ø³Ø§Ø²ÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡ (Ú©Ø´ØŒ Ù„Ø§Ú¯ØŒ Ù¾ÛŒØ§Ù…ØŒ ÙØ§ÛŒÙ„ Ù…ÙˆÙ‚ØªØŒ Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø¯ÛŒØªØ§Ø¨ÛŒØ³) -->
  <div class="tab-pane fade" id="tab7" role="tabpanel">
    <div class="card-peymanyar">
      <h5>ğŸ§¹ Ù¾Ø§Ú©Ø³Ø§Ø²ÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡</h5>
      
      <div class="row">
        <div class="col-md-6">
          <div class="card mb-3">
            <div class="card-body">
              <h6>Ù¾Ø§Ú©Ø³Ø§Ø²ÛŒ Ú©Ø´</h6>
              <p>Ú©Ø´ Ø³ÛŒØ³ØªÙ… Ø±Ø§ Ù¾Ø§Ú©Ø³Ø§Ø²ÛŒ Ú©Ù†ÛŒØ¯. Ø§ÛŒÙ† Ø¹Ù…Ù„ÛŒØ§Øª Ø¨Ø§Ø¹Ø« Ø§ÙØ²Ø§ÛŒØ´ Ø³Ø±Ø¹Øª Ø³ÛŒØ³ØªÙ… Ù…ÛŒâ€ŒØ´ÙˆØ¯.</p>
              <button class="btn btn-warning" onclick="adminClearCache()">Ù¾Ø§Ú©Ø³Ø§Ø²ÛŒ Ú©Ø´</button>
            </div>
          </div>
        </div>
        <div class="col-md-6">
          <div class="card mb-3">
            <div class="card-body">
              <h6>Ù¾Ø§Ú©Ø³Ø§Ø²ÛŒ Ù„Ø§Ú¯â€ŒÙ‡Ø§ÛŒ Ù‚Ø¯ÛŒÙ…ÛŒ (> Û³Û° Ø±ÙˆØ²)</h6>
              <p>Ù„Ø§Ú¯â€ŒÙ‡Ø§ÛŒ Ù‚Ø¯ÛŒÙ…ÛŒâ€ŒØªØ± Ø§Ø² Û³Û° Ø±ÙˆØ² Ø±Ø§ Ù¾Ø§Ú© Ú©Ù†ÛŒØ¯.</p>
              <button class="btn btn-warning" onclick="adminClearOldLogs()">Ù¾Ø§Ú©Ø³Ø§Ø²ÛŒ Ù„Ø§Ú¯â€ŒÙ‡Ø§</button>
            </div>
          </div>
        </div>
        <div class="col-md-6">
          <div class="card mb-3">
            <div class="card-body">
              <h6>Ù¾Ø§Ú©Ø³Ø§Ø²ÛŒ Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§ÛŒ Ù‚Ø¯ÛŒÙ…ÛŒ</h6>
              <p>Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§ÛŒ Ù‚Ø¯ÛŒÙ…ÛŒâ€ŒØªØ± Ø§Ø² Û¶ Ù…Ø§Ù‡ Ø±Ø§ Ù¾Ø§Ú© Ú©Ù†ÛŒØ¯.</p>
              <button class="btn btn-warning" onclick="adminClearOldMessages()">Ù¾Ø§Ú©Ø³Ø§Ø²ÛŒ Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§</button>
            </div>
          </div>
        </div>
        <div class="col-md-6">
          <div class="card mb-3">
            <div class="card-body">
              <h6>Ù¾Ø§Ú©Ø³Ø§Ø²ÛŒ ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ù…ÙˆÙ‚Øª</h6>
              <p>ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ù…ÙˆÙ‚Øª Ùˆ Ø¢Ù¾Ù„ÙˆØ¯Ù‡Ø§ÛŒ Ù†Ø§ØªÙ…Ø§Ù… Ø±Ø§ Ù¾Ø§Ú© Ú©Ù†ÛŒØ¯.</p>
              <button class="btn btn-warning" onclick="adminClearTempFiles()">Ù¾Ø§Ú©Ø³Ø§Ø²ÛŒ ÙØ§ÛŒÙ„â€ŒÙ‡Ø§</button>
            </div>
          </div>
        </div>
        <div class="col-md-6">
          <div class="card mb-3">
            <div class="card-body">
              <h6>Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø¯ÛŒØªØ§Ø¨ÛŒØ³</h6>
              <p>Ø¯ÛŒØªØ§Ø¨ÛŒØ³ Ø±Ø§ Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ Ú©Ø±Ø¯Ù‡ Ùˆ ÙØ¶Ø§ÛŒ Ø®Ø§Ù„ÛŒ Ø±Ø§ Ø¨Ø§Ø²ÛŒØ§Ø¨ÛŒ Ú©Ù†ÛŒØ¯.</p>
              <button class="btn btn-warning" onclick="adminOptimizeDB()">Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø¯ÛŒØªØ§Ø¨ÛŒØ³</button>
            </div>
          </div>
        </div>
        <div class="col-md-6">
          <div class="card mb-3">
            <div class="card-body">
              <h6 class="text-danger">Ù¾Ø§Ú©Ø³Ø§Ø²ÛŒ Ú©Ø§Ù…Ù„</h6>
              <p class="text-danger">ØªÙ…Ø§Ù… Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ù…ÙˆÙ‚Øª Ùˆ ØºÛŒØ±Ø¶Ø±ÙˆØ±ÛŒ Ø±Ø§ Ù¾Ø§Ú© Ú©Ù†ÛŒØ¯.</p>
              <button class="btn btn-danger" onclick="adminFullCleanup()">Ù¾Ø§Ú©Ø³Ø§Ø²ÛŒ Ú©Ø§Ù…Ù„</button>
            </div>
          </div>
        </div>
      </div>
      
      <div class="mt-4" id="cleanupReport" style="display: none;">
        <div class="alert alert-success">
          <h6>ğŸ“Š Ú¯Ø²Ø§Ø±Ø´ Ù¾Ø§Ú©Ø³Ø§Ø²ÛŒ</h6>
          <div id="cleanupReportContent"></div>
        </div>
      </div>
    </div>
  </div>

  <!-- ØªØ¨ 8: Ù„Ø§Ú¯ Ùˆ Ú¯Ø²Ø§Ø±Ø´â€ŒÙ‡Ø§ (ÙˆØ±ÙˆØ¯ Ú©Ø§Ø±Ø¨Ø±Ø§Ù†ØŒ ÙØ¹Ø§Ù„ÛŒØª Ù…Ø¯ÛŒØ±Ø§Ù†ØŒ Ø®Ø·Ø§Ù‡Ø§ØŒ ØªØºÛŒÛŒØ±Ø§ØªØŒ ÙÛŒÙ„ØªØ±) -->
  <div class="tab-pane fade" id="tab8" role="tabpanel">
    <div class="card-peymanyar">
      <div class="row mb-3">
        <div class="col-md-4">
          <select class="form-select" id="logType">
            <option value="all">Ù‡Ù…Ù‡ Ù„Ø§Ú¯â€ŒÙ‡Ø§</option>
            <option value="login">ÙˆØ±ÙˆØ¯ Ú©Ø§Ø±Ø¨Ø±Ø§Ù†</option>
            <option value="admin">ÙØ¹Ø§Ù„ÛŒØª Ù…Ø¯ÛŒØ±Ø§Ù†</option>
            <option value="error">Ø®Ø·Ø§Ù‡Ø§ÛŒ Ø³ÛŒØ³ØªÙ…</option>
            <option value="change">ØªØºÛŒÛŒØ±Ø§Øª Ù…Ù‡Ù…</option>
          </select>
        </div>
        <div class="col-md-3">
          <input type="date" class="form-control" id="logDateFrom" placeholder="Ø§Ø² ØªØ§Ø±ÛŒØ®">
        </div>
        <div class="col-md-3">
          <input type="date" class="form-control" id="logDateTo" placeholder="ØªØ§ ØªØ§Ø±ÛŒØ®">
        </div>
        <div class="col-md-2">
          <button class="btn btn-peymanyar w-100" onclick="adminFilterLogs()">ÙÛŒÙ„ØªØ±</button>
        </div>
      </div>
      
      <div class="log-container" style="max-height: 400px; overflow-y: auto;">
        <div class="log-entry mb-2 p-2 border-bottom">
          <span class="badge bg-info">ÙˆØ±ÙˆØ¯ Ú©Ø§Ø±Ø¨Ø±</span>
          <span class="ms-2">Û±Û´Û°Û³/Û±Û²/Û°Û¶ Û±Û´:Û³Û°:Û²Ûµ - Ø¹Ù„ÛŒ Ù…Ø­Ù…Ø¯ÛŒ (Ú©Ø§Ø±ÙØ±Ù…Ø§) ÙˆØ§Ø±Ø¯ Ø´Ø¯</span>
        </div>
        <div class="log-entry mb-2 p-2 border-bottom">
          <span class="badge bg-success">ÙØ¹Ø§Ù„ÛŒØª Ù…Ø¯ÛŒØ±</span>
          <span class="ms-2">Û±Û´Û°Û³/Û±Û²/Û°Û¶ Û±Û´:Û²Ûµ:Û±Û° - Ù…Ø¯ÛŒØ± ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø±Ø§ ØªØºÛŒÛŒØ± Ø¯Ø§Ø¯</span>
        </div>
        <div class="log-entry mb-2 p-2 border-bottom">
          <span class="badge bg-warning">Ø®Ø·Ø§</span>
          <span class="ms-2">Û±Û´Û°Û³/Û±Û²/Û°Û¶ Û±Û³:Û±Ûµ:Û³Û° - Ø®Ø·Ø§ Ø¯Ø± Ø§ØªØµØ§Ù„ Ø¨Ù‡ Ø¯ÛŒØªØ§Ø¨ÛŒØ³</span>
        </div>
        <div class="log-entry mb-2 p-2 border-bottom">
          <span class="badge bg-danger">ØªØºÛŒÛŒØ± Ù…Ù‡Ù…</span>
          <span class="ms-2">Û±Û´Û°Û³/Û±Û²/Û°Û¶ Û±Û²:Û°Ûµ:Û´Ûµ - Ú©Ø§Ø±Ø¨Ø± Ø§Ø­Ù…Ø¯ Ø±Ø¶Ø§ÛŒÛŒ Ø¨Ù‡ Ù…Ø¯ÛŒØ± Ø§Ø±ØªÙ‚Ø§ ÛŒØ§ÙØª</span>
        </div>
        <div class="log-entry mb-2 p-2 border-bottom">
          <span class="badge bg-info">ÙˆØ±ÙˆØ¯ Ú©Ø§Ø±Ø¨Ø±</span>
          <span class="ms-2">Û±Û´Û°Û³/Û±Û²/Û°Û¶ Û±Û±:Û²Û°:Û±Ûµ - Ù…Ø¯ÛŒØ± Ø³ÛŒØ³ØªÙ… ÙˆØ§Ø±Ø¯ Ø´Ø¯</span>
        </div>
        <div class="log-entry mb-2 p-2 border-bottom">
          <span class="badge bg-success">ÙØ¹Ø§Ù„ÛŒØª Ù…Ø¯ÛŒØ±</span>
          <span class="ms-2">Û±Û´Û°Û³/Û±Û²/Û°Û¶ Û±Û°:Û°Û°:Û°Û° - Ù¾Ø±ÙˆÚ˜Ù‡ Ø¬Ø¯ÛŒØ¯ ØªØ§ÛŒÛŒØ¯ Ø´Ø¯</span>
        </div>
        <div class="log-entry mb-2 p-2 border-bottom">
          <span class="badge bg-success">ÙØ¹Ø§Ù„ÛŒØª Ù…Ø¯ÛŒØ±</span>
          <span class="ms-2">Û±Û´Û°Û³/Û±Û²/Û°Ûµ Û±Û¶:Û´Û°:Û²Û° - Ú©Ø§Ø±Ø¨Ø± Ø¬Ø¯ÛŒØ¯ ØºÛŒØ±ÙØ¹Ø§Ù„ Ø´Ø¯</span>
        </div>
        <div class="log-entry mb-2 p-2 border-bottom">
          <span class="badge bg-warning">Ø®Ø·Ø§</span>
          <span class="ms-2">Û±Û´Û°Û³/Û±Û²/Û°Ûµ Û±Ûµ:Û±Û°:Û³Ûµ - ØªÙ„Ø§Ø´ Ù†Ø§Ù…ÙˆÙÙ‚ Ø¨Ø±Ø§ÛŒ ÙˆØ±ÙˆØ¯ (IP: 192.168.1.1)</span>
        </div>
      </div>
      
      <div class="mt-3">
        <button class="btn btn-peymanyar" onclick="adminExportLogs()">Ø®Ø±ÙˆØ¬ÛŒ Ù„Ø§Ú¯â€ŒÙ‡Ø§</button>
        <button class="btn btn-outline-secondary" onclick="adminRefreshLogs()">Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ</button>
      </div>
    </div>
  </div>

  <!-- ØªØ¨ 9: Ù…Ø¯ÛŒØ±ÛŒØª Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§ (Ù‡Ù…ÙˆÙ† Ú†ÛŒØ²ÛŒ Ú©Ù‡ ØªÙˆ Ú©Ø¯ Ø§ØµÙ„ÛŒ Ø¨ÙˆØ¯) -->
  <div class="tab-pane fade" id="tab9" role="tabpanel">
    <div class="card-peymanyar">
      <div class="row mb-4">
        <div class="col-md-4">
          <div class="card-peymanyar text-center p-3">
            <h3 id="statPending">0</h3>
            <p>Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø± ØªØ§ÛŒÛŒØ¯</p>
          </div>
        </div>
        <div class="col-md-4">
          <div class="card-peymanyar text-center p-3">
            <h3 id="statApproved">0</h3>
            <p>ØªØ§ÛŒÛŒØ¯ Ø´Ø¯Ù‡</p>
          </div>
        </div>
        <div class="col-md-4">
          <div class="card-peymanyar text-center p-3">
            <h3 id="statTotal">0</h3>
            <p>Ú©Ù„ Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§</p>
          </div>
        </div>
      </div>
      
      <div class="row mb-3">
        <div class="col-md-8">
          <input type="text" class="form-control" id="projectSearchAdmin" placeholder="Ø¬Ø³ØªØ¬ÙˆÛŒ Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§...">
        </div>
        <div class="col-md-4">
          <select class="form-select" id="projectFilterAdmin">
            <option value="pending">Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø± ØªØ§ÛŒÛŒØ¯</option>
            <option value="all">Ù‡Ù…Ù‡ Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§</option>
          </select>
        </div>
      </div>
      
      <div id="projectsAdminList" class="row">
        <!-- Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§ Ø§ÛŒÙ†Ø¬Ø§ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯ -->
      </div>
    </div>
  </div>
</div>

<!-- Ø¨Ø®Ø´ Ù†Ù…Ø§ÛŒØ´ Ù†ØªØ§ÛŒØ¬/Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§ -->
<div id="adminMessagesResult" class="mt-4"></div>
<div id="adminMessagesLoading" class="messages-loading">
  <div class="messages-spinner"></div>
  <p>Ø¯Ø± Ø­Ø§Ù„ Ù¾Ø±Ø¯Ø§Ø²Ø´...</p>
</div>
</div>
</div>

<!-- ØµÙØ­Ù‡ Ù¾Ø±ÙˆÙØ§ÛŒÙ„ Ú©Ø§Ø±Ø¨Ø±ÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡ -->
<div id="profile" class="page-section" role="main" aria-label="ØµÙØ­Ù‡ Ù¾Ø±ÙˆÙØ§ÛŒÙ„">
<div class="container page-header">
<div style="max-width: 1000px; margin: 0 auto;">
  
  <!-- Ù‡Ø¯Ø± Ù¾Ø±ÙˆÙØ§ÛŒÙ„ Ø¨Ø§ Ø¯Ú©Ù…Ù‡ Ø®Ø±ÙˆØ¬ -->
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2 class="section-title" style="margin-bottom: 0;">ğŸ‘¤ Ù¾Ø±ÙˆÙØ§ÛŒÙ„ Ú©Ø§Ø±Ø¨Ø±ÛŒ</h2>
    <div>
      <button class="btn btn-primary me-2" onclick="enableProfileEdit()">
        <i class="bi bi-pencil me-2"></i>ÙˆÛŒØ±Ø§ÛŒØ´ Ù¾Ø±ÙˆÙØ§ÛŒÙ„
      </button>
      <button class="btn btn-danger" onclick="logout()">
        <i class="bi bi-box-arrow-right me-2"></i>Ø®Ø±ÙˆØ¬
      </button>
    </div>
  </div>

  <!-- Ú©Ø§Ø±Øª Ø§ØµÙ„ÛŒ Ù¾Ø±ÙˆÙØ§ÛŒÙ„ -->
  <div class="card-peymanyar">
    
    <!-- ======== Ø­Ø§Ù„Øª Ù†Ù…Ø§ÛŒØ´ ======== -->
    <div id="profileViewMode">
      
      <!-- Ø¢ÙˆØ§ØªØ§Ø± Ùˆ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù¾Ø§ÛŒÙ‡ -->
      <div class="text-center mb-4">
        <div class="user-avatar" id="profileAvatar">?</div>
        <h3 class="mt-3" id="profileDisplayName">Ú©Ø§Ø±Ø¨Ø±</h3>
        <p class="text-muted" id="profileDisplayEmail">Ø§ÛŒÙ…ÛŒÙ„</p>
        <div id="profileVerificationBadge"></div>
      </div>

      <!-- Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù¾Ø§ÛŒÙ‡ -->
      <div class="row mt-4">
        <div class="col-12">
          <h5 class="border-bottom pb-2 mb-3">
            <i class="bi bi-person-badge me-2"></i>Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù¾Ø§ÛŒÙ‡
          </h5>
        </div>
        <div class="col-md-6 mb-3">
          <div class="border rounded p-3">
            <small class="text-muted d-block">Ù†ÙˆØ¹ Ø­Ø³Ø§Ø¨</small>
            <strong id="profileDisplayType">-</strong>
          </div>
        </div>
        <div class="col-md-6 mb-3">
          <div class="border rounded p-3">
            <small class="text-muted d-block">Ù†ÙˆØ¹ Ø´Ø®ØµÛŒØª</small>
            <strong id="profileDisplayAccountType">-</strong>
          </div>
        </div>
        <div class="col-md-6 mb-3">
          <div class="border rounded p-3">
            <small class="text-muted d-block">Ù†Ø§Ù… Ùˆ Ù†Ø§Ù… Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ / Ù†Ø§Ù… Ø´Ø±Ú©Øª</small>
            <strong id="profileDisplayFullName">-</strong>
          </div>
        </div>
        <div class="col-md-6 mb-3">
          <div class="border rounded p-3">
            <small class="text-muted d-block">Ú©Ø¯ Ù…Ù„ÛŒ / Ø´Ù†Ø§Ø³Ù‡ Ù…Ù„ÛŒ</small>
            <strong id="profileDisplayNationalId">-</strong>
          </div>
        </div>
      </div>

      <!-- Ø§Ø·Ù„Ø§Ø¹Ø§Øª ØªÙ…Ø§Ø³ -->
      <div class="row mt-3">
        <div class="col-12">
          <h5 class="border-bottom pb-2 mb-3">
            <i class="bi bi-telephone me-2"></i>Ø§Ø·Ù„Ø§Ø¹Ø§Øª ØªÙ…Ø§Ø³
          </h5>
        </div>
        <div class="col-md-6 mb-3">
          <div class="border rounded p-3">
            <small class="text-muted d-block">ØªÙ„ÙÙ† Ù‡Ù…Ø±Ø§Ù‡</small>
            <strong id="profileDisplayMobile">-</strong>
          </div>
        </div>
        <div class="col-md-6 mb-3">
          <div class="border rounded p-3">
            <small class="text-muted d-block">ØªÙ„ÙÙ† Ø«Ø§Ø¨Øª</small>
            <strong id="profileDisplayPhone">-</strong>
          </div>
        </div>
        <div class="col-12 mb-3">
          <div class="border rounded p-3">
            <small class="text-muted d-block">Ø¢Ø¯Ø±Ø³</small>
            <strong id="profileDisplayAddress">-</strong>
          </div>
        </div>
      </div>

      <!-- Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø´Ø±Ú©Øª (Ø¨Ø±Ø§ÛŒ Ø´Ø®Øµ Ø­Ù‚ÙˆÙ‚ÛŒ) -->
      <div id="profileCompanyFields" style="display: none;">
        <div class="row mt-3">
          <div class="col-12">
            <h5 class="border-bottom pb-2 mb-3">
              <i class="bi bi-building me-2"></i>Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø´Ø±Ú©Øª
            </h5>
          </div>
          <div class="col-md-6 mb-3">
            <div class="border rounded p-3">
              <small class="text-muted d-block">Ù†Ø§Ù… Ø´Ø±Ú©Øª</small>
              <strong id="profileDisplayCompanyName">-</strong>
            </div>
          </div>
          <div class="col-md-6 mb-3">
            <div class="border rounded p-3">
              <small class="text-muted d-block">Ø´Ù…Ø§Ø±Ù‡ Ø«Ø¨Øª</small>
              <strong id="profileDisplayRegistrationNo">-</strong>
            </div>
          </div>
          <div class="col-md-6 mb-3">
            <div class="border rounded p-3">
              <small class="text-muted d-block">Ù†ÙˆØ¹ ÙØ¹Ø§Ù„ÛŒØª</small>
              <strong id="profileDisplayCompanyType">-</strong>
            </div>
          </div>
          <div class="col-md-6 mb-3">
            <div class="border rounded p-3">
              <small class="text-muted d-block">ÙˆØ¨Ø³Ø§ÛŒØª</small>
              <strong id="profileDisplayWebsite">-</strong>
            </div>
          </div>
          <div class="col-12 mb-3">
            <div class="border rounded p-3">
              <small class="text-muted d-block">ØªÙˆØ¶ÛŒØ­Ø§Øª Ø´Ø±Ú©Øª</small>
              <strong id="profileDisplayCompanyDesc">-</strong>
            </div>
          </div>
        </div>
      </div>

      <!-- Ø§Ø·Ù„Ø§Ø¹Ø§Øª ØªØ®ØµØµÛŒ (ÙÙ‚Ø· Ø¨Ø±Ø§ÛŒ Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø±Ø§Ù†) -->
      <div id="contractorProfileFields" style="display: none;">
        <div class="row mt-3">
          <div class="col-12">
            <h5 class="border-bottom pb-2 mb-3">
              <i class="bi bi-tools me-2"></i>Ø§Ø·Ù„Ø§Ø¹Ø§Øª ØªØ®ØµØµÛŒ
            </h5>
          </div>
          <div class="col-md-6 mb-3">
            <div class="border rounded p-3">
              <small class="text-muted d-block">ØªØ®ØµØµ Ø§ØµÙ„ÛŒ</small>
              <strong id="profileDisplayMainExpertise">-</strong>
            </div>
          </div>
          <div class="col-md-6 mb-3">
            <div class="border rounded p-3">
              <small class="text-muted d-block">Ø³Ø§Ù„ Ø´Ø±ÙˆØ¹ ÙØ¹Ø§Ù„ÛŒØª</small>
              <strong id="profileDisplayStartYear">-</strong>
            </div>
          </div>
          <div class="col-md-6 mb-3">
            <div class="border rounded p-3">
              <small class="text-muted d-block">ØªØ¹Ø¯Ø§Ø¯ Ù†ÛŒØ±ÙˆÛŒ Ø§Ù†Ø³Ø§Ù†ÛŒ</small>
              <strong id="profileDisplayTeamSize">-</strong>
            </div>
          </div>
          <div class="col-md-6 mb-3">
            <div class="border rounded p-3">
              <small class="text-muted d-block">Ù…Ø­Ø¯ÙˆØ¯Ù‡ Ø¬ØºØ±Ø§ÙÛŒØ§ÛŒÛŒ</small>
              <strong id="profileDisplayWorkArea">-</strong>
            </div>
          </div>
          <div class="col-md-6 mb-3">
            <div class="border rounded p-3">
              <small class="text-muted d-block">Ø±ÙˆØ´ ØªØ±Ø¬ÛŒØ­ÛŒ Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯</small>
              <strong id="profileDisplayContractMethod">-</strong>
            </div>
          </div>
          <div class="col-md-6 mb-3">
            <div class="border rounded p-3">
              <small class="text-muted d-block">Ø¨ÛŒÙ…Ù‡ Ù…Ø³Ø¦ÙˆÙ„ÛŒØª</small>
              <strong id="profileDisplayInsurance">-</strong>
            </div>
          </div>
          <div class="col-12 mb-3">
            <div class="border rounded p-3">
              <small class="text-muted d-block">ØªØ¬Ù‡ÛŒØ²Ø§Øª Ùˆ Ù…Ø§Ø´ÛŒÙ†â€ŒØ¢Ù„Ø§Øª</small>
              <strong id="profileDisplayEquipment">-</strong>
            </div>
          </div>
        </div>

        <!-- Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§ÛŒ Ù†Ù…ÙˆÙ†Ù‡ -->
        <div class="row mt-4">
          <div class="col-12">
            <h6 class="border-bottom pb-2 mb-3">
              <i class="bi bi-images me-2"></i>Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§ÛŒ Ù†Ù…ÙˆÙ†Ù‡
            </h6>
            <div id="profileDisplayProjects" class="row"></div>
          </div>
        </div>

        <!-- Ù…Ø¯Ø§Ø±Ú© Ùˆ Ú¯ÙˆØ§Ù‡ÛŒÙ†Ø§Ù…Ù‡â€ŒÙ‡Ø§ -->
        <div class="row mt-4">
          <div class="col-12">
            <h6 class="border-bottom pb-2 mb-3">
              <i class="bi bi-file-earmark-text me-2"></i>Ù…Ø¯Ø§Ø±Ú© Ùˆ Ú¯ÙˆØ§Ù‡ÛŒÙ†Ø§Ù…Ù‡â€ŒÙ‡Ø§
            </h6>
            <div id="profileDisplayDocuments" class="d-flex flex-wrap gap-2"></div>
          </div>
        </div>
      </div>

      <!-- ÙˆØ¶Ø¹ÛŒØª ØªØ£ÛŒÛŒØ¯ (Ø¨Ø±Ø§ÛŒ Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø±Ø§Ù†) -->
      <div id="profileVerificationStatus" class="mt-4 p-3 bg-light rounded" style="display: none;">
        <div class="d-flex align-items-center">
          <i class="bi bi-shield-check fs-4 me-3"></i>
          <div>
            <strong>ÙˆØ¶Ø¹ÛŒØª ØªØ£ÛŒÛŒØ¯:</strong>
            <span id="profileVerificationText">Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø± Ø¨Ø±Ø±Ø³ÛŒ</span>
          </div>
        </div>
      </div>
    </div>

    <!-- ======== Ø­Ø§Ù„Øª ÙˆÛŒØ±Ø§ÛŒØ´ ======== -->
    <div id="profileEditMode" style="display: none;">
      <form id="profileEditForm">
        
        <!-- Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù¾Ø§ÛŒÙ‡ -->
        <div class="row">
          <div class="col-12">
            <h5 class="border-bottom pb-2 mb-3">
              <i class="bi bi-person-badge me-2"></i>Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù¾Ø§ÛŒÙ‡
            </h5>
          </div>
          <div class="col-md-6 mb-3">
            <label class="form-label">Ù†Ø§Ù… Ùˆ Ù†Ø§Ù… Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ</label>
            <input type="text" class="form-control" id="editFullName">
          </div>
          <div class="col-md-6 mb-3">
            <label class="form-label">Ú©Ø¯ Ù…Ù„ÛŒ / Ø´Ù†Ø§Ø³Ù‡ Ù…Ù„ÛŒ</label>
            <input type="text" class="form-control" id="editNationalId">
          </div>
          <div class="col-md-6 mb-3">
            <label class="form-label">Ø§ÛŒÙ…ÛŒÙ„</label>
            <input type="email" class="form-control" id="editEmail" readonly disabled>
            <small class="text-muted">Ø§ÛŒÙ…ÛŒÙ„ Ù‚Ø§Ø¨Ù„ ØªØºÛŒÛŒØ± Ù†ÛŒØ³Øª</small>
          </div>
          <div class="col-md-6 mb-3">
            <label class="form-label">ØªØ§Ø±ÛŒØ® ØªÙˆÙ„Ø¯ / ØªØ£Ø³ÛŒØ³</label>
            <input type="text" class="form-control" id="editBirthDate" placeholder="Ù…Ø«Ø§Ù„: 1360/01/01">
          </div>
        </div>

        <!-- Ø§Ø·Ù„Ø§Ø¹Ø§Øª ØªÙ…Ø§Ø³ -->
        <div class="row mt-3">
          <div class="col-12">
            <h5 class="border-bottom pb-2 mb-3">
              <i class="bi bi-telephone me-2"></i>Ø§Ø·Ù„Ø§Ø¹Ø§Øª ØªÙ…Ø§Ø³
            </h5>
          </div>
          <div class="col-md-6 mb-3">
            <label class="form-label">ØªÙ„ÙÙ† Ù‡Ù…Ø±Ø§Ù‡</label>
            <input type="tel" class="form-control" id="editMobile" pattern="09[0-9]{9}">
          </div>
          <div class="col-md-6 mb-3">
            <label class="form-label">ØªÙ„ÙÙ† Ø«Ø§Ø¨Øª</label>
            <input type="tel" class="form-control" id="editPhone">
          </div>
          <div class="col-12 mb-3">
            <label class="form-label">Ø¢Ø¯Ø±Ø³</label>
            <textarea class="form-control" id="editAddress" rows="3"></textarea>
          </div>
          <div class="col-md-6 mb-3">
            <label class="form-label">Ú©Ø¯Ù¾Ø³ØªÛŒ</label>
            <input type="text" class="form-control" id="editPostalCode">
          </div>
          <div class="col-md-6 mb-3">
            <label class="form-label">Ø§Ø³ØªØ§Ù†</label>
           <input type="text" class="form-control" id="editProvince" placeholder="Ù…Ø«Ø§Ù„: ØªÙ‡Ø±Ø§Ù†">
          </div>
          <div class="col-md-6 mb-3">
            <label class="form-label">Ø´Ù‡Ø±</label>
            <input type="text" class="form-control" id="editCity">
          </div>
        </div>

        <!-- Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø´Ø±Ú©Øª (Ø¨Ø±Ø§ÛŒ Ø´Ø®Øµ Ø­Ù‚ÙˆÙ‚ÛŒ) -->
        <div id="editCompanyFields" class="row mt-3" style="display: none;">
          <div class="col-12">
            <h5 class="border-bottom pb-2 mb-3">
              <i class="bi bi-building me-2"></i>Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø´Ø±Ú©Øª
            </h5>
          </div>
          <div class="col-md-6 mb-3">
            <label class="form-label">Ù†Ø§Ù… Ø´Ø±Ú©Øª</label>
            <input type="text" class="form-control" id="editCompanyName">
          </div>
          <div class="col-md-6 mb-3">
            <label class="form-label">Ø´Ù…Ø§Ø±Ù‡ Ø«Ø¨Øª</label>
            <input type="text" class="form-control" id="editRegistrationNo">
          </div>
          <div class="col-md-6 mb-3">
            <label class="form-label">Ù†ÙˆØ¹ ÙØ¹Ø§Ù„ÛŒØª</label>
            <select class="form-select" id="editCompanyType">
              <option value="">Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</option>
              <option value="building_contracting">Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø±ÛŒ Ø³Ø§Ø®ØªÙ…Ø§Ù†</option>
              <option value="road_transportation">Ø±Ø§Ù‡ Ùˆ ØªØ±Ø§Ø¨Ø±ÛŒ</option>
              <option value="water_sewage">Ø¢Ø¨ Ùˆ ÙØ§Ø¶Ù„Ø§Ø¨</option>
              <option value="oil_gas">Ù†ÙØª Ùˆ Ú¯Ø§Ø²</option>
              <option value="industrial">ØµÙ†Ø¹ØªÛŒ</option>
              <option value="investment">Ø³Ø±Ù…Ø§ÛŒÙ‡â€ŒÚ¯Ø°Ø§Ø±ÛŒ</option>
            </select>
          </div>
          <div class="col-md-6 mb-3">
            <label class="form-label">ÙˆØ¨Ø³Ø§ÛŒØª</label>
            <input type="url" class="form-control" id="editWebsite">
          </div>
          <div class="col-12 mb-3">
            <label class="form-label">ØªÙˆØ¶ÛŒØ­Ø§Øª Ø´Ø±Ú©Øª</label>
            <textarea class="form-control" id="editCompanyDesc" rows="3"></textarea>
          </div>
        </div>

        <!-- Ø§Ø·Ù„Ø§Ø¹Ø§Øª ØªØ®ØµØµÛŒ (Ø¨Ø±Ø§ÛŒ Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø±Ø§Ù†) -->
        <div id="editContractorFields" class="row mt-3" style="display: none;">
          <div class="col-12">
            <h5 class="border-bottom pb-2 mb-3">
              <i class="bi bi-tools me-2"></i>Ø§Ø·Ù„Ø§Ø¹Ø§Øª ØªØ®ØµØµÛŒ
            </h5>
          </div>
          <div class="col-md-6 mb-3">
            <label class="form-label">ØªØ®ØµØµ Ø§ØµÙ„ÛŒ</label>
            <select class="form-select" id="editMainExpertise">
              <option value="">-- Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯ --</option>
              <option value="steel_fabrication">Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø± Ø³Ø§Ø®Øª Ø§Ø³Ú©Ù„Øª ÙÙ„Ø²ÛŒ</option>
              <option value="steel_installation">Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø± Ù†ØµØ¨ Ø§Ø³Ú©Ù„Øª ÙÙ„Ø²ÛŒ</option>
              <option value="formwork">Ø§Ú©ÛŒÙ¾ Ù‚Ø§Ù„Ø¨â€ŒØ¨Ù†Ø¯ÛŒ</option>
              <option value="rebar">Ø§Ú©ÛŒÙ¾ Ø¢Ø±Ù…Ø§ØªÙˆØ±Ø¨Ù†Ø¯ÛŒ</option>
              <option value="concrete_execution">Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø± Ø§Ø¬Ø±Ø§ÛŒ Ø¨ØªÙ†</option>
              <option value="grouting">Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø± Ú¯Ø±ÙˆØªâ€ŒØ±ÛŒØ²ÛŒ</option>
              <option value="welding">Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø± Ø¬ÙˆØ´Ú©Ø§Ø±ÛŒ Ø³Ø§Ø²Ù‡</option>
              <option value="coating">Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø± Ø±Ù†Ú¯ Ùˆ Ù¾ÙˆØ´Ø´ ØµÙ†Ø¹ØªÛŒ</option>
              <option value="excavation">Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø± Ø®Ø§Ú©Ø¨Ø±Ø¯Ø§Ø±ÛŒ</option>
              <option value="foundation">Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø± ÙÙˆÙ†Ø¯Ø§Ø³ÛŒÙˆÙ†</option>
              <option value="site_development">Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø± Ù…Ø­ÙˆØ·Ù‡â€ŒØ³Ø§Ø²ÛŒ</option>
              <option value="special_structures">Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø± Ø³Ø§Ø²Ù‡â€ŒÙ‡Ø§ÛŒ Ø®Ø§Øµ</option>
            </select>
          </div>
          <div class="col-md-6 mb-3">
            <label class="form-label">Ø³Ø§Ù„ Ø´Ø±ÙˆØ¹ ÙØ¹Ø§Ù„ÛŒØª</label>
            <select class="form-select" id="editStartYear"></select>
          </div>
          <div class="col-md-6 mb-3">
            <label class="form-label">ØªØ¹Ø¯Ø§Ø¯ Ù†ÛŒØ±ÙˆÛŒ Ø§Ù†Ø³Ø§Ù†ÛŒ Ø«Ø§Ø¨Øª</label>
            <input type="number" class="form-control" id="editTeamSize" min="0">
          </div>
          <div class="col-md-6 mb-3">
            <label class="form-label">Ø±ÙˆØ´ ØªØ±Ø¬ÛŒØ­ÛŒ Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯</label>
            <select class="form-select" id="editContractMethod">
              <option value="">Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</option>
              <option value="kiloyi">Ú©ÛŒÙ„ÙˆÛŒÛŒ</option>
              <option value="fixed">Ù…Ù‚Ø·ÙˆØ¹</option>
              <option value="per_meter">Ù…ØªØ±Ù…Ø±Ø¨Ø¹/Ù…ØªØ±Ø·ÙˆÙ„</option>
              <option value="percentage">Ø¯Ø±ØµØ¯ÛŒ</option>
              <option value="hybrid">ØªØ±Ú©ÛŒØ¨ÛŒ</option>
            </select>
          </div>
          <div class="col-md-6 mb-3">
            <label class="form-label">Ø¨ÛŒÙ…Ù‡ Ù…Ø³Ø¦ÙˆÙ„ÛŒØª</label>
            <select class="form-select" id="editInsurance">
              <option value="">Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</option>
              <option value="yes">Ø¯Ø§Ø±Ù…</option>
              <option value="no">Ù†Ø¯Ø§Ø±Ù…</option>
            </select>
          </div>
          <div id="editInsuranceExpiryField" class="col-md-6 mb-3" style="display: none;">
            <label class="form-label">ØªØ§Ø±ÛŒØ® Ø§Ù†Ù‚Ø¶Ø§ Ø¨ÛŒÙ…Ù‡</label>
            <input type="date" class="form-control" id="editInsuranceExpiry">
          </div>
          <div class="col-12 mb-3">
            <label class="form-label">ØªØ¬Ù‡ÛŒØ²Ø§Øª Ùˆ Ù…Ø§Ø´ÛŒÙ†â€ŒØ¢Ù„Ø§Øª</label>
            <textarea class="form-control" id="editEquipment" rows="3" placeholder="Ø¯Ø³ØªÚ¯Ø§Ù‡ Ø¬ÙˆØ´ØŒ Ø¬Ø±Ø«Ù‚ÛŒÙ„ØŒ ..."></textarea>
          </div>
          <div class="col-12 mb-3">
            <label class="form-label">Ù…Ø­Ø¯ÙˆØ¯Ù‡ Ø¬ØºØ±Ø§ÙÛŒØ§ÛŒÛŒ ÙØ¹Ø§Ù„ÛŒØª</label>
            <select class="form-select" id="editWorkArea" multiple style="height: 150px;">
              <optgroup label="Ù…Ù†Ø§Ø·Ù‚ Ù…Ø±Ú©Ø²ÛŒ">
                <option value="tehran">ØªÙ‡Ø±Ø§Ù†</option>
                <option value="alborz">Ø§Ù„Ø¨Ø±Ø²</option>
                <option value="qom">Ù‚Ù…</option>
                <option value="markazi">Ù…Ø±Ú©Ø²ÛŒ</option>
                <option value="esfahan">Ø§ØµÙÙ‡Ø§Ù†</option>
                <option value="yazd">ÛŒØ²Ø¯</option>
              </optgroup>
              <optgroup label="Ù…Ù†Ø§Ø·Ù‚ Ø´Ù…Ø§Ù„ÛŒ">
                <option value="gilan">Ú¯ÛŒÙ„Ø§Ù†</option>
                <option value="mazandaran">Ù…Ø§Ø²Ù†Ø¯Ø±Ø§Ù†</option>
                <option value="golestan">Ú¯Ù„Ø³ØªØ§Ù†</option>
              </optgroup>
              <optgroup label="Ù…Ù†Ø§Ø·Ù‚ Ø¬Ù†ÙˆØ¨ÛŒ">
                <option value="khuzestan">Ø®ÙˆØ²Ø³ØªØ§Ù†</option>
                <option value="fars">ÙØ§Ø±Ø³</option>
                <option value="hormozgan">Ù‡Ø±Ù…Ø²Ú¯Ø§Ù†</option>
                <option value="bushehr">Ø¨ÙˆØ´Ù‡Ø±</option>
              </optgroup>
              <optgroup label="Ù…Ù†Ø§Ø·Ù‚ Ø´Ø±Ù‚ÛŒ">
                <option value="kerman">Ú©Ø±Ù…Ø§Ù†</option>
                <option value="razavi-khorasan">Ø®Ø±Ø§Ø³Ø§Ù† Ø±Ø¶ÙˆÛŒ</option>
                <option value="south-khorasan">Ø®Ø±Ø§Ø³Ø§Ù† Ø¬Ù†ÙˆØ¨ÛŒ</option>
              </optgroup>
              <optgroup label="Ù…Ù†Ø§Ø·Ù‚ ØºØ±Ø¨ÛŒ">
                <option value="kermanshah">Ú©Ø±Ù…Ø§Ù†Ø´Ø§Ù‡</option>
                <option value="kurdistan">Ú©Ø±Ø¯Ø³ØªØ§Ù†</option>
                <option value="lorestan">Ù„Ø±Ø³ØªØ§Ù†</option>
              </optgroup>
            </select>
            <small class="text-muted">Ctrl Ø±Ø§ Ù†Ú¯Ù‡ Ø¯Ø§Ø±ÛŒØ¯ Ø¨Ø±Ø§ÛŒ Ø§Ù†ØªØ®Ø§Ø¨ Ú†Ù†Ø¯ Ú¯Ø²ÛŒÙ†Ù‡</small>
          </div>
        </div>

        <!-- Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§ÛŒ Ù†Ù…ÙˆÙ†Ù‡ (Ø¨Ø±Ø§ÛŒ Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø±Ø§Ù†) -->
        <div id="editProjectsSection" class="row mt-4" style="display: none;">
          <div class="col-12">
            <h6 class="border-bottom pb-2 mb-3">
              <i class="bi bi-images me-2"></i>Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§ÛŒ Ù†Ù…ÙˆÙ†Ù‡
            </h6>
            <div id="editProjectsContainer"></div>
            <button type="button" class="btn btn-sm btn-outline-primary mt-2" onclick="addProjectToEdit()">
              <i class="bi bi-plus-circle me-1"></i>Ø§ÙØ²ÙˆØ¯Ù† Ù¾Ø±ÙˆÚ˜Ù‡ Ø¬Ø¯ÛŒØ¯
            </button>
          </div>
        </div>

        <!-- Ù…Ø¯Ø§Ø±Ú© (Ø¨Ø±Ø§ÛŒ Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø±Ø§Ù†) -->
        <div id="editDocumentsSection" class="row mt-4" style="display: none;">
          <div class="col-12">
            <h6 class="border-bottom pb-2 mb-3">
              <i class="bi bi-file-earmark-text me-2"></i>Ù…Ø¯Ø§Ø±Ú© Ùˆ Ú¯ÙˆØ§Ù‡ÛŒÙ†Ø§Ù…Ù‡â€ŒÙ‡Ø§
            </h6>
            <div class="upload-box" id="docUploadAreaEdit">
              <i class="bi bi-cloud-arrow-up" style="font-size: 2rem;"></i>
              <p>ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ø¬Ø¯ÛŒØ¯ Ø±Ø§ Ø§ÛŒÙ†Ø¬Ø§ Ø±Ù‡Ø§ Ú©Ù†ÛŒØ¯ ÛŒØ§ Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯</p>
              <small class="text-muted">Ù¾Ø±ÙˆØ§Ù†Ù‡ Ú©Ø³Ø¨ØŒ Ú¯ÙˆØ§Ù‡ÛŒ ØµÙ„Ø§Ø­ÛŒØªØŒ HSE Ùˆ ...</small>
              <input type="file" class="d-none" id="documentUploadEdit" multiple accept=".pdf,.jpg,.png">
            </div>
            <div id="editFileList" class="mt-2"></div>
          </div>
        </div>

        <!-- Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ÛŒ ÙØ±Ù… -->
        <div class="d-flex gap-2 justify-content-end mt-4">
          <button type="button" class="btn btn-secondary" onclick="cancelProfileEdit()">Ø§Ù†ØµØ±Ø§Ù</button>
          <button type="submit" class="btn btn-primary" onclick="saveProfileChanges()">
            <i class="bi bi-check-circle me-1"></i>Ø°Ø®ÛŒØ±Ù‡ ØªØºÛŒÛŒØ±Ø§Øª
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
</div>
</div>

<!-- ØµÙØ­Ù‡ Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ú©Ø§Ø±ÙØ±Ù…Ø§ -->
<div id="employerRegistration" class="page-section" role="main" aria-label="ØµÙØ­Ù‡ Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ú©Ø§Ø±ÙØ±Ù…Ø§">
<div class="registration-page">
<div class="container mt-5 pt-5">
<button class="btn btn-back" onclick="showMainPage()" aria-label="Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ ØµÙØ­Ù‡ Ø§ØµÙ„ÛŒ">
<i class="bi bi-arrow-right me-2"></i>Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ ØµÙØ­Ù‡ Ø§ØµÙ„ÛŒ
</button>
</div>
<div class="container">
<div class="row justify-content-center">
<div class="col-lg-8">
<div class="text-center mb-5">
<h1 class="mb-3" style="color: var(--employer-color);">
<i class="bi bi-briefcase me-2"></i>Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ú©Ø§Ø±ÙØ±Ù…Ø§
</h1>
<p class="text-muted">Ù„Ø·ÙØ§Ù‹ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø®ÙˆØ¯ Ø±Ø§ Ø¨Ø±Ø§ÛŒ Ø§ÛŒØ¬Ø§Ø¯ Ø­Ø³Ø§Ø¨ Ú©Ø§Ø±ÙØ±Ù…Ø§ ØªÚ©Ù…ÛŒÙ„ Ú©Ù†ÛŒØ¯.</p>
</div>
<form id="employerForm" class="form-container" style="border-top-color: var(--employer-color);" novalidate>
<div class="form-section" id="employerSection1">
<h5><i class="bi bi-person-badge me-2"></i>Ù†ÙˆØ¹ Ø´Ø®ØµÛŒØª Ùˆ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù¾Ø§ÛŒÙ‡</h5>
<div class="row mb-4">
<div class="col-md-6 mb-3">
<label for="employerAccountType" class="form-label required">Ù†ÙˆØ¹ Ø´Ø®ØµÛŒØª</label>
<select class="form-select" id="employerAccountType" required>
<option value="">-- Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯ --</option>
<option value="individual">Ø´Ø®Øµ Ø­Ù‚ÛŒÙ‚ÛŒ</option>
<option value="company">Ø´Ø®Øµ Ø­Ù‚ÙˆÙ‚ÛŒ (Ø´Ø±Ú©Øª/Ù…Ø¤Ø³Ø³Ù‡)</option>
</select>
<div class="invalid-feedback">Ù„Ø·ÙØ§Ù‹ Ù†ÙˆØ¹ Ø´Ø®ØµÛŒØª Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</div>
<div class="form-text">Ø§ÛŒÙ† Ø§Ù†ØªØ®Ø§Ø¨ Ù…Ø³ÛŒØ± ØªÚ©Ù…ÛŒÙ„ ÙØ±Ù… Ø±Ø§ Ù…Ø´Ø®Øµ Ù…ÛŒâ€ŒÚ©Ù†Ø¯.</div>
</div>
</div>
<div id="employerDynamicFields"></div>
</div>
<div class="form-section" id="employerSection2" style="display: none;">
<h5><i class="bi bi-building me-2"></i>Ø§Ø·Ù„Ø§Ø¹Ø§Øª ØªÙ…Ø§Ø³ Ùˆ Ø´Ø±Ú©Øª</h5>
<div class="row">
<div class="col-md-6 mb-3">
<label for="employerMobile" class="form-label required">ØªÙ„ÙÙ† Ù‡Ù…Ø±Ø§Ù‡</label>
<div class="input-group">
<span class="input-group-text"><i class="bi bi-phone"></i></span>
<input type="tel" class="form-control" id="employerMobile" pattern="09[0-9]{9}" required>
</div>
<div class="invalid-feedback">Ù„Ø·ÙØ§Ù‹ Ø´Ù…Ø§Ø±Ù‡ ØªÙ„ÙÙ† Ù‡Ù…Ø±Ø§Ù‡ Ù…Ø¹ØªØ¨Ø± ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯ (Ù…Ø«Ø§Ù„: 09123456789)</div>
</div>
<div class="col-md-6 mb-3">
<label for="employerPhone" class="form-label">ØªÙ„ÙÙ† Ø«Ø§Ø¨Øª</label>
<div class="input-group">
<span class="input-group-text"><i class="bi bi-telephone"></i></span>
<input type="tel" class="form-control" id="employerPhone">
</div>
</div>
<div class="col-12 mb-3">
<label for="employerAddress" class="form-label required">Ø¢Ø¯Ø±Ø³</label>
<textarea class="form-control" id="employerAddress" rows="2" required></textarea>
<div class="invalid-feedback">Ù„Ø·ÙØ§Ù‹ Ø¢Ø¯Ø±Ø³ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯</div>
</div>
</div>
<div id="employerCompanyFields" style="display: none;">
<div class="row">
<div class="col-md-6 mb-3">
<label for="employerCompanyId" class="form-label required">Ø´Ù†Ø§Ø³Ù‡ Ù…Ù„ÛŒ Ø´Ø±Ú©Øª</label>
<input type="text" class="form-control" id="employerCompanyId" required>
<div class="invalid-feedback">Ù„Ø·ÙØ§Ù‹ Ø´Ù†Ø§Ø³Ù‡ Ù…Ù„ÛŒ Ø´Ø±Ú©Øª Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯</div>
</div>
<div class="col-md-6 mb-3">
<label for="employerRegistrationNo" class="form-label required">Ø´Ù…Ø§Ø±Ù‡ Ø«Ø¨Øª Ø´Ø±Ú©Øª</label>
<input type="text" class="form-control" id="employerRegistrationNo" required>
<div class="invalid-feedback">Ù„Ø·ÙØ§Ù‹ Ø´Ù…Ø§Ø±Ù‡ Ø«Ø¨Øª Ø´Ø±Ú©Øª Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯</div>
</div>
<div class="col-md-6 mb-3">
<label for="employerCompanyType" class="form-label required">Ù†ÙˆØ¹ ÙØ¹Ø§Ù„ÛŒØª</label>
<select class="form-select" id="employerCompanyType" required>
<option value="">-- Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯ --</option>
<option value="building_contracting">Ø´Ø±Ú©Øª Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø±ÛŒ Ø³Ø§Ø®ØªÙ…Ø§Ù† Ùˆ Ø§Ø¨Ù†ÛŒÙ‡</option>
<option value="road_transportation">Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø±ÛŒ Ø±Ø§Ù‡ Ùˆ ØªØ±Ø§Ø¨Ø±ÛŒ</option>
<option value="water_sewage">Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø±ÛŒ Ø¢Ø¨ Ùˆ ÙØ§Ø¶Ù„Ø§Ø¨</option>
<option value="oil_gas">Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø±ÛŒ Ù†ÙØª Ùˆ Ú¯Ø§Ø²</option>
<option value="power">Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø±ÛŒ Ù†ÛŒØ±Ùˆ</option>
<option value="industrial">Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø±ÛŒ ØµÙ†Ø¹ØªÛŒ</option>
<option value="investment">Ø´Ø±Ú©Øª Ø³Ø±Ù…Ø§ÛŒÙ‡ Ú¯Ø°Ø§Ø±ÛŒ</option>
<option value="personal">Ø´Ø®ØµÛŒ</option>
<option value="other">Ø³Ø§ÛŒØ±</option>
</select>
<div class="invalid-feedback">Ù„Ø·ÙØ§Ù‹ Ù†ÙˆØ¹ ÙØ¹Ø§Ù„ÛŒØª Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</div>
</div>
<div class="col-md-6 mb-3">
<label for="employerCompanyWebsite" class="form-label">ÙˆØ¨Ø³Ø§ÛŒØª Ø´Ø±Ú©Øª</label>
<input type="url" class="form-control" id="employerCompanyWebsite">
<div class="invalid-feedback">Ù„Ø·ÙØ§Ù‹ Ø¢Ø¯Ø±Ø³ ÙˆØ¨Ø³Ø§ÛŒØª Ù…Ø¹ØªØ¨Ø± ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯</div>
</div>
<div class="col-12 mb-3">
<label for="employerCompanyDescription" class="form-label">ØªÙˆØ¶ÛŒØ­Ø§Øª Ø¯Ø±Ø¨Ø§Ø±Ù‡ Ø´Ø±Ú©Øª/Ø³Ø§Ø²Ù…Ø§Ù†</label>
<textarea class="form-control" id="employerCompanyDescription" rows="3" placeholder="ØªÙˆØ¶ÛŒØ­ Ù…Ø®ØªØµØ±ÛŒ Ø¯Ø±Ø¨Ø§Ø±Ù‡ ÙØ¹Ø§Ù„ÛŒØªâ€ŒÙ‡Ø§ÛŒ Ø´Ø±Ú©Øª Ø®ÙˆØ¯ Ø¨Ù†ÙˆÛŒØ³ÛŒØ¯..."></textarea>
</div>
</div>
</div>
</div>
<div class="form-section" id="employerSection3" style="display: none;">
<h5><i class="bi bi-clipboard-check me-2"></i>Ù†ÛŒØ§Ø²Ù‡Ø§ÛŒ Ù¾Ø±ÙˆÚ˜Ù‡</h5>
<div class="row">
<div class="col-12 mb-3">
<label class="form-label required">Ù†ÙˆØ¹ Ù¾Ø±ÙˆÚ˜Ù‡ Ù…ÙˆØ±Ø¯ Ù†Ø¸Ø±</label>
<div class="row g-2">
<div class="col-6 col-md-4">
<div class="form-check">
<input class="form-check-input" type="checkbox" id="projectResidential" name="projectType">
<label class="form-check-label" for="projectResidential">Ù…Ø³Ú©ÙˆÙ†ÛŒ</label>
</div>
</div>
<div class="col-6 col-md-4">
<div class="form-check">
<input class="form-check-input" type="checkbox" id="projectCommercial" name="projectType">
<label class="form-check-label" for="projectCommercial">ØªØ¬Ø§Ø±ÛŒ</label>
</div>
</div>
<div class="col-6 col-md-4">
<div class="form-check">
<input class="form-check-input" type="checkbox" id="projectIndustrial" name="projectType">
<label class="form-check-label" for="projectIndustrial">ØµÙ†Ø¹ØªÛŒ</label>
</div>
</div>
<div class="col-6 col-md-4">
<div class="form-check">
<input class="form-check-input" type="checkbox" id="projectRenovation" name="projectType">
 <label class="form-check-label" for="projectRenovation">Ù†ÙˆØ³Ø§Ø²ÛŒ</label>
</div>
</div>
<div class="col-6 col-md-4">
<div class="form-check">
<input class="form-check-input" type="checkbox" id="projectOther" name="projectType">
 <label class="form-check-label" for="projectOther">Ø³Ø§ÛŒØ±</label>
</div>
</div>
</div>
<div class="invalid-feedback">Ù„Ø·ÙØ§Ù‹ Ø­Ø¯Ø§Ù‚Ù„ ÛŒÚ© Ù†ÙˆØ¹ Ù¾Ø±ÙˆÚ˜Ù‡ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</div>
</div>
<div class="col-md-6 mb-3">
<label for="projectTimeline" class="form-label">Ø²Ù…Ø§Ù†Ø¨Ù†Ø¯ÛŒ Ù…ÙˆØ±Ø¯ Ù†Ø¸Ø±</label>
<select class="form-select" id="projectTimelineEmployer">
<option value="">-- Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯ --</option>
<option value="urgent">ÙÙˆØ±ÛŒ (Ú©Ù…ØªØ± Ø§Ø² Û± Ù…Ø§Ù‡)</option>
<option value="1-3">Û± ØªØ§ Û³ Ù…Ø§Ù‡</option>
<option value="3-6">Û³ ØªØ§ Û¶ Ù…Ø§Ù‡</option>
<option value="6-12">Û¶ ØªØ§ Û±Û² Ù…Ø§Ù‡</option>
<option value="flexible">Ø§Ù†Ø¹Ø·Ø§Ùâ€ŒÙ¾Ø°ÛŒØ±</option>
</select>
</div>
<div class="col-12 mb-3">
<label for="projectDescriptionEmployer" class="form-label">ØªÙˆØ¶ÛŒØ­Ø§Øª Ù¾Ø±ÙˆÚ˜Ù‡</label>
<textarea class="form-control" id="projectDescriptionEmployer" rows="4" placeholder="ØªÙˆØ¶ÛŒØ­Ø§Øª Ø¨ÛŒØ´ØªØ±ÛŒ Ø¯Ø±Ø¨Ø§Ø±Ù‡ Ù¾Ø±ÙˆÚ˜Ù‡ Ù…ÙˆØ±Ø¯ Ù†Ø¸Ø± Ø®ÙˆØ¯ Ø¨Ù†ÙˆÛŒØ³ÛŒØ¯..."></textarea>
</div>
</div>
</div>
<div class="form-section" id="employerSection4" style="display: none;">
<h5><i class="bi bi-check-circle me-2"></i>ØªØ§ÛŒÛŒØ¯ Ø§Ø·Ù„Ø§Ø¹Ø§Øª</h5>
<div class="row">
<div class="col-12 mb-4">
<div class="alert alert-info">
<h6><i class="bi bi-info-circle me-2"></i>Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ø´Ù…Ø§</h6>
<div id="employerSummary" class="mt-2"></div>
</div>
</div>
<div class="col-12 mb-3">
  <div class="form-check">
    <input class="form-check-input" type="checkbox" id="employerTerms" required disabled>
    <label class="form-check-label" for="employerTerms">
      <a href="#" onclick="showTermsModal(); return false;" class="text-primary">Ù‚ÙˆØ§Ù†ÛŒÙ† Ùˆ Ù…Ù‚Ø±Ø±Ø§Øª</a> Ø±Ø§ Ù…Ø·Ø§Ù„Ø¹Ù‡ Ú©Ø±Ø¯Ù‡â€ŒØ§Ù… Ùˆ Ù…ÛŒâ€ŒÙ¾Ø°ÛŒØ±Ù…
    </label>
    <div class="invalid-feedback">Ù„Ø·ÙØ§Ù‹ Ù‚ÙˆØ§Ù†ÛŒÙ† Ùˆ Ù…Ù‚Ø±Ø±Ø§Øª Ø±Ø§ Ø¨Ù¾Ø°ÛŒØ±ÛŒØ¯</div>
  </div>
</div>
<div class="col-12 mb-3">
<div class="form-check">
<input class="form-check-input" type="checkbox" id="employerNewsletter">
<label class="form-check-label" for="employerNewsletter">Ù…Ø§ÛŒÙ„Ù… Ø§Ø®Ø¨Ø§Ø± Ùˆ Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯Ø§Øª ÙˆÛŒÚ˜Ù‡ Ù¾ÛŒÙ…Ø§Ù†â€ŒÛŒØ§Ø± Ø±Ø§ Ø¯Ø±ÛŒØ§ÙØª Ú©Ù†Ù…</label>
</div>
</div>
</div>
</div>
<div class="form-navigation">
<button type="button" class="btn btn-secondary" id="employerPrevBtn" style="display: none;" aria-label="Ù…Ø±Ø­Ù„Ù‡ Ù‚Ø¨Ù„ÛŒ">
<i class="bi bi-chevron-right me-1"></i>Ù‚Ø¨Ù„ÛŒ
</button>
<button type="button" class="btn btn-primary" id="employerNextBtn" style="background: var(--gradient-employer); border: none;" aria-label="Ù…Ø±Ø­Ù„Ù‡ Ø¨Ø¹Ø¯ÛŒ">
Ø¨Ø¹Ø¯ÛŒ <i class="bi bi-chevron-left ms-1"></i>
</button>
<button type="submit" class="btn btn-success" id="employerSubmitBtn" style="display: none; background: var(--gradient-employer); border: none;" aria-label="ØªÚ©Ù…ÛŒÙ„ Ø«Ø¨Øªâ€ŒÙ†Ø§Ù…">
<i class="bi bi-check-circle me-1"></i>ØªÚ©Ù…ÛŒÙ„ Ø«Ø¨Øªâ€ŒÙ†Ø§Ù…
</button>
</div>
</form>
</div>
</div>
</div>
</div>
</div>

<!-- ØµÙØ­Ù‡ Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø± -->
<div id="contractorRegistration" class="page-section" role="main" aria-label="ØµÙØ­Ù‡ Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø±">
<div class="registration-page">
<div class="container mt-5 pt-5">
<button class="btn btn-back" onclick="showMainPage()" aria-label="Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ ØµÙØ­Ù‡ Ø§ØµÙ„ÛŒ">
<i class="bi bi-arrow-right me-2"></i>Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ ØµÙØ­Ù‡ Ø§ØµÙ„ÛŒ
</button>
</div>
<div class="container">
<div class="row justify-content-center">
<div class="col-lg-10 col-xl-8">
<div class="text-center mb-5">
<h1 class="mb-3" style="color: var(--contractor-color);">
<i class="bi bi-building me-2"></i>Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø±Ø§Ù†
</h1>
<p class="text-muted">Ù„Ø·ÙØ§Ù‹ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø®ÙˆØ¯ Ø±Ø§ Ø¨Ø§ Ø¯Ù‚Øª ØªÚ©Ù…ÛŒÙ„ Ú©Ù†ÛŒØ¯. Ø§ÛŒÙ† Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù…Ø¨Ù†Ø§ÛŒ Ø§Ø¹ØªÙ…Ø§Ø¯ Ú©Ø§Ø±ÙØ±Ù…Ø§ÛŒØ§Ù† Ø®ÙˆØ§Ù‡Ø¯ Ø¨ÙˆØ¯.</p>
</div>
<div id="progressBar" class="progress">
<div id="progressBarFill" class="progress-bar" role="progressbar" style="width: 0%; background: var(--gradient-contractor);" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
</div>
<div class="step-indicator">
<div class="step active" id="step1" aria-label="Ù…Ø±Ø­Ù„Ù‡ 1: Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù‡ÙˆÛŒØªÛŒ">1</div>
<div class="step" id="step2" aria-label="Ù…Ø±Ø­Ù„Ù‡ 2: ØªØ®ØµØµ Ùˆ Ø®Ø¯Ù…Ø§Øª">2</div>
<div class="step" id="step3" aria-label="Ù…Ø±Ø­Ù„Ù‡ 3: Ø³Ø§Ø¨Ù‚Ù‡ Ùˆ ØªÙˆØ§Ù†Ù…Ù†Ø¯ÛŒâ€ŒÙ‡Ø§">3</div>
<div class="step" id="step4" aria-label="Ù…Ø±Ø­Ù„Ù‡ 4: Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§ÛŒ Ù†Ù…ÙˆÙ†Ù‡">4</div>
<div class="step" id="step5" aria-label="Ù…Ø±Ø­Ù„Ù‡ 5: Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù…Ø§Ù„ÛŒ">5</div>
</div>
<div id="autoSaveStatus" class="auto-save-status"></div>
<form id="contractorForm" class="form-container" style="border-top-color: var(--contractor-color);" novalidate>
<div class="form-section" id="section1">
<h5><i class="bi bi-person-badge me-2"></i>Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù‡ÙˆÛŒØªÛŒ Ùˆ Ù†ÙˆØ¹ Ø­Ø³Ø§Ø¨</h5>
<div class="row mb-4">
<div class="col-md-6 mb-3">
<label for="accountType" class="form-label required">Ù†ÙˆØ¹ Ø´Ø®ØµÛŒØª</label>
<select class="form-select" id="accountType" required>
<option value="">-- Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯ --</option>
<option value="individual">Ø´Ø®Øµ Ø­Ù‚ÛŒÙ‚ÛŒ (ÙØ±Ø¯/ØªÛŒÙ…)</option>
<option value="company">Ø´Ø®Øµ Ø­Ù‚ÙˆÙ‚ÛŒ (Ø´Ø±Ú©Øª/Ù…Ø¤Ø³Ø³Ù‡)</option>
</select>
<div class="invalid-feedback">Ù„Ø·ÙØ§Ù‹ Ù†ÙˆØ¹ Ø´Ø®ØµÛŒØª Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</div>
<div class="form-text">Ø§ÛŒÙ† Ø§Ù†ØªØ®Ø§Ø¨ Ù…Ø³ÛŒØ± ØªÚ©Ù…ÛŒÙ„ ÙØ±Ù… Ø±Ø§ Ù…Ø´Ø®Øµ Ù…ÛŒâ€ŒÚ©Ù†Ø¯.</div>
</div>
</div>
<div id="dynamicFields"></div>
<div class="row">
<div class="col-md-6 mb-3">
<label for="contactPerson" class="form-label required">Ù†Ø§Ù… Ù…Ø³Ø¦ÙˆÙ„ Ø§Ø±ØªØ¨Ø§Ø·</label>
<input type="text" class="form-control" id="contactPerson" required>
<div class="invalid-feedback">Ù„Ø·ÙØ§Ù‹ Ù†Ø§Ù… Ù…Ø³Ø¦ÙˆÙ„ Ø§Ø±ØªØ¨Ø§Ø· Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯</div>
</div>
<div class="col-md-6 mb-3">
<label for="mobile" class="form-label required">ØªÙ„ÙÙ† Ù‡Ù…Ø±Ø§Ù‡</label>
<div class="input-group">
<span class="input-group-text"><i class="bi bi-phone"></i></span>
<input type="tel" class="form-control" id="mobile" pattern="09[0-9]{9}" required>
</div>
<div class="invalid-feedback">Ù„Ø·ÙØ§Ù‹ Ø´Ù…Ø§Ø±Ù‡ ØªÙ„ÙÙ† Ù‡Ù…Ø±Ø§Ù‡ Ù…Ø¹ØªØ¨Ø± ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯ (Ù…Ø«Ø§Ù„: 09123456789)</div>
<div class="form-text">Ù…Ø«Ø§Ù„: 09123456789</div>
</div>
<div class="col-md-6 mb-3">
<label for="phone" class="form-label">ØªÙ„ÙÙ† Ø«Ø§Ø¨Øª</label>
<div class="input-group">
<span class="input-group-text"><i class="bi bi-telephone"></i></span>
<input type="tel" class="form-control" id="phone">
</div>
</div>
</div>
</div>
<div class="form-section" id="section2" style="display: none;">
<h5><i class="bi bi-tools me-2"></i>ØªØ®ØµØµ Ùˆ Ø®Ø¯Ù…Ø§Øª</h5>
<div class="row">
<div class="col-md-6 mb-3">
<label for="mainExpertise" class="form-label required">Ø­ÙˆØ²Ù‡ ØªØ®ØµØµ Ø§ØµÙ„ÛŒ</label>
<select class="form-select" id="mainExpertise" required>
<option value="">-- Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯ --</option>
<option value="steel_fabrication">Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø± Ø³Ø§Ø®Øª Ø§Ø³Ú©Ù„Øª ÙÙ„Ø²ÛŒ</option>
<option value="steel_installation">Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø± Ù†ØµØ¨ Ø§Ø³Ú©Ù„Øª ÙÙ„Ø²ÛŒ</option>
<option value="formwork">Ø§Ú©ÛŒÙ¾ Ù‚Ø§Ù„Ø¨â€ŒØ¨Ù†Ø¯ÛŒ</option>
<option value="rebar">Ø§Ú©ÛŒÙ¾ Ø¢Ø±Ù…Ø§ØªÙˆØ±Ø¨Ù†Ø¯ÛŒ</option>
<option value="concrete_execution">Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø± Ø§Ø¬Ø±Ø§ÛŒ Ø¨ØªÙ†</option>
<option value="grouting">Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø± Ú¯Ø±ÙˆØªâ€ŒØ±ÛŒØ²ÛŒ</option>
<option value="welding">Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø± Ø¬ÙˆØ´Ú©Ø§Ø±ÛŒ Ø³Ø§Ø²Ù‡</option>
<option value="coating">Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø± Ø±Ù†Ú¯ Ùˆ Ù¾ÙˆØ´Ø´ ØµÙ†Ø¹ØªÛŒ</option>
<option value="excavation">Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø± Ø®Ø§Ú©Ø¨Ø±Ø¯Ø§Ø±ÛŒ Ùˆ Ù¾Ø§ÛŒØ¯Ø§Ø±Ø³Ø§Ø²ÛŒ</option>
<option value="foundation">Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø± ÙÙˆÙ†Ø¯Ø§Ø³ÛŒÙˆÙ† Ùˆ Ø§Ø¨Ù†ÛŒÙ‡</option>
<option value="site_development">Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø± Ù…Ø­ÙˆØ·Ù‡â€ŒØ³Ø§Ø²ÛŒ</option>
<option value="civil_works">Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø± Civil Works ØµÙ†Ø¹ØªÛŒ</option>
<option value="special_structures">Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø± Ø³Ø§Ø²Ù‡â€ŒÙ‡Ø§ÛŒ Ø®Ø§Øµ</option>
<option value="support_teams">Ø§Ú©ÛŒÙ¾â€ŒÙ‡Ø§ÛŒ Ù¾Ø´ØªÛŒØ¨Ø§Ù† Ø§Ù…Ø§ Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯Ù…Ø­ÙˆØ±</option>
<option value="equipment_rental">Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø± Ø§Ø¬Ø§Ø±Ù‡ Ù…Ø§Ø´ÛŒÙ†â€ŒØ¢Ù„Ø§Øª ØµÙ†Ø¹ØªÛŒ</option>
<option value="industrial_flooring">Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø± Ú©Ùâ€ŒØ³Ø§Ø²ÛŒ ØµÙ†Ø¹ØªÛŒ</option>
<option value="cutting_coring">Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø± Ø¨Ø±Ø´ØŒ Ú©Ø±Ú¯ÛŒØ±ÛŒ Ùˆ ØªØ®Ø±ÛŒØ¨ Ú©Ù†ØªØ±Ù„â€ŒØ´Ø¯Ù‡</option>
<option value="waterproofing">Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø± Ø¢Ø¨â€ŒØ¨Ù†Ø¯ÛŒ Ùˆ Ø¯Ø±Ø²Ú¯ÛŒØ±ÛŒ</option>
<option value="seismic_retrofit">Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø± Ù…Ù‚Ø§ÙˆÙ…â€ŒØ³Ø§Ø²ÛŒ Ùˆ Ø¨Ù‡Ø³Ø§Ø²ÛŒ Ù„Ø±Ø²Ù‡â€ŒØ§ÛŒ</option>
<option value="special_concrete">Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø± Ø¨ØªÙ†â€ŒÙ‡Ø§ÛŒ Ø®Ø§Øµ</option>
<option value="precast">Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø± Ø³Ø§Ø²Ù‡â€ŒÙ‡Ø§ÛŒ Ù¾ÛŒØ´â€ŒØ³Ø§Ø®ØªÙ‡</option>
<option value="tunneling">Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø± ØªÙˆÙ†Ù„ Ùˆ Ø­ÙØ§Ø±ÛŒ Ø®Ø§Øµ</option>
</select>
<div class="invalid-feedback">Ù„Ø·ÙØ§Ù‹ Ø­ÙˆØ²Ù‡ ØªØ®ØµØµ Ø§ØµÙ„ÛŒ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</div>
</div>
<div class="col-md-6 mb-3">
<label class="form-label">Ø²ÛŒØ±Ø­ÙˆØ²Ù‡â€ŒÙ‡Ø§ÛŒ ØªØ®ØµØµÛŒ</label>
<div id="subExpertiseContainer"><div class="form-text">Ø¨Ø±Ø§ÛŒ Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ø²ÛŒØ±Ø­ÙˆØ²Ù‡â€ŒÙ‡Ø§ØŒ Ø§Ø¨ØªØ¯Ø§ ØªØ®ØµØµ Ø§ØµÙ„ÛŒ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯.</div></div>
</div>
<div class="col-12 mb-4">
<div class="project-scale-row">
<label class="form-label d-block mb-3"><i class="bi bi-rulers me-2"></i>Ù…Ù‚ÛŒØ§Ø³ Ù¾Ø±ÙˆÚ˜Ù‡ Ù‚Ø§Ø¨Ù„ Ø§Ø¬Ø±Ø§ (Ø¯Ø± Ù‡Ø± Ù…Ø§Ù‡)</label>
<div class="row">
<div class="col-md-6 mb-3">
<label for="projectArea" class="form-label">Ù…ØªØ±Ø§Ú˜</label>
<div class="input-group">
<input type="number" class="form-control" id="projectArea" min="0" placeholder="Ù…Ø«Ø§Ù„: 5000">
<select class="form-select" id="areaUnit" style="max-width: 120px;">
<option value="sqm">Ù…ØªØ± Ù…Ø±Ø¨Ø¹</option>
<option value="cbm">Ù…ØªØ± Ù…Ú©Ø¹Ø¨</option>
</select>
</div>
<div class="form-text">Ø¨Ø±Ø§ÛŒ Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§ÛŒ Ø³Ø§Ø®ØªÙ…Ø§Ù†ÛŒ Ùˆ Ú©Ø§Ø¨ÛŒÙ†Øª</div>
</div>
<div class="col-md-6 mb-3">
<label for="projectWeight" class="form-label">ÙˆØ²Ù†</label>
<div class="input-group">
<input type="number" class="form-control" id="projectWeight" min="0" placeholder="Ù…Ø«Ø§Ù„: 100">
<span class="input-group-text">ØªÙ†</span>
</div>
<div class="form-text">Ø¨Ø±Ø§ÛŒ Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§ÛŒ Ø§Ø³Ú©Ù„Øª ÙÙ„Ø²ÛŒ</div>
</div>
</div>
<div class="form-text text-muted mt-2">Ø­Ø¯Ø§Ù‚Ù„ ÛŒÚ©ÛŒ Ø§Ø² ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ Ø¨Ø§Ù„Ø§ Ø±Ø§ Ù¾Ø± Ú©Ù†ÛŒØ¯</div>
</div>
</div>
<div class="col-md-6 mb-3">
<label for="workArea" class="form-label required">Ù…Ø­Ø¯ÙˆØ¯Ù‡ Ø¬ØºØ±Ø§ÙÛŒØ§ÛŒÛŒ ÙØ¹Ø§Ù„ÛŒØª</label>
<select class="form-select" id="workArea" multiple required style="height: 200px;">
<optgroup label="Ù…Ù†Ø§Ø·Ù‚ Ù…Ø±Ú©Ø²ÛŒ">
<option value="all" class="select-all-option">âœ… Ú©Ù„ Ø§ÛŒØ±Ø§Ù†</option>
<option value="tehran">ØªÙ‡Ø±Ø§Ù†</option>
<option value="alborz">Ø§Ù„Ø¨Ø±Ø²</option>
<option value="qom">Ù‚Ù…</option>
<option value="markazi">Ù…Ø±Ú©Ø²ÛŒ</option>
<option value="qazvin">Ù‚Ø²ÙˆÛŒÙ†</option>
<option value="esfahan">Ø§ØµÙÙ‡Ø§Ù†</option>
<option value="yazd">ÛŒØ²Ø¯</option>
<option value="semnan">Ø³Ù…Ù†Ø§Ù†</option>
</optgroup>
<optgroup label="Ù…Ù†Ø§Ø·Ù‚ Ø´Ù…Ø§Ù„ÛŒ">
<option value="gilan">Ú¯ÛŒÙ„Ø§Ù†</option>
<option value="mazandaran">Ù…Ø§Ø²Ù†Ø¯Ø±Ø§Ù†</option>
<option value="golestan">Ú¯Ù„Ø³ØªØ§Ù†</option>
<option value="ardabil">Ø§Ø±Ø¯Ø¨ÛŒÙ„</option>
<option value="zanjan">Ø²Ù†Ø¬Ø§Ù†</option>
</optgroup>
<optgroup label="Ù…Ù†Ø§Ø·Ù‚ ØºØ±Ø¨ÛŒ">
<option value="east-azerbaijan">Ø¢Ø°Ø±Ø¨Ø§ÛŒØ¬Ø§Ù† Ø´Ø±Ù‚ÛŒ</option>
<option value="west-azerbaijan">Ø¢Ø°Ø±Ø¨Ø§ÛŒØ¬Ø§Ù† ØºØ±Ø¨ÛŒ</option>
<option value="kurdistan">Ú©Ø±Ø¯Ø³ØªØ§Ù†</option>
<option value="hamadan">Ù‡Ù…Ø¯Ø§Ù†</option>
<option value="kermanshah">Ú©Ø±Ù…Ø§Ù†Ø´Ø§Ù‡</option>
<option value="ilam">Ø§ÛŒÙ„Ø§Ù…</option>
<option value="lorestan">Ù„Ø±Ø³ØªØ§Ù†</option>
</optgroup>
<optgroup label="Ù…Ù†Ø§Ø·Ù‚ Ø¬Ù†ÙˆØ¨ÛŒ">
<option value="khuzestan">Ø®ÙˆØ²Ø³ØªØ§Ù†</option>
<option value="fars">ÙØ§Ø±Ø³</option>
<option value="hormozgan">Ù‡Ø±Ù…Ø²Ú¯Ø§Ù†</option>
<option value="bushehr">Ø¨ÙˆØ´Ù‡Ø±</option>
<option value="kohgiluyeh-boyer-ahmad">Ú©Ù‡Ú¯ÛŒÙ„ÙˆÛŒÙ‡ Ùˆ Ø¨ÙˆÛŒØ±Ø§Ø­Ù…Ø¯</option>
<option value="chaharmahal-bakhtiari">Ú†Ù‡Ø§Ø±Ù…Ø­Ø§Ù„ Ùˆ Ø¨Ø®ØªÛŒØ§Ø±ÛŒ</option>
</optgroup>
<optgroup label="Ù…Ù†Ø§Ø·Ù‚ Ø´Ø±Ù‚ÛŒ">
<option value="kerman">Ú©Ø±Ù…Ø§Ù†</option>
<option value="sistan-baluchestan">Ø³ÛŒØ³ØªØ§Ù† Ùˆ Ø¨Ù„ÙˆÚ†Ø³ØªØ§Ù†</option>
<option value="razavi-khorasan">Ø®Ø±Ø§Ø³Ø§Ù† Ø±Ø¶ÙˆÛŒ</option>
<option value="south-khorasan">Ø®Ø±Ø§Ø³Ø§Ù† Ø¬Ù†ÙˆØ¨ÛŒ</option>
<option value="north-khorasan">Ø®Ø±Ø§Ø³Ø§Ù† Ø´Ù…Ø§Ù„ÛŒ</option>
</optgroup>
</select>
<div class="invalid-feedback">Ù„Ø·ÙØ§Ù‹ Ø­Ø¯Ø§Ù‚Ù„ ÛŒÚ© Ù…Ø­Ø¯ÙˆØ¯Ù‡ Ø¬ØºØ±Ø§ÙÛŒØ§ÛŒÛŒ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</div>
<div class="multiselect-hint">
<i class="bi bi-info-circle me-1"></i>
Ø¨Ø±Ø§ÛŒ Ø§Ù†ØªØ®Ø§Ø¨ Ú†Ù†Ø¯ Ú¯Ø²ÛŒÙ†Ù‡ØŒ Ú©Ù„ÛŒØ¯ Ctrl Ø±Ø§ Ù†Ú¯Ù‡ Ø¯Ø§Ø±ÛŒØ¯ Ùˆ Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯. Ø§Ù†ØªØ®Ø§Ø¨ "Ú©Ù„ Ø§ÛŒØ±Ø§Ù†" Ø³Ø§ÛŒØ± Ú¯Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§ Ø±Ø§ ØºÛŒØ±ÙØ¹Ø§Ù„ Ù…ÛŒâ€ŒÚ©Ù†Ø¯.
</div>
<div class="form-text mt-2">
<label for="radius" class="form-label">Ø­Ø¯Ø§Ú©Ø«Ø± Ø´Ø¹Ø§Ø¹ ÙØ¹Ø§Ù„ÛŒØª Ø§Ø² Ù…Ø±Ú©Ø² Ø´Ù‡Ø± (Ú©ÛŒÙ„ÙˆÙ…ØªØ±)</label>
<input type="range" class="form-range" id="radius" min="0" max="100" value="20">
<div class="d-flex justify-content-between">
<small>0</small>
<small id="radiusValue">20 Ú©ÛŒÙ„ÙˆÙ…ØªØ±</small>
<small>100</small>
</div>
</div>
</div>
</div>
</div>
<div class="form-section" id="section3" style="display: none;">
<h5><i class="bi bi-award me-2"></i>Ø³Ø§Ø¨Ù‚Ù‡ Ùˆ ØªÙˆØ§Ù†Ù…Ù†Ø¯ÛŒâ€ŒÙ‡Ø§</h5>
<div class="row">
<div class="col-md-6 mb-3">
<label for="startYear" class="form-label required">Ø³Ø§Ù„ Ø¢ØºØ§Ø² ÙØ¹Ø§Ù„ÛŒØª (Ø´Ù…Ø³ÛŒ)</label>
<select class="form-select" id="startYear" required>
<option value="">-- Ø§Ù†ØªØ®Ø§Ø¨ Ø³Ø§Ù„ --</option>
</select>
<div class="invalid-feedback">Ù„Ø·ÙØ§Ù‹ Ø³Ø§Ù„ Ø¢ØºØ§Ø² ÙØ¹Ø§Ù„ÛŒØª Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</div>
</div>
<div class="col-md-6 mb-3">
<label for="teamSize" class="form-label">ØªØ¹Ø¯Ø§Ø¯ Ù†ÛŒØ±ÙˆÛŒ Ø§Ù†Ø³Ø§Ù†ÛŒ Ø«Ø§Ø¨Øª</label>
<input type="number" class="form-control" id="teamSize" min="0">
</div>
<div class="col-12 mb-3">
<label for="equipment" class="form-label">ØªØ¬Ù‡ÛŒØ²Ø§Øª Ùˆ Ù…Ø§Ø´ÛŒÙ†â€ŒØ¢Ù„Ø§Øª</label>
<textarea class="form-control" id="equipment" rows="3" placeholder="Ø¯Ø³ØªÚ¯Ø§Ù‡ Ø¬ÙˆØ´ Ø±Ø¨Ø§ØªÛŒÚ©ØŒ Ø¯Ø³ØªÚ¯Ø§Ù‡ Ø¨Ø±Ø´ CNCØŒ ..."></textarea>
<div class="form-text">Ø¨Ø±Ø§ÛŒ Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø±Ø§Ù† Ø§Ø³Ú©Ù„Øª Ùˆ ØªØ§Ø³ÛŒØ³Ø§Øª Ø¨Ø³ÛŒØ§Ø± Ù…Ù‡Ù… Ø§Ø³Øª</div>
</div>
<div class="col-12 mb-4">
<label class="form-label">Ù…Ø¯Ø§Ø±Ú© Ùˆ Ú¯ÙˆØ§Ù‡ÛŒÙ†Ø§Ù…Ù‡â€ŒÙ‡Ø§</label>
<div class="upload-box" id="docUploadArea" role="button" tabindex="0" aria-label="Ø¢Ù¾Ù„ÙˆØ¯ Ù…Ø¯Ø§Ø±Ú©">
<i class="bi bi-cloud-arrow-up" style="font-size: 2rem;"></i>
<p>ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ø®ÙˆØ¯ Ø±Ø§ Ø§ÛŒÙ†Ø¬Ø§ Ø±Ù‡Ø§ Ú©Ù†ÛŒØ¯ ÛŒØ§ Ø¨Ø±Ø§ÛŒ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯</p>
<small class="text-muted">Ù¾Ø±ÙˆØ§Ù†Ù‡ Ú©Ø³Ø¨ØŒ Ú¯ÙˆØ§Ù‡ÛŒ ØµÙ„Ø§Ø­ÛŒØªØŒ HSE Ùˆ ... (Ø­Ø¯Ø§Ú©Ø«Ø± Ûµ ÙØ§ÛŒÙ„)</small>
<input type="file" class="d-none" id="documentUpload" multiple accept=".pdf,.jpg,.png">
</div>
<div id="fileList" class="mt-2"></div>
</div>
</div>
</div>
<div class="form-section" id="section4" style="display: none;">
<h5><i class="bi bi-images me-2"></i>Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§ÛŒ Ù†Ù…ÙˆÙ†Ù‡</h5>
<div class="mb-4">
<p class="text-muted">Ù„Ø·ÙØ§Ù‹ Ø­Ø¯Ø§Ù‚Ù„ Û² Ù¾Ø±ÙˆÚ˜Ù‡ Ø´Ø§Ø®Øµ Ø®ÙˆØ¯ Ø±Ø§ Ù…Ø¹Ø±ÙÛŒ Ú©Ù†ÛŒØ¯. Ø¢Ù¾Ù„ÙˆØ¯ ØªØµÙˆÛŒØ± ØªØ£ÛŒÛŒØ¯ Ú©ÛŒÙÛŒØª Ù¾Ø±ÙˆÙØ§ÛŒÙ„ Ø´Ù…Ø§ Ø±Ø§ Ø§ÙØ²Ø§ÛŒØ´ Ù…ÛŒâ€ŒØ¯Ù‡Ø¯.</p>
<div id="projectContainer">
<div class="card mb-3 project-card">
<div class="card-body">
<h6 class="card-title">Ù¾Ø±ÙˆÚ˜Ù‡ Ù†Ù…ÙˆÙ†Ù‡ Û±</h6>
<div class="row">
<div class="col-md-4 mb-3">
<label class="form-label">Ù†Ø§Ù… Ù¾Ø±ÙˆÚ˜Ù‡</label>
<input type="text" class="form-control" name="projectName[]">
</div>
<div class="col-md-4 mb-3">
<label class="form-label">Ø³Ø§Ù„ ØªØ­ÙˆÛŒÙ„ (Ø´Ù…Ø³ÛŒ)</label>
<select class="form-select" name="projectYear[]">
<option value="">-- Ø§Ù†ØªØ®Ø§Ø¨ --</option>
</select>
</div>
<div class="col-md-4 mb-3">
<label class="form-label">Ù…Ø´ØªØ±ÛŒ</label>
<input type="text" class="form-control" name="projectClient[]" placeholder="Ù†Ø§Ù… Ø´Ø±Ú©Øª ÛŒØ§ Ø´Ø®Øµ">
</div>
<div class="col-12 mb-3">
<label class="form-label">ØªØµÙˆÛŒØ± Ù¾Ø±ÙˆÚ˜Ù‡ (Ø­Ø¯Ø§Ú©Ø«Ø± Û± ØªØµÙˆÛŒØ±)</label>
<input type="file" class="form-control" name="projectImage[]" accept="image/*" aria-label="Ø¢Ù¾Ù„ÙˆØ¯ ØªØµÙˆÛŒØ± Ù¾Ø±ÙˆÚ˜Ù‡">
</div>
</div>
</div>
</div>
</div>
<button type="button" class="btn btn-outline-primary" id="addProject" aria-label="Ø§ÙØ²ÙˆØ¯Ù† Ù¾Ø±ÙˆÚ˜Ù‡ Ø¯ÛŒÚ¯Ø±">
<i class="bi bi-plus-circle me-1"></i>Ø§ÙØ²ÙˆØ¯Ù† Ù¾Ø±ÙˆÚ˜Ù‡ Ø¯ÛŒÚ¯Ø±
</button>
</div>
<div class="mb-3">
<label class="form-label">ØªØ£ÛŒÛŒØ¯ÛŒÙ‡â€ŒÙ‡Ø§ÛŒ Ú©ØªØ¨ÛŒ Ø§Ø² Ú©Ø§Ø±ÙØ±Ù…Ø§ÛŒØ§Ù† Ù‚Ø¨Ù„ÛŒ (Ø§Ø®ØªÛŒØ§Ø±ÛŒ)</label>
<input type="file" class="form-control" id="clientConfirmations" multiple accept=".pdf,.jpg,.png" aria-label="Ø¢Ù¾Ù„ÙˆØ¯ ØªØ£ÛŒÛŒØ¯ÛŒÙ‡ Ú©Ø§Ø±ÙØ±Ù…Ø§ÛŒØ§Ù†">
<div class="form-text">Ø¢Ù¾Ù„ÙˆØ¯ Ø§ÛŒÙ† ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ Ø§Ø¹ØªØ¨Ø§Ø± Ù¾Ø±ÙˆÙØ§ÛŒÙ„ Ø´Ù…Ø§ Ø±Ø§ Ø¨Ù‡ Ø³Ø·Ø­ Ø¹Ø§Ù„ÛŒ Ù…ÛŒâ€ŒØ¨Ø±Ø¯.</div>
</div>
</div>
<div class="form-section" id="section5" style="display: none;">
<h5><i class="bi bi-cash-coin me-2"></i>Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù…Ø§Ù„ÛŒ Ùˆ ØªÚ©Ù…ÛŒÙ„ÛŒ</h5>
<div class="row">
<div class="col-md-6 mb-3">
<label for="contractMethod" class="form-label">Ø±ÙˆØ´ ØªØ±Ø¬ÛŒØ­ÛŒ Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯Ù†ÙˆÛŒØ³ÛŒ</label>
<select class="form-select" id="contractMethod">
<option value="">-- Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯ --</option>
<option value="fixed">Ù…Ù‚Ø·ÙˆØ¹</option>
<option value="kiloyi">Ú©ÛŒÙ„ÙˆÛŒÛŒ</option>
<option value="per_meter">Ù…ØªØ±Ù…Ø±Ø¨Ø¹/Ù…ØªØ±Ø·ÙˆÙ„</option>
<option value="percentage">Ø¯Ø±ØµØ¯ÛŒ</option>
<option value="hybrid">ØªØ±Ú©ÛŒØ¨ÛŒ</option>
</select>
</div>
<div class="col-md-6 mb-3">
<label for="insurance" class="form-label">Ø¨ÛŒÙ…Ù‡ Ù…Ø³Ø¦ÙˆÙ„ÛŒØª</label>
<select class="form-select" id="insurance">
<option value="">-- Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯ --</option>
<option value="yes">Ø¯Ø§Ø±Ù…</option>
<option value="no">Ù†Ø¯Ø§Ø±Ù…</option>
</select>
<div class="conditional-field mt-2" id="insuranceExpiryField">
<label for="insuranceExpiry" class="form-label">ØªØ§Ø±ÛŒØ® Ø§Ù†Ù‚Ø¶Ø§ Ø¨ÛŒÙ…Ù‡</label>
<input type="date" class="form-control" id="insuranceExpiry">
</div>
</div>
<div class="col-md-6 mb-3">
<label for="referralSource" class="form-label">Ú†Ú¯ÙˆÙ†Ù‡ Ø¨Ø§ Ù…Ø§ Ø¢Ø´Ù†Ø§ Ø´Ø¯ÛŒØ¯ØŸ</label>
<select class="form-select" id="referralSource">
<option value="">-- Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯ --</option>
<option value="search">Ø¬Ø³ØªØ¬ÙˆÛŒ Ø§ÛŒÙ†ØªØ±Ù†ØªÛŒ</option>
<option value="social">Ø´Ø¨Ú©Ù‡â€ŒÙ‡Ø§ÛŒ Ø§Ø¬ØªÙ…Ø§Ø¹ÛŒ</option>
<option value="friend">Ù…Ø¹Ø±ÙÛŒ Ø¯ÙˆØ³Øª/Ù‡Ù…Ú©Ø§Ø±</option>
<option value="ads">ØªØ¨Ù„ÛŒØºØ§Øª</option>
<option value="other">Ø³Ø§ÛŒØ±</option>
</select>
</div>
</div>
<div class="col-12 mb-3">
  <div class="form-check">
    <input class="form-check-input" type="checkbox" id="contractorTerms" required disabled>
    <label class="form-check-label" for="contractorTerms">
      <a href="#" onclick="showTermsModal(); return false;" class="text-primary">Ù‚ÙˆØ§Ù†ÛŒÙ† Ùˆ Ù…Ù‚Ø±Ø±Ø§Øª</a> Ø±Ø§ Ù…Ø·Ø§Ù„Ø¹Ù‡ Ú©Ø±Ø¯Ù‡â€ŒØ§Ù… Ùˆ Ù…ÛŒâ€ŒÙ¾Ø°ÛŒØ±Ù…
    </label>
    <div class="invalid-feedback">Ù„Ø·ÙØ§Ù‹ Ù‚ÙˆØ§Ù†ÛŒÙ† Ùˆ Ù…Ù‚Ø±Ø±Ø§Øª Ø±Ø§ Ø¨Ù¾Ø°ÛŒØ±ÛŒØ¯</div>
  </div>
</div>
<div class="summary-box" id="formSummary" style="display: none;">
<h6><i class="bi bi-eye me-1"></i>Ù¾ÛŒØ´â€ŒÙ†Ù…Ø§ÛŒØ´ Ù¾Ø±ÙˆÙØ§ÛŒÙ„ Ø´Ù…Ø§</h6>
<div id="summaryContent" class="mt-2"></div>
</div>
</div>
<div class="form-navigation">
<button type="button" class="btn btn-secondary" id="prevBtn" style="display: none;" aria-label="Ù…Ø±Ø­Ù„Ù‡ Ù‚Ø¨Ù„ÛŒ">
<i class="bi bi-chevron-right me-1"></i>Ù‚Ø¨Ù„ÛŒ
</button>
<button type="button" class="btn btn-primary" id="nextBtn" style="background: var(--gradient-contractor); border: none;" aria-label="Ù…Ø±Ø­Ù„Ù‡ Ø¨Ø¹Ø¯ÛŒ">
Ø¨Ø¹Ø¯ÛŒ <i class="bi bi-chevron-left ms-1"></i>
</button>
<button type="submit" class="btn btn-success" id="submitBtn" style="display: none; background: var(--gradient-contractor); border: none;" aria-label="ØªÚ©Ù…ÛŒÙ„ Ø«Ø¨Øªâ€ŒÙ†Ø§Ù…">
<i class="bi bi-check-circle me-1"></i>ØªÚ©Ù…ÛŒÙ„ Ø«Ø¨Øªâ€ŒÙ†Ø§Ù…
</button>
</div>
</form>
</div>
</div>
</div>
</div>
</div>

<!-- ÙÙˆØªØ± -->
<footer class="footer" role="contentinfo">
<div class="container">
<div class="row">
<div class="col-lg-4">
<div class="footer-section">
<div class="footer-logo">Ù¾ÛŒÙ…Ø§Ù†â€ŒÛŒØ§Ø±</div>
<p class="text-light" style="opacity: 0.8;">
Ù¾Ù„ØªÙØ±Ù… Ù‡ÙˆØ´Ù…Ù†Ø¯ Ù¾ÛŒÙ…Ø§Ù†â€ŒÛŒØ§Ø±ØŒ Ø§ÙˆÙ„ÛŒÙ† Ùˆ ØªØ®ØµØµÛŒâ€ŒØªØ±ÛŒÙ† Ù¾Ù„ØªÙØ±Ù… Ø§Ø±ØªØ¨Ø§Ø· Ú©Ø§Ø±ÙØ±Ù…Ø§ÛŒØ§Ù† Ùˆ Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø±Ø§Ù† Ø³Ø§Ø®ØªÙ…Ø§Ù†ÛŒ Ø¯Ø± Ø§ÛŒØ±Ø§Ù†.
</p>
<div class="social-links">
<a href="#" class="social-link" aria-label="Ø§ÛŒÙ†Ø³ØªØ§Ú¯Ø±Ø§Ù… Ù¾ÛŒÙ…Ø§Ù†â€ŒÛŒØ§Ø±">
<i class="bi bi-instagram"></i>
</a>
<a href="#" class="social-link" aria-label="ØªÙ„Ú¯Ø±Ø§Ù… Ù¾ÛŒÙ…Ø§Ù†â€ŒÛŒØ§Ø±">
<i class="bi bi-telegram"></i>
</a>
<a href="#" class="social-link" aria-label="Ù„ÛŒÙ†Ú©Ø¯ÛŒÙ† Ù¾ÛŒÙ…Ø§Ù†â€ŒÛŒØ§Ø±">
<i class="bi bi-linkedin"></i>
</a>
</div>
</div>
</div>
<div class="col-lg-2 col-md-4">
<div class="footer-section">
<h5 class="footer-title">Ù„ÛŒÙ†Ú©â€ŒÙ‡Ø§ÛŒ Ø³Ø±ÛŒØ¹</h5>
<ul class="footer-links">
<li><a href="#" onclick="showPage('home')">Ø®Ø§Ù†Ù‡</a></li>
<li><a href="#" onclick="showPage('features')">ÙˆÛŒÚ˜Ú¯ÛŒâ€ŒÙ‡Ø§</a></li>
<li><a href="#" onclick="showPage('search')">Ø¬Ø³ØªØ¬Ùˆ</a></li>
<li><a href="#" onclick="showPage('projects')">Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§</a></li>
<li><a href="#" onclick="showPage('blog')">Ø¨Ù„Ø§Ú¯</a></li>
</ul>
</div>
</div>
<div class="col-lg-3 col-md-4">
<div class="footer-section">
<h5 class="footer-title">ØªÙ…Ø§Ø³ Ø¨Ø§ Ù…Ø§</h5>
<ul class="footer-links">
<li><i class="bi bi-geo-alt me-2"></i> ØªÙ‡Ø±Ø§Ù†ØŒ Ø®ÛŒØ§Ø¨Ø§Ù† ÙˆÙ„ÛŒØ¹ØµØ±</li>
<li><i class="bi bi-telephone me-2"></i> Û°Û²Û±-Û±Û²Û³Û´ÛµÛ¶Û·Û¸</li>
<li><i class="bi bi-envelope me-2"></i> info@peymanyar.com</li>
</ul>
</div>
</div>
<div class="col-lg-3 col-md-4">
<div class="footer-section">
<h5 class="footer-title">Ø®Ø¨Ø±Ù†Ø§Ù…Ù‡</h5>
<p class="text-light" style="opacity: 0.8; font-size: 0.9rem;">Ø¨Ø±Ø§ÛŒ Ø¯Ø±ÛŒØ§ÙØª Ø¬Ø¯ÛŒØ¯ØªØ±ÛŒÙ† Ø§Ø®Ø¨Ø§Ø± Ùˆ ØªØ®ÙÛŒÙâ€ŒÙ‡Ø§ Ø¯Ø± Ø®Ø¨Ø±Ù†Ø§Ù…Ù‡ Ø¹Ø¶Ùˆ Ø´ÙˆÛŒØ¯.</p>
<div class="input-group mb-3">
<input type="email" class="form-control" placeholder="Ø§ÛŒÙ…ÛŒÙ„ Ø®ÙˆØ¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯" aria-label="Ø§ÛŒÙ…ÛŒÙ„ Ø¨Ø±Ø§ÛŒ Ø®Ø¨Ø±Ù†Ø§Ù…Ù‡">
<button class="btn btn-primary" type="button" aria-label="Ø¹Ø¶ÙˆÛŒØª Ø¯Ø± Ø®Ø¨Ø±Ù†Ø§Ù…Ù‡">
<i class="bi bi-send"></i>
</button>
</div>
</div>
</div>
</div>
<div class="copyright">
<p>Â© Û±Û´Û°Û³ ØªÙ…Ø§Ù…ÛŒ Ø­Ù‚ÙˆÙ‚ Ø¨Ø±Ø§ÛŒ Ù¾Ù„ØªÙØ±Ù… <strong>Ù¾ÛŒÙ…Ø§Ù†â€ŒÛŒØ§Ø±</strong> (PeymanYar) Ù…Ø­ÙÙˆØ¸ Ø§Ø³Øª.</p>
<p class="mt-2">
<a href="#" style="color: #b0bec5; font-size: 0.8rem;">Ù‚ÙˆØ§Ù†ÛŒÙ† Ùˆ Ù…Ù‚Ø±Ø±Ø§Øª</a> | 
<a href="#" style="color: #b0bec5; font-size: 0.8rem;">Ø­Ø±ÛŒÙ… Ø®ØµÙˆØµÛŒ</a>
</p>
</div>
</div>
</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script type="module">
import { createClient } from 'https://esm.sh/@supabase/supabase-js@2'

const supabaseUrl = 'https://fycyznoykgxpaatjsawi.supabase.co'
const supabaseAnonKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZ5Y3l6bm95a2d4cGFhdGpzYXdpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzE2MDM0MjYsImV4cCI6MjA4NzE3OTQyNn0.fZQfDuaUW6jxQOF0be8eaK16mD-lHfPnyYht-0ryQSQ'

const supabase = createClient(supabaseUrl, supabaseAnonKey)
window.supabase = supabase

'use strict';
class PeymanyarApp {
constructor() {
this.currentPage = 'home';
this.employerCurrentStep = 1;
this.contractorCurrentStep = 1;
this.employerTotalSteps = 4;
this.contractorTotalSteps = 5;
this.assistantMessages = [];
this.userData = null;
this.heroSlideIndex = 0;
this.heroSlides = [];
this.heroSlideInterval = null;
this.isAdmin = false;
this.adminToken = null;
this.adminEmail = null;
this.allProjects = [];
this.init();
}

init() {
this.setupEventListeners();
this.setupForms();
this.setupAssistant();
this.animateCounters();
this.setupAccessibility();
this.loadUserData();
this.setupAdminSystem();
this.loadRealStats();
this.setupLoginForms();
this.setupPasswordValidation();
this.startHeroSlider(); // âœ… Ø§ÛŒÙ† Ø®Ø· Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯Ù‡
if (this.currentPage === 'projects') {
this.loadProjects();
}
}

setupEventListeners() {
window.addEventListener('popstate', (e) => {
if (e.state && e.state.page) {
this.showPage(e.state.page, false);
}
});
document.addEventListener('keydown', (e) => {
if (e.key === 'Escape') {
this.closeAllModals();
}
});
this.setupIntersectionObserver();
}
// ===== Ù…ØªØ¯ Ø¬Ø¯ÛŒØ¯ Ø¨Ø±Ø§ÛŒ Ø§Ø³Ù„Ø§ÛŒØ¯Ø± =====
startHeroSlider() {
  const slides = document.querySelectorAll('.hero-slide');
  const dots = document.querySelectorAll('.hero-slide-dot');
  
  if (slides.length === 0) return;
  
  // Ø§Ú¯Ø± interval Ù‚Ø¨Ù„ÛŒ Ù‡Ø³ØªØŒ Ù¾Ø§Ú©Ø´ Ú©Ù†
  if (this.heroSlideInterval) {
    clearInterval(this.heroSlideInterval);
  }
  
  this.heroSlideIndex = 0;
  
  // Ù‡Ø± Ûµ Ø«Ø§Ù†ÛŒÙ‡ Ø¹Ú©Ø³ Ø¹ÙˆØ¶ Ø´Ù‡
  this.heroSlideInterval = setInterval(() => {
    // Ù…Ø®ÙÛŒ Ú©Ø±Ø¯Ù† Ù‡Ù…Ù‡
    slides.forEach(slide => slide.classList.remove('active'));
    dots.forEach(dot => dot.classList.remove('active'));
    
    // Ø±ÙØªÙ† Ø¨Ù‡ Ø¨Ø¹Ø¯ÛŒ
    this.heroSlideIndex = (this.heroSlideIndex + 1) % slides.length;
    
    // Ù†Ù…Ø§ÛŒØ´ Ø¹Ú©Ø³ Ø¬Ø¯ÛŒØ¯
    slides[this.heroSlideIndex].classList.add('active');
    dots[this.heroSlideIndex].classList.add('active');
  }, 5000);
  
  // Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† event listener Ø¨Ø±Ø§ÛŒ Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§
  dots.forEach((dot, index) => {
    dot.addEventListener('click', () => {
      clearInterval(this.heroSlideInterval);
      
      slides.forEach(slide => slide.classList.remove('active'));
      dots.forEach(d => d.classList.remove('active'));
      
      this.heroSlideIndex = index;
      slides[index].classList.add('active');
      dots[index].classList.add('active');
      
      // restart interval
      this.startHeroSlider();
    });
  });
}

animateCounter(element, target) {
  let count = 0;
  const increment = target / 50;
  const step = () => {
    if (count < target) {
      count += increment;
      // ØªØ¨Ø¯ÛŒÙ„ Ø¨Ù‡ Ø¹Ø¯Ø¯ ÙØ§Ø±Ø³ÛŒ
      const persianNumber = Math.ceil(count).toLocaleString('fa-IR');
      element.textContent = persianNumber;
      requestAnimationFrame(step);
    } else {
      // ØªØ¨Ø¯ÛŒÙ„ Ø¹Ø¯Ø¯ Ù†Ù‡Ø§ÛŒÛŒ Ø¨Ù‡ ÙØ§Ø±Ø³ÛŒ
      const persianNumber = target.toLocaleString('fa-IR');
      // Ø§Ú¯Ù‡ Ø¯Ø±ØµØ¯ Ø¨Ø§Ø´Ù‡ØŒ Ø¹Ù„Ø§Ù…Øª Ø¯Ø±ØµØ¯ Ø±Ùˆ Ù‡Ù… Ø§Ø¶Ø§ÙÙ‡ Ú©Ù†
      element.textContent = persianNumber + (element.getAttribute('data-count') === '98' ? 'Ùª' : '');
    }
  };
  requestAnimationFrame(step);
}
showTermsModal() {
  const termsModal = new bootstrap.Modal(document.getElementById('termsModal'));
  termsModal.show();
  
  const employerTerms = document.getElementById('employerTerms');
  const contractorTerms = document.getElementById('contractorTerms');
  
  if (employerTerms) {
    window.tempEmployerTermsState = employerTerms.checked;
  }
  if (contractorTerms) {
    window.tempContractorTermsState = contractorTerms.checked;
  }
}

acceptTerms() {
  const employerTerms = document.getElementById('employerTerms');
  const contractorTerms = document.getElementById('contractorTerms');
  
  if (employerTerms) {
    employerTerms.checked = true;
    employerTerms.disabled = false;
  }
  if (contractorTerms) {
    contractorTerms.checked = true;
    contractorTerms.disabled = false;
  }
  
  delete window.tempEmployerTermsState;
  delete window.tempContractorTermsState;
  
  this.closeTermsModal();
  this.showToast('Ù‚ÙˆØ§Ù†ÛŒÙ† Ùˆ Ù…Ù‚Ø±Ø±Ø§Øª Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ù¾Ø°ÛŒØ±ÙØªÙ‡ Ø´Ø¯', 'success');
}

closeTermsModal() {
  const termsModal = bootstrap.Modal.getInstance(document.getElementById('termsModal'));
  if (termsModal) termsModal.hide();
  
  const employerTerms = document.getElementById('employerTerms');
  const contractorTerms = document.getElementById('contractorTerms');
  
  if (employerTerms && window.tempEmployerTermsState !== undefined) {
    employerTerms.checked = window.tempEmployerTermsState;
    employerTerms.disabled = !window.tempEmployerTermsState;
  }
  if (contractorTerms && window.tempContractorTermsState !== undefined) {
    contractorTerms.checked = window.tempContractorTermsState;
    contractorTerms.disabled = !window.tempContractorTermsState;
  }
}

async loadFullProfile() {
if (!this.userData || !this.userData.id) {
this.showToast('Ù„Ø·ÙØ§Ù‹ ÙˆØ§Ø±Ø¯ Ø´ÙˆÛŒØ¯', 'error');
this.showPage('login');
return;
}

try {
const { data: profile, error } = await supabase
.from('profiles')
.select('*')
.eq('user_id', this.userData.id)
.single();

if (error && error.code !== 'PGRST116') {
console.error('Ø®Ø·Ø§ Ø¯Ø± Ø¯Ø±ÛŒØ§ÙØª Ù¾Ø±ÙˆÙØ§ÛŒÙ„:', error);
}

const fullProfile = { ...this.userData, ...profile };
this.displayFullProfile(fullProfile);
  
} catch (error) {
console.error('Ø®Ø·Ø§:', error);
this.showToast('Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù¾Ø±ÙˆÙØ§ÛŒÙ„', 'error');
}
}

displayFullProfile(profile) {
document.getElementById('profileDisplayName').textContent = profile.full_name || profile.company_name || 'Ú©Ø§Ø±Ø¨Ø±';
document.getElementById('profileDisplayEmail').textContent = profile.email || '-';
document.getElementById('profileDisplayType').textContent = profile.user_type === 'employer' ? 'Ú©Ø§Ø±ÙØ±Ù…Ø§' : 'Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø±';
document.getElementById('profileDisplayAccountType').textContent = profile.account_type === 'individual' ? 'Ø´Ø®Øµ Ø­Ù‚ÛŒÙ‚ÛŒ' : 'Ø´Ø®Øµ Ø­Ù‚ÙˆÙ‚ÛŒ';
document.getElementById('profileDisplayFullName').textContent = profile.full_name || profile.company_name || '-';
document.getElementById('profileDisplayNationalId').textContent = profile.national_code || profile.company_id || '-';

document.getElementById('profileDisplayMobile').textContent = profile.phone || '-';
document.getElementById('profileDisplayPhone').textContent = profile.landline || '-';
document.getElementById('profileDisplayAddress').textContent = profile.address || '-';

const avatar = document.getElementById('profileAvatar');
if (avatar) {
avatar.textContent = (profile.full_name || profile.company_name || '?').charAt(0);
}

const companyFields = document.getElementById('profileCompanyFields');
if (companyFields) {
if (profile.account_type === 'company') {
companyFields.style.display = 'block';
document.getElementById('profileDisplayCompanyName').textContent = profile.company_name || '-';
document.getElementById('profileDisplayRegistrationNo').textContent = profile.registration_no || '-';
document.getElementById('profileDisplayCompanyType').textContent = profile.company_type || '-';
document.getElementById('profileDisplayWebsite').textContent = profile.website || '-';
document.getElementById('profileDisplayCompanyDesc').textContent = profile.company_description || '-';
} else {
companyFields.style.display = 'none';
}
}

const contractorFields = document.getElementById('contractorProfileFields');
if (contractorFields) {
if (profile.user_type === 'contractor') {
contractorFields.style.display = 'block';
document.getElementById('profileDisplayMainExpertise').textContent = profile.main_expertise || '-';
document.getElementById('profileDisplayStartYear').textContent = profile.start_year || '-';
document.getElementById('profileDisplayTeamSize').textContent = profile.team_size || '-';
document.getElementById('profileDisplayWorkArea').textContent = profile.work_area ? profile.work_area.join('ØŒ ') : '-';
document.getElementById('profileDisplayContractMethod').textContent = profile.contract_method || '-';
document.getElementById('profileDisplayInsurance').textContent = profile.insurance === 'yes' ? 'Ø¯Ø§Ø±Ø¯' : 'Ù†Ø¯Ø§Ø±Ø¯';
document.getElementById('profileDisplayEquipment').textContent = profile.equipment || '-';

this.displayProjects(profile.projects);
this.displayDocuments(profile.documents);

const verificationStatus = document.getElementById('profileVerificationStatus');
if (verificationStatus && profile.verification_status) {
verificationStatus.style.display = 'block';
const statusText = {
'pending': 'Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø± Ø¨Ø±Ø±Ø³ÛŒ',
'verified': 'ØªØ£ÛŒÛŒØ¯ Ø´Ø¯Ù‡',
'rejected': 'Ø±Ø¯ Ø´Ø¯Ù‡'
}[profile.verification_status] || profile.verification_status;
document.getElementById('profileVerificationText').textContent = statusText;
}
} else {
contractorFields.style.display = 'none';
const verificationStatus = document.getElementById('profileVerificationStatus');
if (verificationStatus) verificationStatus.style.display = 'none';
}
}
}

displayProjects(projects) {
const container = document.getElementById('profileDisplayProjects');
if (!container) return;

if (!projects || projects.length === 0) {
container.innerHTML = '<p class="text-muted">Ù¾Ø±ÙˆÚ˜Ù‡â€ŒØ§ÛŒ Ø«Ø¨Øª Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª.</p>';
return;
}

container.innerHTML = projects.map(project => `
<div class="col-md-6 mb-3">
<div class="border rounded p-3">
<h6>${project.name || 'Ø¨Ø¯ÙˆÙ† Ù†Ø§Ù…'}</h6>
<small class="text-muted d-block">Ø³Ø§Ù„: ${project.year || '-'}</small>
<small class="text-muted d-block">Ù…Ø´ØªØ±ÛŒ: ${project.client || '-'}</small>
</div>
</div>
`).join('');
}

displayDocuments(documents) {
const container = document.getElementById('profileDisplayDocuments');
if (!container) return;

if (!documents || documents.length === 0) {
container.innerHTML = '<p class="text-muted">Ù…Ø¯Ø±Ú©ÛŒ Ø¢Ù¾Ù„ÙˆØ¯ Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª.</p>';
return;
}

container.innerHTML = documents.map(doc => `
<span class="badge bg-light text-dark p-2">
<i class="bi bi-file-earmark-text me-1"></i>${doc.name}
</span>
`).join('');
}

populateEditYears() {
const yearSelect = document.getElementById('editStartYear');
if (!yearSelect) return;

yearSelect.innerHTML = '<option value="">Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</option>';
for (let year = 1403; year >= 1350; year--) {
const option = document.createElement('option');
option.value = year;
option.text = year;
yearSelect.appendChild(option);
}
}
addProjectToEdit() {
  const container = document.getElementById('editProjectsContainer');
  if (!container) return;

  const projectCount = container.children.length + 1;
  if (projectCount > 5) {
    this.showToast('Ø­Ø¯Ø§Ú©Ø«Ø± Ûµ Ù¾Ø±ÙˆÚ˜Ù‡ Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø§Ø¶Ø§ÙÙ‡ Ú©Ù†ÛŒØ¯.', 'error');
    return;
  }

  const projectDiv = document.createElement('div');
  projectDiv.className = 'card mb-3 project-card';
  projectDiv.innerHTML = `
  <div class="card-body">
    <div class="d-flex justify-content-between align-items-center mb-3">
      <h6 class="card-title mb-0">Ù¾Ø±ÙˆÚ˜Ù‡ ${projectCount}</h6>
      <button type="button" class="btn btn-sm btn-outline-danger" onclick="this.closest('.project-card').remove()">
        <i class="bi bi-trash"></i>
      </button>
    </div>
    <div class="row">
      <div class="col-md-4 mb-3">
        <label class="form-label">Ù†Ø§Ù… Ù¾Ø±ÙˆÚ˜Ù‡</label>
        <input type="text" class="form-control" name="editProjectName[]">
      </div>
      <div class="col-md-4 mb-3">
        <label class="form-label">Ø³Ø§Ù„ ØªØ­ÙˆÛŒÙ„</label>
        <input type="text" class="form-control" name="editProjectYear[]" placeholder="Ù…Ø«Ø§Ù„: 1402">
      </div>
      <div class="col-md-4 mb-3">
        <label class="form-label">Ù…Ø´ØªØ±ÛŒ</label>
        <input type="text" class="form-control" name="editProjectClient[]" placeholder="Ù†Ø§Ù… Ø´Ø±Ú©Øª ÛŒØ§ Ø´Ø®Øµ">
      </div>
    </div>
  </div>
  `;

  container.appendChild(projectDiv);
}
enableProfileEdit() {
const viewMode = document.getElementById('profileViewMode');
const editMode = document.getElementById('profileEditMode');
if (!viewMode || !editMode) return;

viewMode.style.display = 'none';
editMode.style.display = 'block';

if (document.getElementById('editFullName')) {
document.getElementById('editFullName').value = this.userData?.full_name || this.userData?.name || '';
}
if (document.getElementById('editNationalId')) {
document.getElementById('editNationalId').value = this.userData?.national_code || this.userData?.company_id || '';
}
if (document.getElementById('editEmail')) {
document.getElementById('editEmail').value = this.userData?.email || '';
}
if (document.getElementById('editMobile')) {
document.getElementById('editMobile').value = this.userData?.phone || this.userData?.mobile || '';
}
if (document.getElementById('editPhone')) {
document.getElementById('editPhone').value = this.userData?.landline || '';
}
if (document.getElementById('editAddress')) {
document.getElementById('editAddress').value = this.userData?.address || '';
}
if (document.getElementById('editPostalCode')) {
document.getElementById('editPostalCode').value = this.userData?.postal_code || '';
}
if (document.getElementById('editProvince')) {
document.getElementById('editProvince').value = this.userData?.province || '';
}
if (document.getElementById('editCity')) {
document.getElementById('editCity').value = this.userData?.city || '';
}

this.populateEditYears();

const companyFields = document.getElementById('editCompanyFields');
if (companyFields) {
if (this.userData?.account_type === 'company') {
companyFields.style.display = 'flex';
if (document.getElementById('editCompanyName')) {
document.getElementById('editCompanyName').value = this.userData?.company_name || '';
}
if (document.getElementById('editRegistrationNo')) {
document.getElementById('editRegistrationNo').value = this.userData?.registration_no || '';
}
if (document.getElementById('editCompanyType')) {
document.getElementById('editCompanyType').value = this.userData?.company_type || '';
}
if (document.getElementById('editWebsite')) {
document.getElementById('editWebsite').value = this.userData?.website || '';
}
if (document.getElementById('editCompanyDesc')) {
document.getElementById('editCompanyDesc').value = this.userData?.company_description || '';
}
} else {
companyFields.style.display = 'none';
}
}

const contractorFields = document.getElementById('editContractorFields');
const projectsSection = document.getElementById('editProjectsSection');
const documentsSection = document.getElementById('editDocumentsSection');

if (contractorFields && projectsSection && documentsSection) {
if (this.userData?.user_type === 'contractor') {
contractorFields.style.display = 'flex';
projectsSection.style.display = 'block';
documentsSection.style.display = 'block';

if (document.getElementById('editMainExpertise')) {
document.getElementById('editMainExpertise').value = this.userData?.main_expertise || '';
}
if (document.getElementById('editStartYear')) {
document.getElementById('editStartYear').value = this.userData?.start_year || '';
}
if (document.getElementById('editTeamSize')) {
document.getElementById('editTeamSize').value = this.userData?.team_size || '';
}
if (document.getElementById('editContractMethod')) {
document.getElementById('editContractMethod').value = this.userData?.contract_method || '';
}
if (document.getElementById('editInsurance')) {
document.getElementById('editInsurance').value = this.userData?.insurance || '';
}
if (document.getElementById('editEquipment')) {
document.getElementById('editEquipment').value = this.userData?.equipment || '';
}

this.displayEditProjects(this.userData?.projects);
} else {
contractorFields.style.display = 'none';
projectsSection.style.display = 'none';
documentsSection.style.display = 'none';
}
}
}

displayEditProjects(projects) {
const container = document.getElementById('editProjectsContainer');
if (!container) return;

container.innerHTML = '';

if (projects && projects.length > 0) {
projects.forEach((project, index) => {
const projectDiv = document.createElement('div');
projectDiv.className = 'card mb-3 project-card';
projectDiv.innerHTML = `
<div class="card-body">
<div class="d-flex justify-content-between align-items-center mb-3">
<h6 class="card-title mb-0">Ù¾Ø±ÙˆÚ˜Ù‡ ${index + 1}</h6>
<button type="button" class="btn btn-sm btn-outline-danger" onclick="this.closest('.project-card').remove()">
<i class="bi bi-trash"></i>
</button>
</div>
<div class="row">
<div class="col-md-4 mb-3">
<label class="form-label">Ù†Ø§Ù… Ù¾Ø±ÙˆÚ˜Ù‡</label>
<input type="text" class="form-control" name="editProjectName[]" value="${project.name || ''}">
</div>
<div class="col-md-4 mb-3">
<label class="form-label">Ø³Ø§Ù„ ØªØ­ÙˆÛŒÙ„</label>
<input type="text" class="form-control" name="editProjectYear[]" value="${project.year || ''}">
</div>
<div class="col-md-4 mb-3">
<label class="form-label">Ù…Ø´ØªØ±ÛŒ</label>
<input type="text" class="form-control" name="editProjectClient[]" value="${project.client || ''}">
</div>
</div>
</div>
`;
container.appendChild(projectDiv);
});
}
}

cancelProfileEdit() {
const viewMode = document.getElementById('profileViewMode');
const editMode = document.getElementById('profileEditMode');
if (viewMode && editMode) {
viewMode.style.display = 'block';
editMode.style.display = 'none';
}
this.loadFullProfile();
}

async saveProfileChanges() {
const updatedData = {
full_name: document.getElementById('editFullName')?.value,
phone: document.getElementById('editMobile')?.value,
landline: document.getElementById('editPhone')?.value,
address: document.getElementById('editAddress')?.value,
postal_code: document.getElementById('editPostalCode')?.value,
province: document.getElementById('editProvince')?.value,
city: document.getElementById('editCity')?.value,
national_code: document.getElementById('editNationalId')?.value,
};

if (updatedData.phone && !this.isValidMobile(updatedData.phone)) {
this.showToast('Ø´Ù…Ø§Ø±Ù‡ Ù…ÙˆØ¨Ø§ÛŒÙ„ Ù†Ø§Ù…Ø¹ØªØ¨Ø± Ø§Ø³Øª', 'error');
return;
}

if (this.userData?.account_type === 'company') {
updatedData.company_name = document.getElementById('editCompanyName')?.value;
updatedData.registration_no = document.getElementById('editRegistrationNo')?.value;
updatedData.company_type = document.getElementById('editCompanyType')?.value;
updatedData.website = document.getElementById('editWebsite')?.value;
updatedData.company_description = document.getElementById('editCompanyDesc')?.value;
}

if (this.userData?.user_type === 'contractor') {
updatedData.main_expertise = document.getElementById('editMainExpertise')?.value;
updatedData.start_year = document.getElementById('editStartYear')?.value;
updatedData.team_size = document.getElementById('editTeamSize')?.value;
updatedData.contract_method = document.getElementById('editContractMethod')?.value;
updatedData.insurance = document.getElementById('editInsurance')?.value;
updatedData.equipment = document.getElementById('editEquipment')?.value;

const projects = [];
const projectNames = document.querySelectorAll('input[name="editProjectName[]"]');
const projectYears = document.querySelectorAll('input[name="editProjectYear[]"]');
const projectClients = document.querySelectorAll('input[name="editProjectClient[]"]');

for (let i = 0; i < projectNames.length; i++) {
if (projectNames[i].value || projectYears[i].value || projectClients[i].value) {
projects.push({
name: projectNames[i].value,
year: projectYears[i].value,
client: projectClients[i].value
});
}
}
updatedData.projects = projects;
}

try {
const { error } = await supabase
.from('profiles')
.update(updatedData)
.eq('user_id', this.userData.id);

if (error) throw error;

this.userData = { ...this.userData, ...updatedData };
localStorage.setItem('peymanyar_user', JSON.stringify(this.userData));

this.showToast('Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø¨Ù‡â€ŒØ±ÙˆØ² Ø´Ø¯', 'success');

const viewMode = document.getElementById('profileViewMode');
const editMode = document.getElementById('profileEditMode');
if (viewMode && editMode) {
viewMode.style.display = 'block';
editMode.style.display = 'none';
}

this.loadFullProfile();

} catch (error) {
this.showToast('Ø®Ø·Ø§ Ø¯Ø± Ø°Ø®ÛŒØ±Ù‡ Ø§Ø·Ù„Ø§Ø¹Ø§Øª: ' + error.message, 'error');
}
}

setupForms() {
this.setupEmployerForm();
this.setupContractorForm();
this.setupValidation();
}

setupAssistant() {
this.loadAssistantMessages();
this.setupAssistantEvents();
}

setupAccessibility() {
this.setupFocusTrap();
this.addSkipToContentLink();
}

showPage(pageId, pushState = true) {
  document.querySelectorAll('.page-section').forEach(page => {
    page.classList.remove('active');
    page.setAttribute('aria-hidden', 'true');
    page.style.display = 'none';
  });
  
  const targetPage = document.getElementById(pageId);
  if (targetPage) {
    targetPage.classList.add('active');
    targetPage.style.display = 'block';
    targetPage.setAttribute('aria-hidden', 'false');
    window.scrollTo({ top: 0, behavior: 'smooth' });
    
    if (pushState) {
      history.pushState({ page: pageId }, '', `#${pageId}`);
    }
    
    this.currentPage = pageId;
    this.updateActiveLinks(pageId);
    this.dispatchPageChangeEvent(pageId);

    if (pageId === 'profile') {
      this.loadFullProfile();
    }
    
    if (pageId === 'projects') {
      this.loadProjects();
    }
  }
}

updateActiveLinks(pageId) {
document.querySelectorAll('.nav-link').forEach(link => {
link.classList.remove('active');
link.removeAttribute('aria-current');
});
const activeLink = document.querySelector(`[onclick*="${pageId}"]`);
if (activeLink) {
activeLink.classList.add('active');
activeLink.setAttribute('aria-current', 'page');
}
}

dispatchPageChangeEvent(pageId) {
const event = new CustomEvent('pageChanged', { detail: { pageId } });
window.dispatchEvent(event);
}

showMainPage() {
this.showPage('home');
}

showLogin() {
this.showPage('login');
}

showForgotPassword() {
this.showPage('forgotPassword');
}

toggleAssistant() {
const assistantWindow = document.getElementById('assistantWindow');
const toggleBtn = document.querySelector('.assistant-toggle');
if (assistantWindow.classList.contains('active')) {
assistantWindow.classList.remove('active');
assistantWindow.setAttribute('aria-hidden', 'true');
toggleBtn.setAttribute('aria-expanded', 'false');
} else {
assistantWindow.classList.add('active');
assistantWindow.setAttribute('aria-hidden', 'false');
toggleBtn.setAttribute('aria-expanded', 'true');
this.markAssistantAsRead();
setTimeout(() => {
document.getElementById('assistantInput')?.focus();
}, 100);
}
}

sendAssistantMessage() {
const input = document.getElementById('assistantInput');
const message = input.value.trim();
if (!message) return;
this.addAssistantMessage('user', message);
input.value = '';
setTimeout(() => {
this.generateAssistantResponse(message);
}, 1000);
}

addAssistantMessage(role, content) {
const container = document.getElementById('assistantMessages');
const messageDiv = document.createElement('div');
messageDiv.className = `message ${role}`;
messageDiv.innerHTML = `<div class="message-bubble">${this.sanitizeHTML(content)}</div>`;
container.appendChild(messageDiv);
container.scrollTop = container.scrollHeight;
this.assistantMessages.push({ role, content, timestamp: new Date().toISOString() });
this.saveAssistantMessages();
}

generateAssistantResponse(userMessage) {
const responses = {
'Ø«Ø¨Øª Ù†Ø§Ù…': 'Ø¨Ø±Ø§ÛŒ Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø§Ø² Ù…Ù†ÙˆÛŒ Ø¨Ø§Ù„Ø§ Ø±ÙˆÛŒ Ø¯Ú©Ù…Ù‡ "Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ú©Ø§Ø±ÙØ±Ù…Ø§" ÛŒØ§ "Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø±" Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯.',
'Ø«Ø¨Øªâ€ŒÙ†Ø§Ù…': 'Ø¨Ø±Ø§ÛŒ Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø§Ø² Ù…Ù†ÙˆÛŒ Ø¨Ø§Ù„Ø§ Ø±ÙˆÛŒ Ø¯Ú©Ù…Ù‡ "Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ú©Ø§Ø±ÙØ±Ù…Ø§" ÛŒØ§ "Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø±" Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯.',
'Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø±': 'Ø¨Ø±Ø§ÛŒ Ø¬Ø³ØªØ¬ÙˆÛŒ Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø± Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø¨Ù‡ ØµÙØ­Ù‡ "Ø¬Ø³ØªØ¬ÙˆÛŒ Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø±" Ù…Ø±Ø§Ø¬Ø¹Ù‡ Ú©Ù†ÛŒØ¯.',
'Ø¬Ø³ØªØ¬Ùˆ': 'Ø¨Ø±Ø§ÛŒ Ø¬Ø³ØªØ¬ÙˆÛŒ Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø± Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø¨Ù‡ ØµÙØ­Ù‡ "Ø¬Ø³ØªØ¬ÙˆÛŒ Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø±" Ù…Ø±Ø§Ø¬Ø¹Ù‡ Ú©Ù†ÛŒØ¯.',
'Ù‚ÛŒÙ…Øª': 'Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ùˆ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§ÙˆÙ„ÛŒÙ‡ Ø§Ø² Ù¾Ù„ØªÙØ±Ù… Ù¾ÛŒÙ…Ø§Ù†â€ŒÛŒØ§Ø± Ú©Ø§Ù…Ù„Ø§Ù‹ Ø±Ø§ÛŒÚ¯Ø§Ù† Ø§Ø³Øª.',
'Ù‡Ø²ÛŒÙ†Ù‡': 'Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ùˆ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§ÙˆÙ„ÛŒÙ‡ Ø§Ø² Ù¾Ù„ØªÙØ±Ù… Ù¾ÛŒÙ…Ø§Ù†â€ŒÛŒØ§Ø± Ú©Ø§Ù…Ù„Ø§Ù‹ Ø±Ø§ÛŒÚ¯Ø§Ù† Ø§Ø³Øª.',
'Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ': 'ØªÛŒÙ… Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ù…Ø§ Ø§Ø² Ø·Ø±ÛŒÙ‚ info@peymanyar.com Ø¯Ø± Ø¯Ø³ØªØ±Ø³ Ø§Ø³Øª.',
'ØªÙ…Ø§Ø³': 'Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø¨Ø§ Ø´Ù…Ø§Ø±Ù‡ Û°Û²Û±-Û±Û²Û³Û´ÛµÛ¶Û·Û¸ Ø¨Ø§ Ù…Ø§ ØªÙ…Ø§Ø³ Ø¨Ú¯ÛŒØ±ÛŒØ¯.'
};
let response = 'Ù…ØªÙˆØ¬Ù‡ Ø³ÙˆØ§Ù„ Ø´Ù…Ø§ Ù†Ø´Ø¯Ù…. Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø³ÙˆØ§Ù„ Ø®ÙˆØ¯ Ø±Ø§ Ø¨Ù‡ Ø´Ú©Ù„ Ø¯ÛŒÚ¯Ø±ÛŒ Ù…Ø·Ø±Ø­ Ú©Ù†ÛŒØ¯.';
for (const [keyword, answer] of Object.entries(responses)) {
if (userMessage.includes(keyword)) {
response = answer;
break;
}
}
this.addAssistantMessage('assistant', response);
}

loadAssistantMessages() {
const saved = localStorage.getItem('peymanyar_assistant_messages');
if (saved) {
this.assistantMessages = JSON.parse(saved);
this.renderAssistantMessages();
} else {
this.addAssistantMessage('assistant', 'Ø³Ù„Ø§Ù…! ğŸ‘‹ Ù…Ù† Ø¯Ø³ØªÛŒØ§Ø± Ù‡ÙˆØ´Ù…Ù†Ø¯ Ù¾ÛŒÙ…Ø§Ù†â€ŒÛŒØ§Ø± Ù‡Ø³ØªÙ…. Ú†Ø·ÙˆØ± Ù…ÛŒâ€ŒØªÙˆÙ†Ù… Ú©Ù…Ú©ØªÙˆÙ† Ú©Ù†Ù…ØŸ');
}
}

saveAssistantMessages() {
localStorage.setItem('peymanyar_assistant_messages', JSON.stringify(this.assistantMessages.slice(-50)));
}

renderAssistantMessages() {
const container = document.getElementById('assistantMessages');
container.innerHTML = '';
this.assistantMessages.forEach(msg => {
const messageDiv = document.createElement('div');
messageDiv.className = `message ${msg.role}`;
messageDiv.innerHTML = `<div class="message-bubble">${this.sanitizeHTML(msg.content)}</div>`;
container.appendChild(messageDiv);
});
}

markAssistantAsRead() {
const badge = document.getElementById('assistantNotification');
if (badge) {
badge.style.display = 'none';
}
}

setupLoginForms() {
const loginForm = document.getElementById('loginForm');
if (loginForm) {
loginForm.addEventListener('submit', (e) => {
e.preventDefault();
this.handleLogin();
});
}
const forgotForm = document.getElementById('forgotPasswordForm');
if (forgotForm) {
forgotForm.addEventListener('submit', (e) => {
e.preventDefault();
this.handleForgotPassword();
});
}
}

async handleLogin() {
const email = document.getElementById('loginEmail').value;
const password = document.getElementById('loginPassword').value;

try {
const { data, error } = await supabase.auth.signInWithPassword({
email, password
});
if (error) throw error;

const { data: profile, error: profileError } = await supabase
.from('profiles')
.select('*')
.eq('user_id', data.user.id)
.single();

if (profileError && profileError.code !== 'PGRST116') {
console.error('Ø®Ø·Ø§ Ø¯Ø± Ø¯Ø±ÛŒØ§ÙØª Ù¾Ø±ÙˆÙØ§ÛŒÙ„:', profileError);
}

this.userData = {
id: data.user.id,
email: data.user.email,
full_name: profile?.full_name || profile?.company_name || 'Ú©Ø§Ø±Ø¨Ø±',
phone: profile?.phone || '',
company_name: profile?.company_name || '',
address: profile?.address || '',
user_type: profile?.user_type || 'employer',
account_type: profile?.account_type || 'individual'
};
localStorage.setItem('peymanyar_user', JSON.stringify(this.userData));
this.showToast('ÙˆØ±ÙˆØ¯ Ù…ÙˆÙÙ‚ÛŒØªâ€ŒØ¢Ù…ÛŒØ² Ø¨ÙˆØ¯', 'success');
this.showPage('home');
this.checkAdminStatus();
} catch (error) {
this.showToast('Ø§ÛŒÙ…ÛŒÙ„ ÛŒØ§ Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø§Ø´ØªØ¨Ø§Ù‡ Ø§Ø³Øª', 'error');
}
}

handleForgotPassword() {
const email = document.getElementById('forgotEmail')?.value || '';
if (!email) {
this.showToast('Ù„Ø·ÙØ§Ù‹ Ø§ÛŒÙ…ÛŒÙ„ Ø®ÙˆØ¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯', 'error');
return;
}
this.showToast(`Ù„ÛŒÙ†Ú© Ø¨Ø§Ø²ÛŒØ§Ø¨ÛŒ Ø¨Ù‡ ${email} Ø§Ø±Ø³Ø§Ù„ Ø´Ø¯`, 'success');
setTimeout(() => {
this.showPage('login');
}, 2000);
}

togglePasswordVisibility(id) {
const input = document.getElementById(id);
if (input.type === 'password') {
input.type = 'text';
} else {
input.type = 'password';
}
}

setupPasswordValidation() {
  const employerPassword = document.getElementById('employerPassword');
  const employerConfirm = document.getElementById('employerConfirmPassword');
  
  if (employerPassword && employerConfirm) {
    const checkEmployerMatch = () => {
      if (employerConfirm.value && employerPassword.value !== employerConfirm.value) {
        employerConfirm.classList.add('is-invalid');
        let feedback = document.getElementById('employerConfirmFeedback');
        if (!feedback) {
          feedback = document.createElement('div');
          feedback.id = 'employerConfirmFeedback';
          feedback.className = 'invalid-feedback';
          employerConfirm.parentNode.appendChild(feedback);
        }
        feedback.textContent = 'Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ùˆ ØªÚ©Ø±Ø§Ø± Ø¢Ù† ÛŒÚ©Ø³Ø§Ù† Ù†ÛŒØ³ØªÙ†Ø¯';
        feedback.style.display = 'block';
      } else {
        employerConfirm.classList.remove('is-invalid');
        const feedback = document.getElementById('employerConfirmFeedback');
        if (feedback) feedback.style.display = 'none';
      }
    };
    
    employerPassword.addEventListener('keyup', checkEmployerMatch);
    employerConfirm.addEventListener('keyup', checkEmployerMatch);
  }
  
  const contractorPassword = document.getElementById('contractorPassword');
  const contractorConfirm = document.getElementById('contractorConfirmPassword');
  
  if (contractorPassword && contractorConfirm) {
    const checkContractorMatch = () => {
      if (contractorConfirm.value && contractorPassword.value !== contractorConfirm.value) {
        contractorConfirm.classList.add('is-invalid');
        let feedback = document.getElementById('contractorConfirmFeedback');
        if (!feedback) {
          feedback = document.createElement('div');
          feedback.id = 'contractorConfirmFeedback';
          feedback.className = 'invalid-feedback';
          contractorConfirm.parentNode.appendChild(feedback);
        }
        feedback.textContent = 'Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ùˆ ØªÚ©Ø±Ø§Ø± Ø¢Ù† ÛŒÚ©Ø³Ø§Ù† Ù†ÛŒØ³ØªÙ†Ø¯';
        feedback.style.display = 'block';
      } else {
        contractorConfirm.classList.remove('is-invalid');
        const feedback = document.getElementById('contractorConfirmFeedback');
        if (feedback) feedback.style.display = 'none';
      }
    };
    
    contractorPassword.addEventListener('keyup', checkContractorMatch);
    contractorConfirm.addEventListener('keyup', checkContractorMatch);
  }
}
setupEmployerForm() {
const accountTypeSelect = document.getElementById('employerAccountType');
if (accountTypeSelect) {
accountTypeSelect.addEventListener('change', () => this.updateEmployerFields());
this.updateEmployerFields();
}
document.getElementById('employerNextBtn').addEventListener('click', () => this.nextEmployerStep());
document.getElementById('employerPrevBtn').addEventListener('click', () => this.prevEmployerStep());
document.getElementById('employerForm').addEventListener('submit', (e) => this.submitEmployerForm(e));
}

updateEmployerFields() {
const accountType = document.getElementById('employerAccountType').value;
const dynamicFields = document.getElementById('employerDynamicFields');
const companyFields = document.getElementById('employerCompanyFields');
if (!dynamicFields) return;
dynamicFields.innerHTML = '';
if (accountType === 'individual') {
dynamicFields.innerHTML = `
<div class="row">
<div class="col-md-6 mb-3">
<label for="employerFullName" class="form-label required">Ù†Ø§Ù… Ùˆ Ù†Ø§Ù… Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ</label>
<input type="text" class="form-control" id="employerFullName" required>
<div class="invalid-feedback">Ù„Ø·ÙØ§Ù‹ Ù†Ø§Ù… Ùˆ Ù†Ø§Ù… Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯</div>
</div>
<div class="col-md-6 mb-3">
<label for="employerNationalCode" class="form-label required">Ú©Ø¯ Ù…Ù„ÛŒ</label>
<input type="text" class="form-control" id="employerNationalCode" required maxlength="10">
<div class="invalid-feedback">Ù„Ø·ÙØ§Ù‹ Ú©Ø¯ Ù…Ù„ÛŒ Ù…Ø¹ØªØ¨Ø± ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯</div>
</div>
</div>
<div class="row">
<div class="col-md-6 mb-3">
<label for="employerEmail" class="form-label required">Ø§ÛŒÙ…ÛŒÙ„</label>
<input type="email" class="form-control" id="employerEmail" required>
<div class="invalid-feedback">Ù„Ø·ÙØ§Ù‹ Ø§ÛŒÙ…ÛŒÙ„ Ù…Ø¹ØªØ¨Ø± ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯</div>
</div>
<div class="col-md-6 mb-3">
<label for="employerPassword" class="form-label required">Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±</label>
<input type="password" class="form-control" id="employerPassword" required>
<div class="invalid-feedback">Ù„Ø·ÙØ§Ù‹ Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯</div>
</div>
<div class="col-md-6 mb-3">
  <label for="employerConfirmPassword" class="form-label required">ØªÚ©Ø±Ø§Ø± Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±</label>
  <input type="password" class="form-control" id="employerConfirmPassword" required>
  <div class="invalid-feedback" id="employerConfirmFeedback"></div>
</div>
</div>
`;
if (companyFields) companyFields.style.display = 'none';
} else if (accountType === 'company') {
dynamicFields.innerHTML = `
<div class="row">
<div class="col-md-6 mb-3">
<label for="employerCompanyName" class="form-label required">Ù†Ø§Ù… Ø´Ø±Ú©Øª/Ù…Ø¤Ø³Ø³Ù‡</label>
<input type="text" class="form-control" id="employerCompanyName" required>
<div class="invalid-feedback">Ù„Ø·ÙØ§Ù‹ Ù†Ø§Ù… Ø´Ø±Ú©Øª Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯</div>
</div>
<div class="col-md-6 mb-3">
<label for="employerManagerName" class="form-label required">Ù†Ø§Ù… Ù…Ø¯ÛŒØ±Ø¹Ø§Ù…Ù„</label>
<input type="text" class="form-control" id="employerManagerName" required>
<div class="invalid-feedback">Ù„Ø·ÙØ§Ù‹ Ù†Ø§Ù… Ù…Ø¯ÛŒØ±Ø¹Ø§Ù…Ù„ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯</div>
</div>
</div>
<div class="row">
<div class="col-md-6 mb-3">
<label for="employerEmail" class="form-label required">Ø§ÛŒÙ…ÛŒÙ„</label>
<input type="email" class="form-control" id="employerEmail" required>
<div class="invalid-feedback">Ù„Ø·ÙØ§Ù‹ Ø§ÛŒÙ…ÛŒÙ„ Ù…Ø¹ØªØ¨Ø± ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯</div>
</div>
<div class="col-md-6 mb-3">
<label for="employerPassword" class="form-label required">Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±</label>
<input type="password" class="form-control" id="employerPassword" required>
<div class="invalid-feedback">Ù„Ø·ÙØ§Ù‹ Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯</div>
</div>
<div class="col-md-6 mb-3">
<label for="employerConfirmPassword" class="form-label required">ØªÚ©Ø±Ø§Ø± Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±</label>
<input type="password" class="form-control" id="employerConfirmPassword" required>
<div class="invalid-feedback">Ù„Ø·ÙØ§Ù‹ ØªÚ©Ø±Ø§Ø± Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯</div>
</div>
</div>
`;
if (companyFields) companyFields.style.display = 'block';
}
}

nextEmployerStep() {
if (this.validateEmployerStep(this.employerCurrentStep)) {
if (this.employerCurrentStep < this.employerTotalSteps) {
document.getElementById(`employerSection${this.employerCurrentStep}`).style.display = 'none';
this.employerCurrentStep++;
document.getElementById(`employerSection${this.employerCurrentStep}`).style.display = 'block';
this.updateEmployerNavigation();
this.updateEmployerSummary();
}
}
}

prevEmployerStep() {
if (this.employerCurrentStep > 1) {
document.getElementById(`employerSection${this.employerCurrentStep}`).style.display = 'none';
this.employerCurrentStep--;
document.getElementById(`employerSection${this.employerCurrentStep}`).style.display = 'block';
this.updateEmployerNavigation();
}
}

validateEmployerStep(step) {
  let isValid = true;
  this.clearValidationErrors();

  switch(step) {
    case 1:
      const accountType = document.getElementById('employerAccountType').value;
      const email = document.getElementById('employerEmail').value;
      const password = document.getElementById('employerPassword').value;
      const confirmPassword = document.getElementById('employerConfirmPassword').value;
      
      if (!accountType) {
        this.showValidationError('employerAccountType', 'Ù„Ø·ÙØ§Ù‹ Ù†ÙˆØ¹ Ø´Ø®ØµÛŒØª Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯');
        isValid = false;
      }
      
      if (!email || !this.isValidEmail(email)) {
        this.showValidationError('employerEmail', 'Ù„Ø·ÙØ§Ù‹ Ø§ÛŒÙ…ÛŒÙ„ Ù…Ø¹ØªØ¨Ø± ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯');
        isValid = false;
      }
      
      if (!password) {
        this.showValidationError('employerPassword', 'Ù„Ø·ÙØ§Ù‹ Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯');
        isValid = false;
      }
      
      if (!confirmPassword) {
        this.showValidationError('employerConfirmPassword', 'Ù„Ø·ÙØ§Ù‹ ØªÚ©Ø±Ø§Ø± Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯');
        isValid = false;
      }
      
      if (password && confirmPassword && password !== confirmPassword) {
        this.showValidationError('employerConfirmPassword', 'Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ùˆ ØªÚ©Ø±Ø§Ø± Ø¢Ù† ÛŒÚ©Ø³Ø§Ù† Ù†ÛŒØ³ØªÙ†Ø¯');
        isValid = false;
      }
      
      if (accountType === 'individual') {
        const fullName = document.getElementById('employerFullName')?.value;
        const nationalCode = document.getElementById('employerNationalCode')?.value;
        
        if (!fullName) {
          this.showValidationError('employerFullName', 'Ù„Ø·ÙØ§Ù‹ Ù†Ø§Ù… Ùˆ Ù†Ø§Ù… Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯');
          isValid = false;
        }
        
        if (!nationalCode || nationalCode.length !== 10) {
          this.showValidationError('employerNationalCode', 'Ù„Ø·ÙØ§Ù‹ Ú©Ø¯ Ù…Ù„ÛŒ Ù…Ø¹ØªØ¨Ø± ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯');
          isValid = false;
        }
      } else if (accountType === 'company') {
        const companyName = document.getElementById('employerCompanyName')?.value;
        const managerName = document.getElementById('employerManagerName')?.value;
        
        if (!companyName) {
          this.showValidationError('employerCompanyName', 'Ù„Ø·ÙØ§Ù‹ Ù†Ø§Ù… Ø´Ø±Ú©Øª Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯');
          isValid = false;
        }
        
        if (!managerName) {
          this.showValidationError('employerManagerName', 'Ù„Ø·ÙØ§Ù‹ Ù†Ø§Ù… Ù…Ø¯ÛŒØ±Ø¹Ø§Ù…Ù„ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯');
          isValid = false;
        }
      }
      
      if (!isValid) return false;
      break;

    case 2:
      const mobile = document.getElementById('employerMobile').value;
      const address = document.getElementById('employerAddress').value;
      
      if (!mobile || !this.isValidMobile(mobile)) {
        this.showValidationError('employerMobile', 'Ù„Ø·ÙØ§Ù‹ Ø´Ù…Ø§Ø±Ù‡ Ù…ÙˆØ¨Ø§ÛŒÙ„ Ù…Ø¹ØªØ¨Ø± ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯');
        isValid = false;
      }
      
      if (!address) {
        this.showValidationError('employerAddress', 'Ù„Ø·ÙØ§Ù‹ Ø¢Ø¯Ø±Ø³ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯');
        isValid = false;
      }
      
      const accType = document.getElementById('employerAccountType').value;
      if (accType === 'company') {
        const companyId = document.getElementById('employerCompanyId')?.value;
        const registrationNo = document.getElementById('employerRegistrationNo')?.value;
        const companyType = document.getElementById('employerCompanyType')?.value;
        
        if (!companyId) {
          this.showValidationError('employerCompanyId', 'Ù„Ø·ÙØ§Ù‹ Ø´Ù†Ø§Ø³Ù‡ Ù…Ù„ÛŒ Ø´Ø±Ú©Øª Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯');
          isValid = false;
        }
        
        if (!registrationNo) {
          this.showValidationError('employerRegistrationNo', 'Ù„Ø·ÙØ§Ù‹ Ø´Ù…Ø§Ø±Ù‡ Ø«Ø¨Øª Ø´Ø±Ú©Øª Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯');
          isValid = false;
        }
        
        if (!companyType) {
          this.showValidationError('employerCompanyType', 'Ù„Ø·ÙØ§Ù‹ Ù†ÙˆØ¹ ÙØ¹Ø§Ù„ÛŒØª Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯');
          isValid = false;
        }
      }
      
      if (!isValid) return false;
      break;

    case 3:
      const projectTypes = document.querySelectorAll('input[name="projectType"]:checked');
      if (projectTypes.length === 0) {
        this.showToast('Ù„Ø·ÙØ§Ù‹ Ø­Ø¯Ø§Ù‚Ù„ ÛŒÚ© Ù†ÙˆØ¹ Ù¾Ø±ÙˆÚ˜Ù‡ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯', 'error');
        isValid = false;
      }
      
      if (!isValid) return false;
      break;
  }
  
  return isValid;
}

updateEmployerNavigation() {
const prevBtn = document.getElementById('employerPrevBtn');
const nextBtn = document.getElementById('employerNextBtn');
const submitBtn = document.getElementById('employerSubmitBtn');
if (this.employerCurrentStep === 1) {
prevBtn.style.display = 'none';
} else {
prevBtn.style.display = 'block';
}
if (this.employerCurrentStep === this.employerTotalSteps) {
nextBtn.style.display = 'none';
submitBtn.style.display = 'block';
} else {
nextBtn.style.display = 'block';
submitBtn.style.display = 'none';
}
}

updateEmployerSummary() {
if (this.employerCurrentStep === 4) {
const accountType = document.getElementById('employerAccountType').value;
let name = '';
let identifier = '';
if (accountType === 'individual') {
name = document.getElementById('employerFullName')?.value || '-';
identifier = document.getElementById('employerNationalCode')?.value || '-';
} else {
name = document.getElementById('employerCompanyName')?.value || '-';
identifier = document.getElementById('employerCompanyId')?.value || '-';
}
const email = document.getElementById('employerEmail')?.value || '-';
const mobile = document.getElementById('employerMobile')?.value || '-';
const address = document.getElementById('employerAddress')?.value || '-';
const selectedProjects = [];
document.querySelectorAll('input[name="projectType"]:checked').forEach(cb => {
selectedProjects.push(cb.nextElementSibling.textContent);
});
const summaryHtml = `
<div class="row">
<div class="col-md-6">
<p><strong>Ù†Ø§Ù…:</strong> ${name}</p>
<p><strong>${accountType === 'individual' ? 'Ú©Ø¯ Ù…Ù„ÛŒ' : 'Ø´Ù†Ø§Ø³Ù‡ Ù…Ù„ÛŒ'}:</strong> ${identifier}</p>
<p><strong>Ø§ÛŒÙ…ÛŒÙ„:</strong> ${email}</p>
</div>
<div class="col-md-6">
<p><strong>ØªÙ„ÙÙ† Ù‡Ù…Ø±Ø§Ù‡:</strong> ${mobile}</p>
<p><strong>Ø¢Ø¯Ø±Ø³:</strong> ${address}</p>
<p><strong>Ù†ÙˆØ¹ Ù¾Ø±ÙˆÚ˜Ù‡:</strong> ${selectedProjects.join('ØŒ ') || '-'}</p>
</div>
</div>
`;
document.getElementById('employerSummary').innerHTML = summaryHtml;
}
}

async submitEmployerForm(e) {
  e.preventDefault();

  if (!this.validateEmployerStep(this.employerCurrentStep)) {
    return;
  }

  const terms = document.getElementById('employerTerms').checked;
  if (!terms) {
    this.showToast('Ù„Ø·ÙØ§Ù‹ Ø¨Ø§ Ù‚ÙˆØ§Ù†ÛŒÙ† Ùˆ Ù…Ù‚Ø±Ø±Ø§Øª Ù…ÙˆØ§ÙÙ‚Øª Ú©Ù†ÛŒØ¯.', 'error');
    return;
  }

  const accountType = document.getElementById('employerAccountType').value;
  const email = document.getElementById('employerEmail').value;
  const password = document.getElementById('employerPassword').value;
  const mobile = document.getElementById('employerMobile').value;
  const address = document.getElementById('employerAddress').value;

  const submitBtn = document.getElementById('employerSubmitBtn');
  const originalText = submitBtn.innerHTML;
  submitBtn.innerHTML = '<span class="spinner-border spinner-border-sm me-2"></span>Ø¯Ø± Ø­Ø§Ù„ Ø«Ø¨Øªâ€ŒÙ†Ø§Ù…...';
  submitBtn.disabled = true;

  try {
    const { data: authData, error: authError } = await supabase.auth.signUp({
      email,
      password,
      options: {
        emailRedirectTo: window.location.origin + '/login',
        data: {
          user_type: 'employer',
          account_type: accountType
        }
      }
    });

    if (authError) {
      console.warn('Ø®Ø·Ø§ÛŒ Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ø¯Ø± Auth:', authError);
      
      if (authError.status === 500 || authError.message.includes('confirmation email')) {
        this.showToast('Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯!', 'success');
        
        const tempUserId = 'temp_' + Date.now() + '_' + Math.random().toString(36).substr(2, 5);
        
        let fullName = '';
        let nationalCode = '';
        let companyName = '';
        let companyId = '';
        
        if (accountType === 'individual') {
          fullName = document.getElementById('employerFullName')?.value || 'Ú©Ø§Ø±Ø¨Ø±';
          nationalCode = document.getElementById('employerNationalCode')?.value || '0000000000';
        } else {
          companyName = document.getElementById('employerCompanyName')?.value || 'Ø´Ø±Ú©Øª';
          companyId = document.getElementById('employerCompanyId')?.value || '000000';
        }
        
        const { error: profileError } = await supabase
          .from('profiles')
          .insert([{
            user_id: tempUserId,
            email: email,
            user_type: 'employer',
            account_type: accountType,
            phone: mobile,
            address: address,
            full_name: fullName,
            national_code: nationalCode,
            company_name: companyName,
            company_id: companyId,
            created_at: new Date().toISOString(),
            terms_accepted_at: terms ? new Date().toISOString() : null,
            terms_version: '1.0'
          }]);

        if (profileError) {
          console.error('Ø®Ø·Ø§ÛŒ Ù¾Ø±ÙˆÙØ§ÛŒÙ„:', profileError);
        }

        this.userData = {
          id: tempUserId,
          email: email,
          full_name: fullName || companyName,
          phone: mobile,
          user_type: 'employer',
          account_type: accountType,
          terms_accepted: true
        };
        
        this.saveUserData(this.userData);

        setTimeout(() => {
          this.showPage('home');
        }, 1500);
        return;
      } else {
        throw authError;
      }
    }

    if (!authData || !authData.user) {
      throw new Error('Ø®Ø·Ø§ Ø¯Ø± Ø«Ø¨Øªâ€ŒÙ†Ø§Ù…');
    }

    let fullName = '';
    let nationalCode = '';
    let companyName = '';
    let companyId = '';
    
    if (accountType === 'individual') {
      fullName = document.getElementById('employerFullName')?.value || '';
      nationalCode = document.getElementById('employerNationalCode')?.value || '';
    } else {
      companyName = document.getElementById('employerCompanyName')?.value || '';
      companyId = document.getElementById('employerCompanyId')?.value || '';
    }

    const { data: existingProfile } = await supabase
      .from('profiles')
      .select('user_id')
      .eq('user_id', authData.user.id)
      .single();

    if (existingProfile) {
      const { error: updateError } = await supabase
        .from('profiles')
        .update({
          user_type: 'employer',
          account_type: accountType,
          phone: mobile,
          address: address,
          full_name: fullName,
          national_code: nationalCode,
          company_name: companyName,
          company_id: companyId,
          terms_accepted_at: terms ? new Date().toISOString() : null,
          terms_version: '1.0'
        })
        .eq('user_id', authData.user.id);

      if (updateError) {
        console.error('Ø®Ø·Ø§ Ø¯Ø± Ø¢Ù¾Ø¯ÛŒØª Ù¾Ø±ÙˆÙØ§ÛŒÙ„:', updateError);
      }
    } else {
      const { error: insertError } = await supabase
        .from('profiles')
        .insert([{
          user_id: authData.user.id,
          email: email,
          user_type: 'employer',
          account_type: accountType,
          phone: mobile,
          address: address,
          full_name: fullName,
          national_code: nationalCode,
          company_name: companyName,
          company_id: companyId,
          created_at: new Date().toISOString(),
          terms_accepted_at: terms ? new Date().toISOString() : null,
          terms_version: '1.0'
        }]);

      if (insertError) {
        console.error('Ø®Ø·Ø§ Ø¯Ø± Ø§ÛŒØ¬Ø§Ø¯ Ù¾Ø±ÙˆÙØ§ÛŒÙ„:', insertError);
      }
    }

    this.showToast('Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ú©Ø§Ø±ÙØ±Ù…Ø§ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯!', 'success');

    this.userData = {
      id: authData.user.id,
      email: email,
      full_name: fullName || companyName,
      phone: mobile,
      user_type: 'employer',
      account_type: accountType,
      terms_accepted: true
    };
    
    this.saveUserData(this.userData);

    setTimeout(() => {
      this.showPage('home');
    }, 1500);

  } catch (error) {
    console.error('Ø®Ø·Ø§ÛŒ Ø«Ø¨Øªâ€ŒÙ†Ø§Ù…:', error);
    this.showToast('Ø®Ø·Ø§ Ø¯Ø± Ø«Ø¨Øªâ€ŒÙ†Ø§Ù…: ' + error.message, 'error');
  } finally {
    submitBtn.innerHTML = originalText;
    submitBtn.disabled = false;
  }
}

setupContractorForm() {
  this.populateYearSelect('startYear', 1350, 1403);
  document.getElementById('accountType').addEventListener('change', () => this.updateContractorFields());
  document.getElementById('mainExpertise').addEventListener('change', () => this.updateSubExpertise());
  document.getElementById('workArea').addEventListener('change', (e) => this.handleWorkAreaSelection(e));
  document.getElementById('radius').addEventListener('input', (e) => {
    document.getElementById('radiusValue').textContent = e.target.value + ' Ú©ÛŒÙ„ÙˆÙ…ØªØ±';
  });
  document.getElementById('areaUnit').addEventListener('change', () => this.updateAreaUnitLabel());
  document.getElementById('docUploadArea').addEventListener('click', () => {
    document.getElementById('documentUpload').click();
  });
  document.getElementById('documentUpload').addEventListener('change', (e) => this.handleFileUpload(e));
  document.getElementById('addProject').addEventListener('click', () => this.addProject());
  document.getElementById('insurance').addEventListener('change', (e) => {
    const expiryField = document.getElementById('insuranceExpiryField');
    if (e.target.value === 'yes') {
      expiryField.style.display = 'block';
      expiryField.classList.add('show');
    } else {
      expiryField.style.display = 'none';
      expiryField.classList.remove('show');
    }
  });
  document.getElementById('nextBtn').addEventListener('click', () => this.nextContractorStep());
  document.getElementById('prevBtn').addEventListener('click', () => this.prevContractorStep());
  document.getElementById('contractorForm').addEventListener('submit', (e) => this.submitContractorForm(e));
  this.updateContractorFields();
  this.updateContractorNavigation();
}

updateContractorFields() {
  const accountType = document.getElementById('accountType').value;
  const dynamicFields = document.getElementById('dynamicFields');
  if (!dynamicFields) return;
  dynamicFields.innerHTML = '';
  
  if (accountType === 'individual') {
    dynamicFields.innerHTML = `
    <div class="row">
      <div class="col-md-6 mb-3">
        <label for="fullName" class="form-label required">Ù†Ø§Ù… Ùˆ Ù†Ø§Ù… Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ</label>
        <input type="text" class="form-control" id="fullName" required>
        <div class="invalid-feedback">Ù„Ø·ÙØ§Ù‹ Ù†Ø§Ù… Ùˆ Ù†Ø§Ù… Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯</div>
      </div>
      <div class="col-md-6 mb-3">
        <label for="nationalCode" class="form-label required">Ú©Ø¯ Ù…Ù„ÛŒ</label>
        <input type="text" class="form-control" id="nationalCode" required maxlength="10">
        <div class="invalid-feedback">Ù„Ø·ÙØ§Ù‹ Ú©Ø¯ Ù…Ù„ÛŒ Ù…Ø¹ØªØ¨Ø± ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯</div>
      </div>
    </div>
    <div class="row">
      <div class="col-md-6 mb-3">
        <label for="contractorEmail" class="form-label required">Ø§ÛŒÙ…ÛŒÙ„</label>
        <input type="email" class="form-control" id="contractorEmail" required>
        <div class="invalid-feedback">Ù„Ø·ÙØ§Ù‹ Ø§ÛŒÙ…ÛŒÙ„ Ù…Ø¹ØªØ¨Ø± ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯</div>
      </div>
      <div class="col-md-6 mb-3">
        <label for="contractorPassword" class="form-label required">Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±</label>
        <input type="password" class="form-control" id="contractorPassword" required>
        <div class="invalid-feedback">Ù„Ø·ÙØ§Ù‹ Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯</div>
      </div>
      <div class="col-md-6 mb-3">
  <label for="contractorConfirmPassword" class="form-label required">ØªÚ©Ø±Ø§Ø± Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±</label>
  <input type="password" class="form-control" id="contractorConfirmPassword" required>
  <div class="invalid-feedback" id="contractorConfirmFeedback"></div>
</div>
    </div>
    `;
  } else if (accountType === 'company') {
    dynamicFields.innerHTML = `
    <div class="row">
      <div class="col-md-6 mb-3">
        <label for="companyName" class="form-label required">Ù†Ø§Ù… Ø´Ø±Ú©Øª/Ù…Ø¤Ø³Ø³Ù‡</label>
        <input type="text" class="form-control" id="companyName" required>
        <div class="invalid-feedback">Ù„Ø·ÙØ§Ù‹ Ù†Ø§Ù… Ø´Ø±Ú©Øª Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯</div>
      </div>
      <div class="col-md-6 mb-3">
        <label for="companyId" class="form-label required">Ø´Ù†Ø§Ø³Ù‡ Ù…Ù„ÛŒ Ø´Ø±Ú©Øª</label>
        <input type="text" class="form-control" id="companyId" required>
        <div class="invalid-feedback">Ù„Ø·ÙØ§Ù‹ Ø´Ù†Ø§Ø³Ù‡ Ù…Ù„ÛŒ Ø´Ø±Ú©Øª Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯</div>
      </div>
    </div>
    <div class="row">
      <div class="col-md-6 mb-3">
        <label for="contractorEmail" class="form-label required">Ø§ÛŒÙ…ÛŒÙ„</label>
        <input type="email" class="form-control" id="contractorEmail" required>
        <div class="invalid-feedback">Ù„Ø·ÙØ§Ù‹ Ø§ÛŒÙ…ÛŒÙ„ Ù…Ø¹ØªØ¨Ø± ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯</div>
      </div>
      <div class="col-md-6 mb-3">
        <label for="contractorPassword" class="form-label required">Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±</label>
        <input type="password" class="form-control" id="contractorPassword" required>
        <div class="invalid-feedback">Ù„Ø·ÙØ§Ù‹ Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯</div>
      </div>
      <div class="col-md-6 mb-3">
        <label for="contractorConfirmPassword" class="form-label required">ØªÚ©Ø±Ø§Ø± Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±</label>
        <input type="password" class="form-control" id="contractorConfirmPassword" required>
        <div class="invalid-feedback">Ù„Ø·ÙØ§Ù‹ ØªÚ©Ø±Ø§Ø± Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯</div>
      </div>
    </div>
    `;
  }
}

async submitContractorForm(e) {
  e.preventDefault();

  if (!this.validateContractorStep(this.contractorCurrentStep)) {
    return;
  }

  const terms = document.getElementById('contractorTerms').checked;
  if (!terms) {
    this.showToast('Ù„Ø·ÙØ§Ù‹ Ø¨Ø§ Ù‚ÙˆØ§Ù†ÛŒÙ† Ùˆ Ù…Ù‚Ø±Ø±Ø§Øª Ù…ÙˆØ§ÙÙ‚Øª Ú©Ù†ÛŒØ¯.', 'error');
    return;
  }

  const accountType = document.getElementById('accountType').value;
  const email = document.getElementById('contractorEmail').value;
  const password = document.getElementById('contractorPassword').value;
  const mobile = document.getElementById('mobile').value;
  const contactPerson = document.getElementById('contactPerson').value;
  const mainExpertise = document.getElementById('mainExpertise').value;
  const phone = document.getElementById('phone')?.value || '';

  const submitBtn = document.getElementById('submitBtn');
  const originalText = submitBtn.innerHTML;
  submitBtn.innerHTML = '<span class="spinner-border spinner-border-sm me-2"></span>Ø¯Ø± Ø­Ø§Ù„ Ø«Ø¨Øªâ€ŒÙ†Ø§Ù…...';
  submitBtn.disabled = true;

  try {
    const { data: authData, error: authError } = await supabase.auth.signUp({
      email,
      password,
      options: {
        emailRedirectTo: window.location.origin + '/login',
        data: {
          user_type: 'contractor',
          account_type: accountType
        }
      }
    });

    if (authError) {
      console.warn('Ø®Ø·Ø§ÛŒ Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ø¯Ø± Auth:', authError);
      
      if (authError.status === 500 || authError.message.includes('confirmation email')) {
        this.showToast('Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯!', 'success');
        
        const tempUserId = 'temp_' + Date.now() + '_' + Math.random().toString(36).substr(2, 5);
        
        let fullName = '';
        let nationalCode = '';
        let companyName = '';
        let companyId = '';
        
        if (accountType === 'individual') {
          fullName = document.getElementById('fullName')?.value || 'Ú©Ø§Ø±Ø¨Ø±';
          nationalCode = document.getElementById('nationalCode')?.value || '0000000000';
        } else {
          companyName = document.getElementById('companyName')?.value || 'Ø´Ø±Ú©Øª';
          companyId = document.getElementById('companyId')?.value || '000000';
        }
        
        const profileData = {
          user_id: tempUserId,
          email: email,
          user_type: 'contractor',
          account_type: accountType,
          phone: mobile,
          landline: phone,
          contact_person: contactPerson,
          main_expertise: mainExpertise,
          full_name: fullName,
          national_code: nationalCode,
          company_name: companyName,
          company_id: companyId,
          verification_status: 'pending',
          trust_level: 1,
          created_at: new Date().toISOString(),
          terms_accepted_at: terms ? new Date().toISOString() : null,
          terms_version: '1.0'
        };

        const projectArea = document.getElementById('projectArea')?.value;
        const projectWeight = document.getElementById('projectWeight')?.value;
        const areaUnit = document.getElementById('areaUnit')?.value;
        
        if (projectArea) {
          profileData.project_area = parseInt(projectArea);
          profileData.area_unit = areaUnit;
        }
        if (projectWeight) {
          profileData.project_weight = parseInt(projectWeight);
        }

        const workAreaSelect = document.getElementById('workArea');
        const selectedAreas = Array.from(workAreaSelect.selectedOptions).map(opt => opt.value);
        if (selectedAreas.length > 0) {
          profileData.work_area = selectedAreas;
        }

        const radius = document.getElementById('radius')?.value;
        if (radius) {
          profileData.work_radius = parseInt(radius);
        }

        const subExpertiseCheckboxes = document.querySelectorAll('input[id^="subExpertise"]:checked');
        if (subExpertiseCheckboxes.length > 0) {
          const subExpertises = Array.from(subExpertiseCheckboxes).map(cb => cb.value);
          profileData.sub_expertise = subExpertises;
        }

        const startYear = document.getElementById('startYear')?.value;
        if (startYear) {
          profileData.start_year = parseInt(startYear);
        }

        const teamSize = document.getElementById('teamSize')?.value;
        if (teamSize) {
          profileData.team_size = parseInt(teamSize);
        }

        const equipment = document.getElementById('equipment')?.value;
        if (equipment) {
          profileData.equipment = equipment;
        }

        const contractMethod = document.getElementById('contractMethod')?.value;
        if (contractMethod) {
          profileData.contract_method = contractMethod;
        }

        const insurance = document.getElementById('insurance')?.value;
        if (insurance) {
          profileData.insurance = insurance;
          if (insurance === 'yes') {
            const insuranceExpiry = document.getElementById('insuranceExpiry')?.value;
            if (insuranceExpiry) {
              profileData.insurance_expiry = insuranceExpiry;
            }
          }
        }

        const { error: profileError } = await supabase
          .from('profiles')
          .insert([profileData]);

        if (profileError) {
          console.error('Ø®Ø·Ø§ÛŒ Ù¾Ø±ÙˆÙØ§ÛŒÙ„:', profileError);
        }

        this.userData = {
          id: tempUserId,
          email: email,
          full_name: fullName || companyName,
          phone: mobile,
          user_type: 'contractor',
          account_type: accountType,
          terms_accepted: true
        };
        
        this.saveUserData(this.userData);

        setTimeout(() => {
          this.showPage('home');
        }, 1500);
        return;
      } else {
        throw authError;
      }
    }

    if (!authData || !authData.user) {
      throw new Error('Ø®Ø·Ø§ Ø¯Ø± Ø«Ø¨Øªâ€ŒÙ†Ø§Ù…');
    }

    let fullName = '';
    let nationalCode = '';
    let companyName = '';
    let companyId = '';
    
    if (accountType === 'individual') {
      fullName = document.getElementById('fullName')?.value || '';
      nationalCode = document.getElementById('nationalCode')?.value || '';
    } else {
      companyName = document.getElementById('companyName')?.value || '';
      companyId = document.getElementById('companyId')?.value || '';
    }

    const profileData = {
      user_type: 'contractor',
      account_type: accountType,
      phone: mobile,
      landline: phone,
      contact_person: contactPerson,
      main_expertise: mainExpertise,
      full_name: fullName,
      national_code: nationalCode,
      company_name: companyName,
      company_id: companyId,
      verification_status: 'pending',
      trust_level: 1,
      terms_accepted_at: terms ? new Date().toISOString() : null,
      terms_version: '1.0'
    };

    const projectArea = document.getElementById('projectArea')?.value;
    const projectWeight = document.getElementById('projectWeight')?.value;
    const areaUnit = document.getElementById('areaUnit')?.value;
    
    if (projectArea) {
      profileData.project_area = parseInt(projectArea);
      profileData.area_unit = areaUnit;
    }
    if (projectWeight) {
      profileData.project_weight = parseInt(projectWeight);
    }

    const workAreaSelect = document.getElementById('workArea');
    const selectedAreas = Array.from(workAreaSelect.selectedOptions).map(opt => opt.value);
    if (selectedAreas.length > 0) {
      profileData.work_area = selectedAreas;
    }

    const radius = document.getElementById('radius')?.value;
    if (radius) {
      profileData.work_radius = parseInt(radius);
    }

    const subExpertiseCheckboxes = document.querySelectorAll('input[id^="subExpertise"]:checked');
    if (subExpertiseCheckboxes.length > 0) {
      const subExpertises = Array.from(subExpertiseCheckboxes).map(cb => cb.value);
      profileData.sub_expertise = subExpertises;
    }

    const startYear = document.getElementById('startYear')?.value;
    if (startYear) {
      profileData.start_year = parseInt(startYear);
    }

    const teamSize = document.getElementById('teamSize')?.value;
    if (teamSize) {
      profileData.team_size = parseInt(teamSize);
    }

    const equipment = document.getElementById('equipment')?.value;
    if (equipment) {
      profileData.equipment = equipment;
    }

    const contractMethod = document.getElementById('contractMethod')?.value;
    if (contractMethod) {
      profileData.contract_method = contractMethod;
    }

    const insurance = document.getElementById('insurance')?.value;
    if (insurance) {
      profileData.insurance = insurance;
      if (insurance === 'yes') {
        const insuranceExpiry = document.getElementById('insuranceExpiry')?.value;
        if (insuranceExpiry) {
          profileData.insurance_expiry = insuranceExpiry;
        }
      }
    }

    const { data: existingProfile } = await supabase
      .from('profiles')
      .select('user_id')
      .eq('user_id', authData.user.id)
      .single();

    if (existingProfile) {
      const { error: updateError } = await supabase
        .from('profiles')
        .update(profileData)
        .eq('user_id', authData.user.id);

      if (updateError) {
        console.error('Ø®Ø·Ø§ Ø¯Ø± Ø¢Ù¾Ø¯ÛŒØª Ù¾Ø±ÙˆÙØ§ÛŒÙ„:', updateError);
      }
    } else {
      const { error: insertError } = await supabase
        .from('profiles')
        .insert([{
          user_id: authData.user.id,
          email: email,
          ...profileData,
          created_at: new Date().toISOString()
        }]);

      if (insertError) {
        console.error('Ø®Ø·Ø§ Ø¯Ø± Ø§ÛŒØ¬Ø§Ø¯ Ù¾Ø±ÙˆÙØ§ÛŒÙ„:', insertError);
      }
    }

    this.showToast('Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø± Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯!', 'success');

    this.userData = {
      id: authData.user.id,
      email: email,
      full_name: fullName || companyName,
      phone: mobile,
      user_type: 'contractor',
      account_type: accountType,
      terms_accepted: true
    };
    
    this.saveUserData(this.userData);

    setTimeout(() => {
      this.showPage('home');
    }, 1500);

  } catch (error) {
    console.error('Ø®Ø·Ø§ÛŒ Ø«Ø¨Øªâ€ŒÙ†Ø§Ù…:', error);
    this.showToast('Ø®Ø·Ø§ Ø¯Ø± Ø«Ø¨Øªâ€ŒÙ†Ø§Ù…: ' + error.message, 'error');
  } finally {
    submitBtn.innerHTML = originalText;
    submitBtn.disabled = false;
  }
}

updateSubExpertise() {
const mainExpertise = document.getElementById('mainExpertise').value;
const subContainer = document.getElementById('subExpertiseContainer');
if (!subContainer) return;

const subExpertises = {
'steel_fabrication': ['Ø³Ø§Ø®Øª Ø§Ø³Ú©Ù„Øª ÙÙ„Ø²ÛŒ ØµÙ†Ø¹ØªÛŒ', 'Ø³Ø§Ø®Øª Ø§Ø³Ú©Ù„Øª ÙÙ„Ø²ÛŒ Ø³Ø§Ø®ØªÙ…Ø§Ù†ÛŒ', 'Ø³Ø§Ø®Øª Ø³ÙˆÙ„Ù‡', 'Ø³Ø§Ø®Øª Ù¾Ø§ÛŒÙ¾Ø±Ú©'],
'steel_installation': ['Ù†ØµØ§Ø¨ Ø³ÙˆÙ„Ù‡', 'Ù†ØµØ§Ø¨ Ø§Ø³Ú©Ù„Øª ÙÙ„Ø²ÛŒ Ø³Ø§Ø®ØªÙ…Ø§Ù†ÛŒ', 'Ù†ØµØ§Ø¨ Ø³Ø§Ø²Ù‡ Ù‡Ø§ÛŒ ØµÙ†Ø¹ØªÛŒ', 'Ù†ØµØ§Ø¨ Ù¾Ø§ÛŒÙ¾Ø±Ú©', 'Ù†ØµØ§Ø¨ Ù‡Ù†Ø¯Ø±ÛŒÙ„ Ùˆ Ù„Ø¯Ø±', 'Ù†ØµØ§Ø¨ Ú©Ø§Ø±Ù‡Ø§ÛŒ Ø³Ø¨Ú©'],
'formwork': ['Ù‚Ø§Ù„Ø¨ Ù‡Ø§ÛŒ Ù…Ø¯ÙˆÙ„Ø§Ø±', 'Ù‚Ø§Ù„Ø¨ Ù‡Ø§ÛŒ Ø®Ø§Øµ', 'Ù‚Ø§Ù„Ø¨ ØªÙˆÙ†Ù„ÙØ±Ù…', 'Ø§Ú©ÛŒÙ¾ Ø³Ø§Ø®Øª Ù‚Ø§Ù„Ø¨ ØªÙˆÙ†Ù„ÙØ±Ù…'],
'concrete_execution': [],
'support_teams': ['Ø§Ú©ÛŒÙ¾ Ù†Ù‚Ø´Ù‡ Ø¨Ø±Ø¯Ø§Ø±ÛŒ', 'Ø§Ú©ÛŒÙ¾ Ú©Ù†ØªØ±Ù„ Ú©ÛŒÙÛŒØª', 'Ø§Ú©ÛŒÙ¾ Ø§ÛŒÙ…Ù†ÛŒ ØµÙ†Ø¹ØªÛŒ']
};

if (mainExpertise && subExpertises[mainExpertise]) {
const subs = subExpertises[mainExpertise];
if (subs && subs.length > 0) {
let html = '<div class="row g-2">';
subs.forEach((sub, index) => {
html += `
<div class="col-12 col-md-6">
<div class="form-check">
<input class="form-check-input" type="checkbox" id="subExpertise${index}" value="${sub}">
<label class="form-check-label" for="subExpertise${index}">${sub}</label>
</div>
</div>
`;
});
html += '</div>';
subContainer.innerHTML = html;
} else {
subContainer.innerHTML = '<div class="form-text">Ø§ÛŒÙ† ØªØ®ØµØµ Ø²ÛŒØ±Ø­ÙˆØ²Ù‡â€ŒØ§ÛŒ Ù†Ø¯Ø§Ø±Ø¯.</div>';
}
} else {
subContainer.innerHTML = '<div class="form-text">Ø¨Ø±Ø§ÛŒ Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ø²ÛŒØ±Ø­ÙˆØ²Ù‡â€ŒÙ‡Ø§ØŒ Ø§Ø¨ØªØ¯Ø§ ØªØ®ØµØµ Ø§ØµÙ„ÛŒ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯.</div>';
}
}

updateAreaUnitLabel() {
const areaUnit = document.getElementById('areaUnit').value;
const formText = document.querySelector('.project-scale-row .form-text');
if (formText) {
if (areaUnit === 'sqm') {
formText.textContent = 'Ø¨Ø±Ø§ÛŒ Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§ÛŒ Ø³Ø§Ø®ØªÙ…Ø§Ù†ÛŒ Ùˆ Ú©Ø§Ø¨ÛŒÙ†Øª';
} else {
formText.textContent = 'Ø¨Ø±Ø§ÛŒ Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§ÛŒ Ø­Ø¬Ù…ÛŒ Ùˆ Ø¨ØªÙ†ÛŒ';
}
}
}

handleWorkAreaSelection(e) {
const select = e.target;
const options = Array.from(select.options);
const allOption = options.find(opt => opt.value === 'all');
if (allOption && allOption.selected) {
options.forEach(opt => {
if (opt.value !== 'all') {
opt.selected = false;
opt.disabled = true;
}
});
} else {
if (allOption) {
allOption.selected = false;
allOption.disabled = true;
}
}
}

handleFileUpload(e) {
const files = e.target.files;
const fileList = document.getElementById('fileList');
if (files.length > 5) {
this.showToast('Ø­Ø¯Ø§Ú©Ø«Ø± Ûµ ÙØ§ÛŒÙ„ Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø¢Ù¾Ù„ÙˆØ¯ Ú©Ù†ÛŒØ¯.', 'error');
return;
}
fileList.innerHTML = '';
Array.from(files).forEach((file, index) => {
const fileItem = document.createElement('div');
fileItem.className = 'd-flex align-items-center justify-content-between mb-2 p-2 bg-light rounded';
fileItem.innerHTML = `
<div>
<i class="bi bi-file-earmark-text me-2"></i>
<span>${file.name}</span>
<small class="text-muted ms-2">(${(file.size / 1024).toFixed(1)} KB)</small>
</div>
<button type="button" class="btn btn-sm btn-outline-danger" onclick="app.removeFile(${index})">
<i class="bi bi-trash"></i>
</button>
`;
fileList.appendChild(fileItem);
});
this.showAutoSaveStatus('Ù…Ø¯Ø§Ø±Ú© Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø¢Ù¾Ù„ÙˆØ¯ Ø´Ø¯Ù†Ø¯.', 'success');
}

removeFile(index) {
const input = document.getElementById('documentUpload');
const files = Array.from(input.files);
files.splice(index, 1);
const dt = new DataTransfer();
files.forEach(file => dt.items.add(file));
input.files = dt.files;
this.handleFileUpload({ target: input });
}

addProject() {
  const container = document.getElementById('projectContainer');
  const projectCount = container.children.length + 1;
  
  if (projectCount > 5) {
    this.showToast('Ø­Ø¯Ø§Ú©Ø«Ø± Ûµ Ù¾Ø±ÙˆÚ˜Ù‡ Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø§Ø¶Ø§ÙÙ‡ Ú©Ù†ÛŒØ¯.', 'error');
    return;
  }
  
  const projectDiv = document.createElement('div');
  projectDiv.className = 'card mb-3 project-card';
  projectDiv.innerHTML = `
  <div class="card-body">
    <div class="d-flex justify-content-between align-items-center mb-3">
      <h6 class="card-title mb-0">Ù¾Ø±ÙˆÚ˜Ù‡ Ù†Ù…ÙˆÙ†Ù‡ ${projectCount}</h6>
      <button type="button" class="btn btn-sm btn-outline-danger" onclick="app.removeProject(this)">
        <i class="bi bi-trash"></i>
      </button>
    </div>
    <div class="row">
      <div class="col-md-4 mb-3">
        <label class="form-label">Ù†Ø§Ù… Ù¾Ø±ÙˆÚ˜Ù‡</label>
        <input type="text" class="form-control" name="projectName[]">
      </div>
      <div class="col-md-4 mb-3">
        <label class="form-label">Ø³Ø§Ù„ ØªØ­ÙˆÛŒÙ„ (Ø´Ù…Ø³ÛŒ)</label>
        <select class="form-select" name="projectYear[]">
          <option value="">-- Ø§Ù†ØªØ®Ø§Ø¨ Ø³Ø§Ù„ --</option>
        </select>
      </div>
      <div class="col-md-4 mb-3">
        <label class="form-label">Ù…Ø´ØªØ±ÛŒ</label>
        <input type="text" class="form-control" name="projectClient[]" placeholder="Ù†Ø§Ù… Ø´Ø±Ú©Øª ÛŒØ§ Ø´Ø®Øµ">
      </div>
      <div class="col-12 mb-3">
        <label class="form-label">ØªØµÙˆÛŒØ± Ù¾Ø±ÙˆÚ˜Ù‡ (Ø­Ø¯Ø§Ú©Ø«Ø± Û± ØªØµÙˆÛŒØ±)</label>
        <input type="file" class="form-control" name="projectImage[]" accept="image/*">
      </div>
    </div>
  </div>
  `;
  
  container.appendChild(projectDiv);
  
  const yearSelect = projectDiv.querySelector('select[name="projectYear[]"]');
  this.populateProjectYearSelect(yearSelect);
  
  this.showAutoSaveStatus('Ù¾Ø±ÙˆÚ˜Ù‡ Ø¬Ø¯ÛŒØ¯ Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯.', 'success');
}

removeProject(button) {
  const projectCard = button.closest('.project-card');
  const container = document.getElementById('projectContainer');
  
  if (container.children.length > 1) {
    projectCard.remove();
    this.showAutoSaveStatus('Ù¾Ø±ÙˆÚ˜Ù‡ Ø­Ø°Ù Ø´Ø¯.', 'success');
  } else {
    this.showToast('Ø­Ø¯Ø§Ù‚Ù„ ÛŒÚ© Ù¾Ø±ÙˆÚ˜Ù‡ Ø¨Ø§ÛŒØ¯ ÙˆØ¬ÙˆØ¯ Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ø¯.', 'error');
  }
}

nextContractorStep() {
if (this.validateContractorStep(this.contractorCurrentStep)) {
if (this.contractorCurrentStep < this.contractorTotalSteps) {
document.getElementById(`section${this.contractorCurrentStep}`).style.display = 'none';
this.contractorCurrentStep++;
document.getElementById(`section${this.contractorCurrentStep}`).style.display = 'block';
this.updateProgressBar();
this.updateStepIndicator();
this.updateContractorNavigation();
if (this.contractorCurrentStep === this.contractorTotalSteps) {
this.updateContractorSummary();
}
}
}
}

prevContractorStep() {
if (this.contractorCurrentStep > 1) {
document.getElementById(`section${this.contractorCurrentStep}`).style.display = 'none';
this.contractorCurrentStep--;
document.getElementById(`section${this.contractorCurrentStep}`).style.display = 'block';
this.updateProgressBar();
this.updateStepIndicator();
this.updateContractorNavigation();
}
}

validateContractorStep(step) {
  let isValid = true;
  this.clearValidationErrors();

  switch(step) {
    case 1:
      const accountType = document.getElementById('accountType').value;
      const contactPerson = document.getElementById('contactPerson').value;
      const mobile = document.getElementById('mobile').value;
      const email = document.getElementById('contractorEmail').value;
      const password = document.getElementById('contractorPassword').value;
      const confirmPassword = document.getElementById('contractorConfirmPassword').value;
      
      if (!accountType) {
        this.showValidationError('accountType', 'Ù„Ø·ÙØ§Ù‹ Ù†ÙˆØ¹ Ø´Ø®ØµÛŒØª Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯');
        isValid = false;
      }
      
      if (!contactPerson) {
        this.showValidationError('contactPerson', 'Ù„Ø·ÙØ§Ù‹ Ù†Ø§Ù… Ù…Ø³Ø¦ÙˆÙ„ Ø§Ø±ØªØ¨Ø§Ø· Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯');
        isValid = false;
      }
      
      if (!mobile || !this.isValidMobile(mobile)) {
        this.showValidationError('mobile', 'Ù„Ø·ÙØ§Ù‹ Ø´Ù…Ø§Ø±Ù‡ Ù…ÙˆØ¨Ø§ÛŒÙ„ Ù…Ø¹ØªØ¨Ø± ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯');
        isValid = false;
      }
      
      if (!email || !this.isValidEmail(email)) {
        this.showValidationError('contractorEmail', 'Ù„Ø·ÙØ§Ù‹ Ø§ÛŒÙ…ÛŒÙ„ Ù…Ø¹ØªØ¨Ø± ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯');
        isValid = false;
      }
      
      if (!password) {
        this.showValidationError('contractorPassword', 'Ù„Ø·ÙØ§Ù‹ Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯');
        isValid = false;
      }
      
      if (!confirmPassword) {
        this.showValidationError('contractorConfirmPassword', 'Ù„Ø·ÙØ§Ù‹ ØªÚ©Ø±Ø§Ø± Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯');
        isValid = false;
      }
      
      if (password && confirmPassword && password !== confirmPassword) {
        this.showValidationError('contractorConfirmPassword', 'Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ùˆ ØªÚ©Ø±Ø§Ø± Ø¢Ù† ÛŒÚ©Ø³Ø§Ù† Ù†ÛŒØ³ØªÙ†Ø¯');
        isValid = false;
      }
      
      if (accountType === 'individual') {
        const fullName = document.getElementById('fullName')?.value;
        const nationalCode = document.getElementById('nationalCode')?.value;
        
        if (!fullName) {
          this.showValidationError('fullName', 'Ù„Ø·ÙØ§Ù‹ Ù†Ø§Ù… Ùˆ Ù†Ø§Ù… Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯');
          isValid = false;
        }
        
        if (!nationalCode || nationalCode.length !== 10) {
          this.showValidationError('nationalCode', 'Ù„Ø·ÙØ§Ù‹ Ú©Ø¯ Ù…Ù„ÛŒ Ù…Ø¹ØªØ¨Ø± ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯');
          isValid = false;
        }
      } else if (accountType === 'company') {
        const companyName = document.getElementById('companyName')?.value;
        const companyId = document.getElementById('companyId')?.value;
        
        if (!companyName) {
          this.showValidationError('companyName', 'Ù„Ø·ÙØ§Ù‹ Ù†Ø§Ù… Ø´Ø±Ú©Øª Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯');
          isValid = false;
        }
        
        if (!companyId) {
          this.showValidationError('companyId', 'Ù„Ø·ÙØ§Ù‹ Ø´Ù†Ø§Ø³Ù‡ Ù…Ù„ÛŒ Ø´Ø±Ú©Øª Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯');
          isValid = false;
        }
      }
      
      if (!isValid) return false;
      break;

    case 2:
      const mainExpertise = document.getElementById('mainExpertise').value;
      const workArea = document.getElementById('workArea');
      const selectedAreas = Array.from(workArea.selectedOptions).map(opt => opt.value);
      
      if (!mainExpertise) {
        this.showValidationError('mainExpertise', 'Ù„Ø·ÙØ§Ù‹ ØªØ®ØµØµ Ø§ØµÙ„ÛŒ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯');
        isValid = false;
      }
      
      if (selectedAreas.length === 0) {
        this.showToast('Ù„Ø·ÙØ§Ù‹ Ø­Ø¯Ø§Ù‚Ù„ ÛŒÚ© Ù…Ø­Ø¯ÙˆØ¯Ù‡ Ø¬ØºØ±Ø§ÙÛŒØ§ÛŒÛŒ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯', 'error');
        isValid = false;
      }
      
      const projectArea = document.getElementById('projectArea')?.value;
      const projectWeight = document.getElementById('projectWeight')?.value;
      
      if (!projectArea && !projectWeight) {
        this.showToast('Ù„Ø·ÙØ§Ù‹ Ø­Ø¯Ø§Ù‚Ù„ ÛŒÚ©ÛŒ Ø§Ø² ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ Ù…ØªØ±Ø§Ú˜ ÛŒØ§ ÙˆØ²Ù† Ø±Ø§ Ù¾Ø± Ú©Ù†ÛŒØ¯', 'error');
        isValid = false;
      }
      
      if (!isValid) return false;
      break;
      
    case 3:
      const startYear = document.getElementById('startYear').value;
      if (!startYear) {
        this.showValidationError('startYear', 'Ù„Ø·ÙØ§Ù‹ Ø³Ø§Ù„ Ø¢ØºØ§Ø² ÙØ¹Ø§Ù„ÛŒØª Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯');
        isValid = false;
      }
      
      if (!isValid) return false;
      break;
      
    case 4:
      const projectCount = document.querySelectorAll('.project-card').length;
      if (projectCount < 2) {
        this.showToast('Ù„Ø·ÙØ§Ù‹ Ø­Ø¯Ø§Ù‚Ù„ Û² Ù¾Ø±ÙˆÚ˜Ù‡ Ù†Ù…ÙˆÙ†Ù‡ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯', 'error');
        isValid = false;
      }
      
      if (!isValid) return false;
      break;
  }
  
  return isValid;
}

updateProgressBar() {
const progress = (this.contractorCurrentStep / this.contractorTotalSteps) * 100;
document.getElementById('progressBarFill').style.width = progress + '%';
document.getElementById('progressBarFill').setAttribute('aria-valuenow', progress);
}

updateStepIndicator() {
for (let i = 1; i <= this.contractorTotalSteps; i++) {
const step = document.getElementById(`step${i}`);
if (i <= this.contractorCurrentStep) {
step.classList.add('active');
} else {
step.classList.remove('active');
}
}
}

updateContractorNavigation() {
const prevBtn = document.getElementById('prevBtn');
const nextBtn = document.getElementById('nextBtn');
const submitBtn = document.getElementById('submitBtn');
if (this.contractorCurrentStep === 1) {
prevBtn.style.display = 'none';
} else {
prevBtn.style.display = 'block';
}
if (this.contractorCurrentStep === this.contractorTotalSteps) {
nextBtn.style.display = 'none';
submitBtn.style.display = 'block';
} else {
nextBtn.style.display = 'block';
submitBtn.style.display = 'none';
}
}

updateContractorSummary() {
const accountType = document.getElementById('accountType').value;
let name = '';
if (accountType === 'individual') {
name = document.getElementById('fullName')?.value || '-';
} else {
name = document.getElementById('companyName')?.value || '-';
}
const contactPerson = document.getElementById('contactPerson')?.value || '-';
const mainExpertise = document.getElementById('mainExpertise')?.options[document.getElementById('mainExpertise').selectedIndex]?.text || '-';
const startYear = document.getElementById('startYear')?.value || '-';
const teamSize = document.getElementById('teamSize')?.value || '-';
const workAreaSelect = document.getElementById('workArea');
const selectedAreas = Array.from(workAreaSelect.selectedOptions).map(opt => opt.text);
const workAreas = selectedAreas.length > 0 ? selectedAreas.join('ØŒ ') : '-';
const areaValue = document.getElementById('projectArea')?.value || '-';
const areaUnit = document.getElementById('areaUnit')?.value === 'sqm' ? 'Ù…ØªØ± Ù…Ø±Ø¨Ø¹' : 'Ù…ØªØ± Ù…Ú©Ø¹Ø¨';
const weightValue = document.getElementById('projectWeight')?.value || '-';
const summaryHtml = `
<div class="row">
<div class="col-md-6">
<p><strong>Ù†Ø§Ù… ${accountType === 'individual' ? 'Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø±' : 'Ø´Ø±Ú©Øª'}:</strong> ${name}</p>
<p><strong>Ù…Ø³Ø¦ÙˆÙ„ Ø§Ø±ØªØ¨Ø§Ø·:</strong> ${contactPerson}</p>
<p><strong>ØªØ®ØµØµ Ø§ØµÙ„ÛŒ:</strong> ${mainExpertise}</p>
<p><strong>Ø³Ø§Ù„ Ø´Ø±ÙˆØ¹ ÙØ¹Ø§Ù„ÛŒØª:</strong> ${startYear}</p>
</div>
<div class="col-md-6">
<p><strong>ØªØ¹Ø¯Ø§Ø¯ Ù†ÛŒØ±Ùˆ:</strong> ${teamSize} Ù†ÙØ±</p>
<p><strong>Ù…Ø­Ø¯ÙˆØ¯Ù‡ ÙØ¹Ø§Ù„ÛŒØª:</strong> ${workAreas}</p>
<p><strong>Ù…Ù‚ÛŒØ§Ø³ Ù¾Ø±ÙˆÚ˜Ù‡:</strong> ${areaValue !== '-' ? areaValue + ' ' + areaUnit + ' Ø¯Ø± Ù…Ø§Ù‡' : ''} ${weightValue !== '-' ? weightValue + ' ØªÙ† Ø¯Ø± Ù…Ø§Ù‡' : ''}</p>
<p><strong>Ù†ÙˆØ¹ Ø´Ø®ØµÛŒØª:</strong> ${accountType === 'individual' ? 'Ø´Ø®Øµ Ø­Ù‚ÛŒÙ‚ÛŒ' : 'Ø´Ø±Ú©Øª'}</p>
</div>
</div>
`;
document.getElementById('summaryContent').innerHTML = summaryHtml;
document.getElementById('formSummary').style.display = 'block';
}
showEmployerRegistration() {
this.showPage('employerRegistration');
this.employerCurrentStep = 1;
document.querySelectorAll('#employerRegistration .form-section').forEach((section, index) => {
if (index === 0) {
section.style.display = 'block';
} else {
section.style.display = 'none';
}
});
this.updateEmployerNavigation();
document.getElementById('employerForm').reset();
this.updateEmployerFields();
this.clearValidationErrors();
}

showContractorRegistration() {
  this.showPage('contractorRegistration');
  this.contractorCurrentStep = 1;
  
  document.querySelectorAll('#contractorRegistration .form-section').forEach((section, index) => {
    if (index === 0) {
      section.style.display = 'block';
    } else {
      section.style.display = 'none';
    }
  });
  
  this.updateProgressBar();
  this.updateStepIndicator();
  this.updateContractorNavigation();
  document.getElementById('contractorForm').reset();
  this.updateContractorFields();
  this.clearValidationErrors();
  document.getElementById('fileList').innerHTML = '';
  
  const projectContainer = document.getElementById('projectContainer');
  projectContainer.innerHTML = `
    <div class="card mb-3 project-card">
      <div class="card-body">
        <h6 class="card-title">Ù¾Ø±ÙˆÚ˜Ù‡ Ù†Ù…ÙˆÙ†Ù‡ Û±</h6>
        <div class="row">
          <div class="col-md-4 mb-3">
            <label class="form-label">Ù†Ø§Ù… Ù¾Ø±ÙˆÚ˜Ù‡</label>
            <input type="text" class="form-control" name="projectName[]">
          </div>
          <div class="col-md-4 mb-3">
            <label class="form-label">Ø³Ø§Ù„ ØªØ­ÙˆÛŒÙ„ (Ø´Ù…Ø³ÛŒ)</label>
            <select class="form-select" name="projectYear[]">
              <option value="">-- Ø§Ù†ØªØ®Ø§Ø¨ Ø³Ø§Ù„ --</option>
            </select>
          </div>
          <div class="col-md-4 mb-3">
            <label class="form-label">Ù…Ø´ØªØ±ÛŒ</label>
            <input type="text" class="form-control" name="projectClient[]" placeholder="Ù†Ø§Ù… Ø´Ø±Ú©Øª ÛŒØ§ Ø´Ø®Øµ">
          </div>
          <div class="col-12 mb-3">
            <label class="form-label">ØªØµÙˆÛŒØ± Ù¾Ø±ÙˆÚ˜Ù‡ (Ø­Ø¯Ø§Ú©Ø«Ø± Û± ØªØµÙˆÛŒØ±)</label>
            <input type="file" class="form-control" name="projectImage[]" accept="image/*">
          </div>
        </div>
      </div>
    </div>
  `;
  
  const firstYearSelect = document.querySelector('#projectContainer select[name="projectYear[]"]');
  this.populateProjectYearSelect(firstYearSelect);
  
  const workArea = document.getElementById('workArea');
  Array.from(workArea.options).forEach(opt => {
    opt.disabled = false;
    opt.selected = false;
  });
  
  document.getElementById('formSummary').style.display = 'none';
  localStorage.removeItem('contractor_form_temp');
}

populateYearSelect(selectId, startYear, endYear) {
let selectElement;
if (typeof selectId === 'string') {
selectElement = document.getElementById(selectId);
} else {
selectElement = selectId;
}
if (!selectElement) return;
while (selectElement.options.length > 1) {
selectElement.remove(1);
}
for (let year = endYear; year >= startYear; year--) {
const option = document.createElement('option');
option.value = year;
option.text = year;
selectElement.appendChild(option);
}
}

populateProjectYearSelect(selectElement) {
  if (!selectElement) return;
  
  while (selectElement.options.length > 1) {
    selectElement.remove(1);
  }
  
  for (let year = 1403; year >= 1380; year--) {
    const option = document.createElement('option');
    option.value = year;
    option.text = year;
    selectElement.appendChild(option);
  }
}

showAutoSaveStatus(message, type = 'success') {
const statusElement = document.getElementById('autoSaveStatus');
if (statusElement) {
statusElement.textContent = 'âœ“ ' + message;
statusElement.className = `auto-save-status ${type}`;
setTimeout(() => {
statusElement.textContent = '';
statusElement.className = 'auto-save-status';
}, 3000);
}
}

showValidationError(fieldId, message) {
  const field = document.getElementById(fieldId);
  if (field) {
    field.classList.add('is-invalid');
    
    let feedback = field.nextElementSibling;
    while (feedback && !feedback.classList.contains('invalid-feedback')) {
      feedback = feedback.nextElementSibling;
    }
    
    if (!feedback || !feedback.classList.contains('invalid-feedback')) {
      feedback = document.createElement('div');
      feedback.className = 'invalid-feedback';
      field.parentNode.appendChild(feedback);
    }
    
    feedback.textContent = message;
    feedback.style.display = 'block';
    
    field.scrollIntoView({ behavior: 'smooth', block: 'center' });
  } else {
    this.showToast(message, 'error');
  }
}

clearValidationErrors() {
document.querySelectorAll('.is-invalid').forEach(field => {
field.classList.remove('is-invalid');
});
document.querySelectorAll('.invalid-feedback').forEach(feedback => {
feedback.style.display = 'none';
});
}

setupValidation() {
const emailInputs = document.querySelectorAll('input[type="email"]');
emailInputs.forEach(input => {
input.addEventListener('blur', () => {
if (input.value && !this.isValidEmail(input.value)) {
this.showValidationError(input.id, 'Ù„Ø·ÙØ§Ù‹ Ø§ÛŒÙ…ÛŒÙ„ Ù…Ø¹ØªØ¨Ø± ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯');
}
});
});
const mobileInputs = document.querySelectorAll('input[type="tel"][pattern]');
mobileInputs.forEach(input => {
input.addEventListener('blur', () => {
if (input.value && !this.isValidMobile(input.value)) {
this.showValidationError(input.id, 'Ù„Ø·ÙØ§Ù‹ Ø´Ù…Ø§Ø±Ù‡ Ù…ÙˆØ¨Ø§ÛŒÙ„ Ù…Ø¹ØªØ¨Ø± ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯');
}
});
});
}

isValidEmail(email) {
const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
return re.test(email);
}

isValidMobile(mobile) {
const re = /^09[0-9]{9}$/;
return re.test(mobile);
}

sanitizeHTML(text) {
const div = document.createElement('div');
div.textContent = text;
return div.innerHTML;
}

performSearch() {
const keyword = document.getElementById('searchKeyword').value;
const specialty = document.getElementById('searchSpecialty').value;
const locationSelect = document.getElementById('searchLocation');
const selectedLocations = Array.from(locationSelect.selectedOptions).map(opt => opt.value);
const experience = document.getElementById('searchExperience').value;

const results = [
{ id: 1, name: 'Ø´Ø±Ú©Øª Ø³Ø§Ø²Ù‡â€ŒÚ¯Ø³ØªØ±', location: ['tehran', 'alborz'], specialty: 'steel_fabrication', rating: 4.5, reviews: 12, experience: 15, verified: true },
{ id: 2, name: 'Ø¨ØªÙ†â€ŒÚ©Ø§Ø±Ø§Ù† Ø¨Ø±ØªØ±', location: ['esfahan', 'tehran'], specialty: 'concrete_execution', rating: 4.2, reviews: 8, experience: 8, verified: true },
{ id: 3, name: 'Ø¬ÙˆØ´Ú©Ø§Ø±Ø§Ù† Ø­Ø±ÙÙ‡â€ŒØ§ÛŒ', location: ['razavi-khorasan'], specialty: 'welding', rating: 4.7, reviews: 15, experience: 12, verified: true },
{ id: 4, name: 'Ø§Ø³Ú©Ù„Øªâ€ŒØ³Ø§Ø²Ø§Ù† Ù†ÙˆÛŒÙ†', location: ['alborz'], specialty: 'steel_installation', rating: 4.8, reviews: 20, experience: 18, verified: true },
{ id: 5, name: 'Ø®Ø§Ú©Ø¨Ø±Ø¯Ø§Ø±ÛŒ Ø§ÛŒÙ…Ù†', location: ['tehran', 'alborz'], specialty: 'excavation', rating: 4.3, reviews: 6, experience: 10, verified: true },
{ id: 6, name: 'Ø±Ù†Ú¯â€ŒØ¢Ù…ÛŒØ² ØµÙ†Ø¹Øª', location: ['esfahan', 'fars'], specialty: 'coating', rating: 4.6, reviews: 9, experience: 7, verified: true },
{ id: 7, name: 'Ø¢Ø¨â€ŒØ¨Ù†Ø¯ÛŒ Ù¾Ø§Ø±Ø³', location: ['khuzestan', 'fars'], specialty: 'waterproofing', rating: 4.4, reviews: 11, experience: 9, verified: true },
{ id: 8, name: 'Ù…Ù‚Ø§ÙˆÙ…â€ŒØ³Ø§Ø²Ø§Ù†', location: ['tehran'], specialty: 'seismic_retrofit', rating: 4.9, reviews: 18, experience: 20, verified: true }
];

const filteredResults = results.filter(result => {
if (keyword && !result.name.includes(keyword) && !result.specialty.includes(keyword)) return false;

if (specialty && result.specialty !== specialty) return false;

if (selectedLocations.length > 0 && !selectedLocations.includes('all')) {
const hasLocation = result.location.some(loc => selectedLocations.includes(loc));
if (!hasLocation) return false;
}

if (experience && result.experience < parseInt(experience)) return false;

return true;
});

this.displaySearchResults(filteredResults);
}

displaySearchResults(results) {
const container = document.getElementById('searchResults');
if (results.length === 0) {
container.innerHTML = `
<div class="col-12">
<div class="card-peymanyar text-center py-5">
<i class="bi bi-search display-4 text-muted mb-3"></i>
<h4>Ù†ØªÛŒØ¬Ù‡â€ŒØ§ÛŒ ÛŒØ§ÙØª Ù†Ø´Ø¯</h4>
<p class="text-muted">Ù„Ø·ÙØ§Ù‹ ÙÛŒÙ„ØªØ±Ù‡Ø§ÛŒ Ø¬Ø³ØªØ¬Ùˆ Ø±Ø§ ØªØºÛŒÛŒØ± Ø¯Ù‡ÛŒØ¯.</p>
</div>
</div>
`;
return;
}
container.innerHTML = results.map(result => `
<div class="col-lg-4 col-md-6 mb-4">
<div class="card-peymanyar h-100">
<div class="d-flex justify-content-between align-items-start mb-3">
<div>
<h5 class="mb-1">${result.name}</h5>
<p class="text-muted mb-1"><i class="bi bi-geo-alt me-1"></i>${result.location}</p>
<p class="text-muted mb-1"><i class="bi bi-clock-history me-1"></i>${result.experience} Ø³Ø§Ù„ Ø³Ø§Ø¨Ù‚Ù‡</p>
</div>
${result.verified ? '<span class="badge bg-success">ØªØ£ÛŒÛŒØ¯ Ø´Ø¯Ù‡</span>' : ''}
</div>
<div class="mb-3">
${this.generateStars(result.rating)}
<span class="text-muted ms-2">${result.rating} (${result.reviews} Ù†Ø¸Ø±)</span>
</div>
<p class="text-muted mb-3">ØªØ®ØµØµ: ${result.specialty}</p>
<div class="d-flex justify-content-between">
<button class="btn btn-sm btn-outline-primary" onclick="app.viewContractorProfile(${result.id})">Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ù¾Ø±ÙˆÙØ§ÛŒÙ„</button>
<button class="btn btn-sm btn-primary" onclick="app.contactContractor(${result.id})">Ø§Ø±ØªØ¨Ø§Ø·</button>
</div>
</div>
</div>
`).join('');
}

generateStars(rating) {
let stars = '';
const fullStars = Math.floor(rating);
const hasHalfStar = rating % 1 >= 0.5;
for (let i = 0; i < fullStars; i++) stars += '<i class="bi bi-star-fill text-warning"></i>';
if (hasHalfStar) stars += '<i class="bi bi-star-half text-warning"></i>';
const remaining = 5 - fullStars - (hasHalfStar ? 1 : 0);
for (let i = 0; i < remaining; i++) stars += '<i class="bi bi-star text-warning"></i>';
return stars;
}

viewContractorProfile(id) {
this.showToast(`Ù¾Ø±ÙˆÙØ§ÛŒÙ„ Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø± ${id} Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ...`, 'info');
}

contactContractor(id) {
this.showToast(`Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø± ${id} Ø¨Ø±Ù‚Ø±Ø§Ø± Ø´Ø¯`, 'success');
}

animateCounters() {
  const counters = document.querySelectorAll('.stat-value[data-count]');
  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        const counter = entry.target;
        const target = +counter.getAttribute('data-count');
        this.animateCounter(counter, target);
        observer.unobserve(counter);
      }
    });
  }, { threshold: 0.5 });
  
  counters.forEach(counter => observer.observe(counter));
}

animateCounter(element, target) {
let count = 0;
const increment = target / 50;
const step = () => {
if (count < target) {
count += increment;
element.textContent = Math.ceil(count).toLocaleString('fa-IR');
requestAnimationFrame(step);
} else {
element.textContent = target.toLocaleString('fa-IR') + (element.getAttribute('data-count') === '98' ? 'Ùª' : '');
}
};
requestAnimationFrame(step);
}

async logout() {
  await supabase.auth.signOut();
  this.userData = null;
  localStorage.removeItem('peymanyar_user');
  this.showPage('home');
  this.showToast('Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø®Ø§Ø±Ø¬ Ø´Ø¯ÛŒØ¯', 'success');
}

async loadProjects() {
  const statusFilter = document.getElementById('projectFilterStatus')?.value || 'all';
  const searchTerm = document.getElementById('projectSearch')?.value || '';
  
  try {
    let query = supabase
      .from('projects')
      .select('*')
      .eq('admin_approved', true)
      .order('created_at', { ascending: false });
    
    if (statusFilter !== 'all') {
      query = query.eq('status', statusFilter);
    }
    
    if (searchTerm) {
      query = query.or(`title.ilike.%${searchTerm}%,description.ilike.%${searchTerm}%`);
    }
    
    const { data: projects, error } = await query;
    
    if (error) {
      console.error('Ø®Ø·Ø§:', error);
      this.showToast('Ø®Ø·Ø§ Ø¯Ø± Ø¯Ø±ÛŒØ§ÙØª Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§', 'error');
      return;
    }
    
    this.allProjects = projects || [];
    
    const projectsWithEmployer = await Promise.all((projects || []).map(async (project) => {
      const { data: employer } = await supabase
        .from('profiles')
        .select('full_name, company_name')
        .eq('user_id', project.employer_id)
        .single();
      
      return {
        ...project,
        employer: employer || null
      };
    }));
    
    this.displayProjects(projectsWithEmployer);
    
  } catch (error) {
    console.error('Ø®Ø·Ø§:', error);
    this.showToast('Ø®Ø·Ø§ Ø¯Ø± Ø¯Ø±ÛŒØ§ÙØª Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§', 'error');
  }
}

displayProjects(projects) {
  const container = document.getElementById('projectsList');
  
  if (!container) {
    console.error('Ø§Ù„Ù…Ø§Ù† Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§ Ù¾ÛŒØ¯Ø§ Ù†Ø´Ø¯!');
    return;
  }
  
  if (!projects || projects.length === 0) {
    container.innerHTML = `
      <div class="col-12">
        <div class="card-peymanyar text-center py-5">
          <i class="bi bi-folder-x display-4 text-muted mb-3"></i>
          <h4>Ù¾Ø±ÙˆÚ˜Ù‡â€ŒØ§ÛŒ ÛŒØ§ÙØª Ù†Ø´Ø¯</h4>
          <p class="text-muted">Ù‡Ù†ÙˆØ² Ù¾Ø±ÙˆÚ˜Ù‡â€ŒØ§ÛŒ Ø«Ø¨Øª Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª.</p>
        </div>
      </div>
    `;
    return;
  }
  
  let html = '';
  projects.forEach(project => {
    const statusClass = {
      'open': 'bg-success',
      'in_progress': 'bg-primary',
      'completed': 'bg-secondary',
      'cancelled': 'bg-danger'
    }[project.status] || 'bg-secondary';
    
    const statusText = {
      'open': 'Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø± Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø±',
      'in_progress': 'Ø¯Ø± Ø­Ø§Ù„ Ø§Ù†Ø¬Ø§Ù…',
      'completed': 'ØªÚ©Ù…ÛŒÙ„ Ø´Ø¯Ù‡',
      'cancelled': 'Ù„ØºÙˆ Ø´Ø¯Ù‡'
    }[project.status] || project.status;
    
    html += `
      <div class="col-md-6 mb-4">
        <div class="card-peymanyar">
          <div class="d-flex justify-content-between align-items-start mb-3">
            <h5>${project.title}</h5>
            <span class="badge ${statusClass}">${statusText}</span>
          </div>
          <p>${project.description || 'Ø¨Ø¯ÙˆÙ† ØªÙˆØ¶ÛŒØ­Ø§Øª'}</p>
          <div class="mt-3 pt-3 border-top d-flex justify-content-between align-items-center">
            <small class="text-muted">
              <i class="bi bi-calendar me-1"></i>
              ${new Date(project.created_at).toLocaleDateString('fa-IR')}
            </small>
            <span class="badge bg-light text-dark">Ø´Ù†Ø§Ø³Ù‡: ${project.id}</span>
          </div>
        </div>
      </div>
    `;
  });
  
  container.innerHTML = html;
}

getBudgetText(budget) {
  const budgets = {
    'under100': 'Ø²ÛŒØ± Û±Û°Û° Ù…ÛŒÙ„ÛŒÙˆÙ†',
    '100-500': 'Û±Û°Û° ØªØ§ ÛµÛ°Û° Ù…ÛŒÙ„ÛŒÙˆÙ†',
    '500-1000': 'ÛµÛ°Û° Ù…ÛŒÙ„ÛŒÙˆÙ† ØªØ§ Û± Ù…ÛŒÙ„ÛŒØ§Ø±Ø¯',
    '1-5': 'Û± ØªØ§ Ûµ Ù…ÛŒÙ„ÛŒØ§Ø±Ø¯',
    '5+': 'Ø¨Ø§Ù„Ø§ÛŒ Ûµ Ù…ÛŒÙ„ÛŒØ§Ø±Ø¯'
  };
  return budgets[budget] || budget;
}

getTimelineText(timeline) {
  const timelines = {
    'urgent': 'ÙÙˆØ±ÛŒ (Ú©Ù…ØªØ± Ø§Ø² Û± Ù…Ø§Ù‡)',
    '1-3': 'Û± ØªØ§ Û³ Ù…Ø§Ù‡',
    '3-6': 'Û³ ØªØ§ Û¶ Ù…Ø§Ù‡',
    '6-12': 'Û¶ ØªØ§ Û±Û² Ù…Ø§Ù‡',
    'flexible': 'Ø§Ù†Ø¹Ø·Ø§Ùâ€ŒÙ¾Ø°ÛŒØ±'
  };
  return timelines[timeline] || timeline;
}

saveUserData(data) {
  this.userData = data;
  localStorage.setItem('peymanyar_user', JSON.stringify(data));
  console.log('User data saved:', data);
}

loadUserData() {
  const saved = localStorage.getItem('peymanyar_user');
  if (saved) {
    try {
      this.userData = JSON.parse(saved);
      console.log('User data loaded:', this.userData);
    } catch (e) {
      console.error('Ø®Ø·Ø§ Ø¯Ø± Ù„ÙˆØ¯ user data:', e);
      this.userData = null;
      localStorage.removeItem('peymanyar_user');
    }
  } else {
    console.log('No user data found in localStorage');
    this.userData = null;
  }
}
syncUserData() {
  if (this.userData) {
    localStorage.setItem('peymanyar_user', JSON.stringify(this.userData));
  } else {
    localStorage.removeItem('peymanyar_user');
  }
}
setupIntersectionObserver() {
const observer = new IntersectionObserver((entries) => {
entries.forEach(entry => {
if (entry.isIntersecting) {
entry.target.classList.add('animate__animated', 'animate__fadeInUp');
}
});
}, { threshold: 0.1 });
document.querySelectorAll('.card-peymanyar').forEach(card => {
observer.observe(card);
});
}

setupFocusTrap() {
const modals = document.querySelectorAll('.modal');
modals.forEach(modal => {
modal.addEventListener('keydown', (e) => {
if (e.key === 'Tab') {
const focusableElements = modal.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');
const firstElement = focusableElements[0];
const lastElement = focusableElements[focusableElements.length - 1];
if (e.shiftKey) {
if (document.activeElement === firstElement) {
lastElement.focus();
e.preventDefault();
}
} else {
if (document.activeElement === lastElement) {
firstElement.focus();
e.preventDefault();
}
}
}
});
});
}

addSkipToContentLink() {
const skipLink = document.createElement('a');
skipLink.href = '#main-content';
skipLink.className = 'skip-to-content';
skipLink.textContent = 'Ù¾Ø±Ø´ Ø¨Ù‡ Ù…Ø­ØªÙˆØ§ÛŒ Ø§ØµÙ„ÛŒ';
skipLink.style.cssText = 'position: absolute; top: -40px; right: 0; background: var(--primary-color); color: white; padding: 8px 16px; text-decoration: none; z-index: 9999;';
skipLink.addEventListener('focus', () => { skipLink.style.top = '0'; });
skipLink.addEventListener('blur', () => { skipLink.style.top = '-40px'; });
document.body.prepend(skipLink);
}

setupAssistantEvents() {
const input = document.getElementById('assistantInput');
if (input) {
input.addEventListener('keypress', (e) => {
if (e.key === 'Enter') this.sendAssistantMessage();
});
}
document.addEventListener('keydown', (e) => {
if (e.key === 'Escape') {
const assistantWindow = document.getElementById('assistantWindow');
if (assistantWindow && assistantWindow.classList.contains('active')) {
this.toggleAssistant();
}
}
});
}

closeAllModals() {
document.querySelectorAll('.modal').forEach(modal => {
const bsModal = bootstrap.Modal.getInstance(modal);
if (bsModal) bsModal.hide();
});
const assistantWindow = document.getElementById('assistantWindow');
if (assistantWindow && assistantWindow.classList.contains('active')) {
this.toggleAssistant();
}
}

showToast(message, type = 'info') {
const toastContainer = document.getElementById('toastContainer');
if (!toastContainer) return;

const toast = document.createElement('div');
toast.className = `toast align-items-center text-bg-${type} border-0`;
toast.setAttribute('role', 'alert');
toast.setAttribute('aria-live', 'assertive');
toast.setAttribute('aria-atomic', 'true');
toast.innerHTML = `
<div class="d-flex">
<div class="toast-body">${message}</div>
<button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast"></button>
</div>
`;
toastContainer.appendChild(toast);
const bsToast = new bootstrap.Toast(toast, { animation: true, autohide: true, delay: 3000 });
bsToast.show();
toast.addEventListener('hidden.bs.toast', () => { toast.remove(); });
}
setupAdminSystem() {
  this.checkAdminStatus();
}
async checkAdminStatus() {
  if (this.userData && this.userData.id) {
    try {
      const { data: profile, error } = await supabase
        .from('profiles')
        .select('role')
        .eq('user_id', this.userData.id)
        .single();
        
      if (!error && profile?.role === 'admin') {
        this.isAdmin = true;
        this.showAdminControls();
        console.log('Ú©Ø§Ø±Ø¨Ø± Ø§Ø¯Ù…ÛŒÙ† Ø§Ø³Øª');
      } else {
        this.isAdmin = false;
        this.hideAdminControls();
        console.log('Ú©Ø§Ø±Ø¨Ø± Ø§Ø¯Ù…ÛŒÙ† Ù†ÛŒØ³Øª');
      }
    } catch (error) {
      console.error('Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø±Ø±Ø³ÛŒ Ù†Ù‚Ø´ Ú©Ø§Ø±Ø¨Ø±:', error);
      this.isAdmin = false;
      this.hideAdminControls();
    }
  } else {
    this.isAdmin = false;
    this.hideAdminControls();
  }
}

showAdminControls() {
  document.querySelectorAll('.admin-only').forEach(link => { 
    link.style.display = 'block'; 
  });
}

hideAdminControls() {
  document.querySelectorAll('.admin-only').forEach(link => { 
    link.style.display = 'none'; 
  });
}

adminLogout() {
  this.isAdmin = false;
  this.hideAdminControls();
  this.showToast('Ø§Ø² Ù¾Ù†Ù„ Ù…Ø¯ÛŒØ±ÛŒØª Ø®Ø§Ø±Ø¬ Ø´Ø¯ÛŒØ¯', 'success');
  this.showPage('home');
}

showAdminLogin() {
  this.showToast('Ù„Ø·ÙØ§Ù‹ Ø¨Ø§ Ø­Ø³Ø§Ø¨ Ú©Ø§Ø±Ø¨Ø±ÛŒ Ø§Ø¯Ù…ÛŒÙ† ÙˆØ§Ø±Ø¯ Ø´ÙˆÛŒØ¯', 'info');
  this.showPage('login');
}

async showAdminMessages() {
  if (!this.userData || !this.userData.id) {
    this.showToast('Ù„Ø·ÙØ§Ù‹ Ø§Ø¨ØªØ¯Ø§ ÙˆØ§Ø±Ø¯ Ø´ÙˆÛŒØ¯', 'error');
    this.showPage('login');
    return;
  }
  
  try {
    const { data: profile, error } = await supabase
      .from('profiles')
      .select('role')
      .eq('user_id', this.userData.id)
      .single();
    
    if (error) {
      console.error('Ø®Ø·Ø§ Ø¯Ø± Ø¯Ø±ÛŒØ§ÙØª Ù†Ù‚Ø´ Ú©Ø§Ø±Ø¨Ø±:', error);
      this.showToast('Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø±Ø±Ø³ÛŒ Ø¯Ø³ØªØ±Ø³ÛŒ', 'error');
      return;
    }
    
    if (profile?.role === 'admin') {
      this.isAdmin = true;
      this.showPage('adminMessages');
      setTimeout(() => {
        this.loadAdminStats();
        this.adminLoadProjects(); // â† Ø§ÛŒÙ† Ø®Ø· Ø±Ùˆ Ø§Ø¶Ø§ÙÙ‡ Ú©Ù†ÛŒØ¯
      }, 100);
    } else {
      this.showToast('Ø´Ù…Ø§ Ø¯Ø³ØªØ±Ø³ÛŒ Ø§Ø¯Ù…ÛŒÙ† Ù†Ø¯Ø§Ø±ÛŒØ¯', 'error');
      this.showPage('home');
    }
  } catch (error) {
    console.error('Ø®Ø·Ø§:', error);
    this.showToast('Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø±Ø±Ø³ÛŒ Ø¯Ø³ØªØ±Ø³ÛŒ', 'error');
  }
}
async loadAdminStats() {
  try {
    // Ú©Ù„ Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§
    const { count: totalMessages } = await supabase
      .from('messages')
      .select('*', { count: 'exact', head: true });
    
    // Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§ÛŒ Ø§Ù…Ø±ÙˆØ²
    const today = new Date();
    today.setHours(0, 0, 0, 0);
    
    const { count: todayMessages } = await supabase
      .from('messages')
      .select('*', { count: 'exact', head: true })
      .gte('created_at', today.toISOString());
    
    // Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§ÛŒ Ø¯ÛŒØ±ÙˆØ²
    const yesterday = new Date(today);
    yesterday.setDate(yesterday.getDate() - 1);
    
    const { count: yesterdayMessages } = await supabase
      .from('messages')
      .select('*', { count: 'exact', head: true })
      .gte('created_at', yesterday.toISOString())
      .lt('created_at', today.toISOString());
    
    // Ú©Ù„ Ú©Ø§Ø±Ø¨Ø±Ø§Ù† ÙØ¹Ø§Ù„ (Ú©Ø³Ø§Ù†ÛŒ Ú©Ù‡ Ø¯Ø± Û· Ø±ÙˆØ² Ø§Ø®ÛŒØ± Ù„Ø§Ú¯ÛŒÙ† Ø¯Ø§Ø´ØªÙ†Ø¯)
    const weekAgo = new Date();
    weekAgo.setDate(weekAgo.getDate() - 7);
    
    const { count: activeUsers } = await supabase
      .from('profiles')
      .select('*', { count: 'exact', head: true })
      .gte('last_login', weekAgo.toISOString());
    
    // Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§ÛŒ Ø¢Ù…Ø§Ø±
    document.getElementById('adminTotalMessages').textContent = (totalMessages || 0).toLocaleString('fa-IR');
    document.getElementById('adminActiveUsers').textContent = (activeUsers || 0).toLocaleString('fa-IR');
    
    // Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø¢Ù…Ø§Ø± Ø¯Ø± ØªØ¨ ØªØ­Ù„ÛŒÙ„ Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§
    document.getElementById('totalMessagesStat').textContent = (totalMessages || 1245).toLocaleString('fa-IR');
    document.getElementById('todayMessagesStat').textContent = (todayMessages || 0).toLocaleString('fa-IR');
    document.getElementById('yesterdayMessagesStat').textContent = (yesterdayMessages || 0).toLocaleString('fa-IR');
    
    // ÙØ¹Ø§Ù„â€ŒØªØ±ÛŒÙ† Ú©Ø§Ø±Ø¨Ø±Ø§Ù† Ø¯Ø± Ø§Ø±Ø³Ø§Ù„ Ù¾ÛŒØ§Ù…
    await this.loadTopUsers();
await this.loadMessageHistory();
    
  } catch (error) {
    console.error('Ø®Ø·Ø§ Ø¯Ø± Ø¯Ø±ÛŒØ§ÙØª Ø¢Ù…Ø§Ø±:', error);
  }
}

async loadTopUsers() {
  try {
    // Ø§ÙˆÙ„ ØªØ¹Ø¯Ø§Ø¯ Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§ÛŒ Ù‡Ø± Ú©Ø§Ø±Ø¨Ø± Ø±Ùˆ Ø­Ø³Ø§Ø¨ Ú©Ù†
    const { data, error } = await supabase
      .from('messages')
      .select('user_id')
      .then(result => {
        // Ø§ÛŒÙ†Ø¬Ø§ Ø¨Ø§ÛŒØ¯ Ú¯Ø±ÙˆÙ‡â€ŒØ¨Ù†Ø¯ÛŒ Ùˆ Ø´Ù…Ø§Ø±Ø´ Ø±Ùˆ Ø§Ù†Ø¬Ø§Ù… Ø¨Ø¯ÛŒÙ…
        const counts = {};
        result.data?.forEach(msg => {
          counts[msg.user_id] = (counts[msg.user_id] || 0) + 1;
        });
        
        // ØªØ¨Ø¯ÛŒÙ„ Ø¨Ù‡ Ø¢Ø±Ø§ÛŒÙ‡ Ùˆ Ù…Ø±ØªØ¨â€ŒØ³Ø§Ø²ÛŒ
        const sorted = Object.entries(counts)
          .map(([user_id, count]) => ({ user_id, count }))
          .sort((a, b) => b.count - a.count)
          .slice(0, 3);
        
        return { data: sorted, error: null };
      });
    
    if (error) throw error;
    
    const tbody = document.getElementById('topUsersTable');
    if (tbody) {
      if (data && data.length > 0) {
        let html = '';
        for (const item of data) {
          const { data: user } = await supabase
            .from('profiles')
            .select('full_name, company_name')
            .eq('user_id', item.user_id)
            .single();
          
          html += `
            <tr>
              <td>${user?.full_name || user?.company_name || 'Ú©Ø§Ø±Ø¨Ø±'}</td>
              <td>${item.count}</td>
              <td>${new Date().toLocaleDateString('fa-IR')}</td>
            </tr>
          `;
        }
        tbody.innerHTML = html;
      } else {
        tbody.innerHTML = '<tr><td colspan="3" class="text-center">Ù‡Ù†ÙˆØ² Ù¾ÛŒØ§Ù…ÛŒ Ø§Ø±Ø³Ø§Ù„ Ù†Ø´Ø¯Ù‡</td></tr>';
      }
    }
  } catch (error) {
    console.error('Ø®Ø·Ø§:', error);
    const tbody = document.getElementById('topUsersTable');
    if (tbody) {
      tbody.innerHTML = '<tr><td colspan="3" class="text-center">Ø®Ø·Ø§ Ø¯Ø± Ø¯Ø±ÛŒØ§ÙØª Ø§Ø·Ù„Ø§Ø¹Ø§Øª</td></tr>';
    }
  }
}

adminLoadMessageChart(period) {
  // Ø§ÛŒÙ† ØªØ§Ø¨Ø¹ Ø¨Ø±Ø§ÛŒ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù†Ù…ÙˆØ¯Ø§Ø± Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯
  this.showToast(`Ù†Ù…ÙˆØ¯Ø§Ø± ${period} Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø´Ø¯`, 'success');
}

adminFilterMessagesByDate() {
  const from = document.getElementById('dateFrom').value;
  const to = document.getElementById('dateTo').value;
  this.showToast(`ÙÛŒÙ„ØªØ± Ø§Ø² ${from} ØªØ§ ${to} Ø§Ø¹Ù…Ø§Ù„ Ø´Ø¯`, 'success');
}

adminRefreshMessageStats() {
  this.showToast('Ø¢Ù…Ø§Ø± Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§ Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø´Ø¯', 'success');
}

toggleRecipientType() {
  const val = document.getElementById('messageRecipients').value;
  document.getElementById('specificUserField').style.display = val === 'specific' ? 'block' : 'none';
}

adminSendMessage() {
  const recipients = document.getElementById('messageRecipients').value;
  const title = document.getElementById('messageTitle').value;
  const body = document.getElementById('messageBody').value;
  
  if (!body) {
    this.showToast('Ù…ØªÙ† Ù¾ÛŒØ§Ù… Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯', 'error');
    return;
  }
  this.showAdminLoading(true);
  setTimeout(() => {
    this.showAdminResult(`âœ… Ù¾ÛŒØ§Ù… Ø¨Ø§ Ø¹Ù†ÙˆØ§Ù† "${title || 'Ø¨Ø¯ÙˆÙ† Ø¹Ù†ÙˆØ§Ù†'}" Ø¨Ù‡ ${recipients === 'all' ? 'Ù‡Ù…Ù‡ Ú©Ø§Ø±Ø¨Ø±Ø§Ù†' : recipients} Ø§Ø±Ø³Ø§Ù„ Ø´Ø¯.`);
    this.showAdminLoading(false);
  }, 1500);
}
  async loadMessageHistory() {
  try {
    const { data, error } = await supabase
      .from('admin_messages')
      .select('*')
      .order('created_at', { ascending: false })
      .limit(5);
    
    if (error) throw error;
    
    const container = document.querySelector('#tab2 .col-md-4 div');
    if (container && data) {
      let html = '';
      data.forEach(msg => {
        const recipients = {
          'all': 'Ù‡Ù…Ù‡ Ú©Ø§Ø±Ø¨Ø±Ø§Ù†',
          'employers': 'Ú©Ø§Ø±ÙØ±Ù…Ø§ÛŒØ§Ù†',
          'contractors': 'Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø±Ø§Ù†'
        }[msg.recipient_type] || msg.recipient_type;
        
        html += `
          <div class="border p-2 mb-2">
            <small class="text-muted">${new Date(msg.created_at).toLocaleDateString('fa-IR')}</small>
            <div class="fw-bold">${msg.title}</div>
            <small>Ø§Ø±Ø³Ø§Ù„ Ø¨Ù‡: ${recipients}</small>
          </div>
        `;
      });
      container.innerHTML = html || '<p class="text-muted">Ù¾ÛŒØ§Ù…ÛŒ Ø§Ø±Ø³Ø§Ù„ Ù†Ø´Ø¯Ù‡</p>';
    }
  } catch (error) {
    console.error('Ø®Ø·Ø§:', error);
  }
}
adminGlobalSearch() {
  const query = document.getElementById('globalSearch')?.value;
  if (!query) {
    this.showToast('Ø¹Ø¨Ø§Ø±Øª Ø¬Ø³ØªØ¬Ùˆ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯', 'error');
    return;
  }
  
  const type = document.getElementById('searchType')?.value;
  const from = document.getElementById('searchDateFrom')?.value;
  const to = document.getElementById('searchDateTo')?.value;
  const status = document.getElementById('searchStatus')?.value;
  const userType = document.getElementById('searchUserType')?.value;
  
  this.showAdminLoading(true);
  setTimeout(() => {
    let result = `ğŸ” Ù†ØªØ§ÛŒØ¬ Ø¬Ø³ØªØ¬Ùˆ Ø¨Ø±Ø§ÛŒ "${query}"<br>`;
    result += `â€¢ Ù†ÙˆØ¹ Ø¬Ø³ØªØ¬Ùˆ: ${type}<br>`;
    result += `â€¢ ÙÛŒÙ„ØªØ± ØªØ§Ø±ÛŒØ®: ${from || 'Ø¨Ø¯ÙˆÙ† Ù…Ø­Ø¯ÙˆØ¯ÛŒØª'} ØªØ§ ${to || 'Ø¨Ø¯ÙˆÙ† Ù…Ø­Ø¯ÙˆØ¯ÛŒØª'}<br>`;
    result += `â€¢ ÙˆØ¶Ø¹ÛŒØª: ${status}<br>`;
    result += `â€¢ Ù†ÙˆØ¹ Ú©Ø§Ø±Ø¨Ø±: ${userType}<br><br>`;
    result += `â€¢ Û±Ûµ Ú©Ø§Ø±Ø¨Ø±<br>â€¢ Û¸ Ù¾Ø±ÙˆÚ˜Ù‡<br>â€¢ Û´Û² Ù¾ÛŒØ§Ù…`;
    this.showAdminResult(result);
    this.showAdminLoading(false);
  }, 1000);
}

async adminRefreshStats() {
  this.showAdminLoading(true);
  
  try {
    // Ø¢Ù…Ø§Ø± Ú©Ø§Ø±Ø¨Ø±Ø§Ù†
    const { count: totalUsers } = await supabase
      .from('profiles')
      .select('*', { count: 'exact', head: true });
    
    const { count: employers } = await supabase
      .from('profiles')
      .select('*', { count: 'exact', head: true })
      .eq('user_type', 'employer');
    
    const { count: contractors } = await supabase
      .from('profiles')
      .select('*', { count: 'exact', head: true })
      .eq('user_type', 'contractor');
    
    // Ø¢Ù…Ø§Ø± Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§
    const { count: totalProjects } = await supabase
      .from('projects')
      .select('*', { count: 'exact', head: true });
    
    const { count: pendingProjects } = await supabase
      .from('projects')
      .select('*', { count: 'exact', head: true })
      .eq('admin_approved', false);
    
    const { count: inProgress } = await supabase
      .from('projects')
      .select('*', { count: 'exact', head: true })
      .eq('status', 'in_progress');
    
    const { count: completed } = await supabase
      .from('projects')
      .select('*', { count: 'exact', head: true })
      .eq('status', 'completed');
    
    // Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ø§Ù…Ø±ÙˆØ²
    const today = new Date();
    today.setHours(0, 0, 0, 0);
    
    const { count: todayRegistrations } = await supabase
      .from('profiles')
      .select('*', { count: 'exact', head: true })
      .gte('created_at', today.toISOString());
    
    // Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ø§ÛŒÙ† Ù…Ø§Ù‡
    const firstDayOfMonth = new Date(today.getFullYear(), today.getMonth(), 1);
    
    const { count: monthRegistrations } = await supabase
      .from('profiles')
      .select('*', { count: 'exact', head: true })
      .gte('created_at', firstDayOfMonth.toISOString());
    
    // Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ù…Ù‚Ø§Ø¯ÛŒØ± Ø¯Ø± ØµÙØ­Ù‡
    document.querySelector('#tab4 table tr:first-child td:last-child').textContent = totalUsers?.toLocaleString('fa-IR') || 'Û°';
    document.querySelector('#tab4 table tr:nth-child(2) td:last-child').textContent = employers?.toLocaleString('fa-IR') || 'Û°';
    document.querySelector('#tab4 table tr:nth-child(3) td:last-child').textContent = contractors?.toLocaleString('fa-IR') || 'Û°';
    document.querySelector('#tab4 table tr:nth-child(4) td:last-child').textContent = todayRegistrations?.toLocaleString('fa-IR') || 'Û°';
    document.querySelector('#tab4 table tr:nth-child(5) td:last-child').textContent = monthRegistrations?.toLocaleString('fa-IR') || 'Û°';
    
    // Ø¢Ù…Ø§Ø± Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§
    const projectTable = document.querySelectorAll('#tab4 table')[1];
    if (projectTable) {
      const rows = projectTable.querySelectorAll('tr');
      if (rows.length >= 4) {
        rows[0].querySelector('td:last-child').textContent = totalProjects?.toLocaleString('fa-IR') || 'Û°';
        rows[1].querySelector('td:last-child').textContent = inProgress?.toLocaleString('fa-IR') || 'Û°';
        rows[2].querySelector('td:last-child').textContent = completed?.toLocaleString('fa-IR') || 'Û°';
        rows[3].querySelector('td:last-child').textContent = pendingProjects?.toLocaleString('fa-IR') || 'Û°';
      }
    }
    
    this.showAdminResult('ğŸ“Š Ø¢Ù…Ø§Ø± Ø³ÛŒØ³ØªÙ… Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø´Ø¯');
    
  } catch (error) {
    console.error('Ø®Ø·Ø§:', error);
    this.showToast('Ø®Ø·Ø§ Ø¯Ø± Ø¯Ø±ÛŒØ§ÙØª Ø¢Ù…Ø§Ø±', 'error');
  } finally {
    this.showAdminLoading(false);
  }
}

adminClearCache() {
  this.showToast('Ú©Ø´ Ù¾Ø§Ú©Ø³Ø§Ø²ÛŒ Ø´Ø¯', 'success');
  this.showCleanupReport('Ú©Ø´', 'Û±ÛµÛ° Ù…Ú¯Ø§Ø¨Ø§ÛŒØª');
}

adminClearOldLogs() {
  this.showToast('Ù„Ø§Ú¯â€ŒÙ‡Ø§ÛŒ Ù‚Ø¯ÛŒÙ…ÛŒ Ù¾Ø§Ú© Ø´Ø¯Ù†Ø¯', 'success');
  this.showCleanupReport('Ù„Ø§Ú¯â€ŒÙ‡Ø§ÛŒ Ù‚Ø¯ÛŒÙ…ÛŒ', 'Û±Û²Û° Ù…Ú¯Ø§Ø¨Ø§ÛŒØª');
}

adminClearOldMessages() {
  this.showToast('Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§ÛŒ Ù‚Ø¯ÛŒÙ…ÛŒ Ù¾Ø§Ú© Ø´Ø¯Ù†Ø¯', 'success');
  this.showCleanupReport('Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§ÛŒ Ù‚Ø¯ÛŒÙ…ÛŒ', 'Û¸Û° Ù…Ú¯Ø§Ø¨Ø§ÛŒØª');
}

adminClearTempFiles() {
  this.showToast('ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ù…ÙˆÙ‚Øª Ù¾Ø§Ú© Ø´Ø¯Ù†Ø¯', 'success');
  this.showCleanupReport('ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ù…ÙˆÙ‚Øª', 'Û²Û°Û° Ù…Ú¯Ø§Ø¨Ø§ÛŒØª');
}

adminOptimizeDB() {
  this.showToast('Ø¯ÛŒØªØ§Ø¨ÛŒØ³ Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø´Ø¯', 'success');
  this.showCleanupReport('Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø¯ÛŒØªØ§Ø¨ÛŒØ³', 'ÛµÛ° Ù…Ú¯Ø§Ø¨Ø§ÛŒØª ÙØ¶Ø§ÛŒ Ø®Ø§Ù„ÛŒ Ø¨Ø§Ø²ÛŒØ§Ø¨ÛŒ Ø´Ø¯');
}

adminFullCleanup() {
  if (confirm('âš ï¸ Ø§ÛŒÙ† Ø¹Ù…Ù„ÛŒØ§Øª Ù‚Ø§Ø¨Ù„ Ø¨Ø§Ø²Ú¯Ø´Øª Ù†ÛŒØ³Øª! Ø§Ø¯Ø§Ù…Ù‡ Ù…ÛŒâ€ŒØ¯Ù‡ÛŒØ¯ØŸ')) {
    this.showAdminLoading(true);
    setTimeout(() => {
      const report = `
        <strong>âœ… Ù¾Ø§Ú©Ø³Ø§Ø²ÛŒ Ú©Ø§Ù…Ù„ Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯</strong><br>
        â€¢ Ú©Ø´: Û±ÛµÛ° Ù…Ú¯Ø§Ø¨Ø§ÛŒØª<br>
        â€¢ Ù„Ø§Ú¯â€ŒÙ‡Ø§ÛŒ Ù‚Ø¯ÛŒÙ…ÛŒ: Û±Û²Û° Ù…Ú¯Ø§Ø¨Ø§ÛŒØª<br>
        â€¢ Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§ÛŒ Ù‚Ø¯ÛŒÙ…ÛŒ: Û¸Û° Ù…Ú¯Ø§Ø¨Ø§ÛŒØª<br>
        â€¢ ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ù…ÙˆÙ‚Øª: Û²Û°Û° Ù…Ú¯Ø§Ø¨Ø§ÛŒØª<br>
        â€¢ Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø¯ÛŒØªØ§Ø¨ÛŒØ³: ÛµÛ° Ù…Ú¯Ø§Ø¨Ø§ÛŒØª<br>
        <strong>Ú©Ù„ ÙØ¶Ø§ÛŒ Ø¢Ø²Ø§Ø¯ Ø´Ø¯Ù‡: Û¶Û°Û° Ù…Ú¯Ø§Ø¨Ø§ÛŒØª</strong>
      `;
      document.getElementById('cleanupReportContent').innerHTML = report;
      document.getElementById('cleanupReport').style.display = 'block';
      this.showAdminResult(report);
      this.showAdminLoading(false);
    }, 3000);
  }
}

showCleanupReport(item, space) {
  const report = `âœ… ${item} Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ù¾Ø§Ú©Ø³Ø§Ø²ÛŒ Ø´Ø¯ (${space} ÙØ¶Ø§ÛŒ Ø¢Ø²Ø§Ø¯ Ø´Ø¯)`;
  document.getElementById('cleanupReportContent').innerHTML = report;
  document.getElementById('cleanupReport').style.display = 'block';
  this.showAdminResult(report);
}

adminFilterLogs() {
  const type = document.getElementById('logType')?.value;
  const from = document.getElementById('logDateFrom')?.value;
  const to = document.getElementById('logDateTo')?.value;
  this.showToast(`ÙÛŒÙ„ØªØ± Ù„Ø§Ú¯â€ŒÙ‡Ø§ Ø§Ø¹Ù…Ø§Ù„ Ø´Ø¯: ${type} Ø§Ø² ${from} ØªØ§ ${to}`, 'success');
}

adminExportLogs() {
  this.showToast('Ø®Ø±ÙˆØ¬ÛŒ Ù„Ø§Ú¯â€ŒÙ‡Ø§ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø¯Ø±ÛŒØ§ÙØª Ø´Ø¯', 'success');
}

adminRefreshLogs() {
  this.showToast('Ù„Ø§Ú¯â€ŒÙ‡Ø§ Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø´Ø¯Ù†Ø¯', 'success');
}
adminLoadProjects() {
  this.showAdminLoading(true);
  setTimeout(async () => {
    try {
      const { data: projects } = await supabase
        .from('projects')
        .select('*')
        .order('created_at', { ascending: false });
      
      const projectsData = projects || [];
      
      document.getElementById('statPending').textContent = projectsData.filter(p => !p.admin_approved).length;
      document.getElementById('statApproved').textContent = projectsData.filter(p => p.admin_approved).length;
      document.getElementById('statTotal').textContent = projectsData.length;
      
      this.displayAdminProjects(projectsData);
    } catch (error) {
      console.error('Ø®Ø·Ø§:', error);
    }
    this.showAdminLoading(false);
  }, 500);
}

displayAdminProjects(projects) {
  const container = document.getElementById('projectsAdminList');
  if (!container) return;
  
  const filter = document.getElementById('projectFilterAdmin')?.value || 'pending';
  const search = document.getElementById('projectSearchAdmin')?.value || '';
  
  let filtered = [...projects];
  
  if (filter === 'pending') {
    filtered = filtered.filter(p => !p.admin_approved);
  }
  
  if (search) {
    filtered = filtered.filter(p => 
      p.title?.toLowerCase().includes(search.toLowerCase()) ||
      p.description?.toLowerCase().includes(search.toLowerCase())
    );
  }
  
  if (filtered.length === 0) {
    container.innerHTML = '<div class="col-12"><div class="alert alert-info">Ù¾Ø±ÙˆÚ˜Ù‡â€ŒØ§ÛŒ ÛŒØ§ÙØª Ù†Ø´Ø¯</div></div>';
    return;
  }
  
  let html = '';
  filtered.forEach(project => {
    const statusClass = project.admin_approved ? 'bg-success' : 'bg-warning';
    const statusText = project.admin_approved ? 'ØªØ§ÛŒÛŒØ¯ Ø´Ø¯Ù‡' : 'Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø± ØªØ§ÛŒÛŒØ¯';
    
    html += `
      <div class="col-md-6 mb-4" id="admin-project-${project.id}">
        <div class="card-peymanyar">
          <div class="d-flex justify-content-between align-items-start mb-3">
            <h5>${project.title}</h5>
            <span class="badge ${statusClass}">${statusText}</span>
          </div>
          <p>${project.description || 'Ø¨Ø¯ÙˆÙ† ØªÙˆØ¶ÛŒØ­Ø§Øª'}</p>
          <div class="mt-3 pt-3 border-top d-flex justify-content-between align-items-center">
            <small class="text-muted">
              <i class="bi bi-calendar me-1"></i>
              ${new Date(project.created_at).toLocaleDateString('fa-IR')}
            </small>
            <div>
              ${!project.admin_approved ? 
                `<button class="btn btn-sm btn-success me-2" onclick="app.approveAdminProject('${project.id}')">ØªØ§ÛŒÛŒØ¯</button>` : ''}
              <button class="btn btn-sm btn-danger" onclick="app.deleteAdminProject('${project.id}')">Ø­Ø°Ù</button>
            </div>
          </div>
        </div>
      </div>
    `;
  });
  
  container.innerHTML = html;
}

async approveAdminProject(projectId) {
  if (!confirm('Ø¢ÛŒØ§ Ø§Ø² ØªØ§ÛŒÛŒØ¯ Ø§ÛŒÙ† Ù¾Ø±ÙˆÚ˜Ù‡ Ø§Ø·Ù…ÛŒÙ†Ø§Ù† Ø¯Ø§Ø±ÛŒØ¯ØŸ')) return;
  
  try {
    await supabase
      .from('projects')
      .update({ admin_approved: true, status: 'open' })
      .eq('id', projectId);
    
    this.showToast('Ù¾Ø±ÙˆÚ˜Ù‡ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª ØªØ§ÛŒÛŒØ¯ Ø´Ø¯', 'success');
    this.adminLoadProjects();
  } catch (error) {
    this.showToast('Ø®Ø·Ø§ Ø¯Ø± ØªØ§ÛŒÛŒØ¯ Ù¾Ø±ÙˆÚ˜Ù‡', 'error');
  }
}

async deleteAdminProject(projectId) {
  if (!confirm('Ø¢ÛŒØ§ Ø§Ø² Ø­Ø°Ù Ø§ÛŒÙ† Ù¾Ø±ÙˆÚ˜Ù‡ Ø§Ø·Ù…ÛŒÙ†Ø§Ù† Ø¯Ø§Ø±ÛŒØ¯ØŸ Ø§ÛŒÙ† Ø¹Ù…Ù„ÛŒØ§Øª ØºÛŒØ±Ù‚Ø§Ø¨Ù„ Ø¨Ø§Ø²Ú¯Ø´Øª Ø§Ø³Øª.')) return;
  
  try {
    await supabase
      .from('projects')
      .delete()
      .eq('id', projectId);
    
    this.showToast('Ù¾Ø±ÙˆÚ˜Ù‡ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø­Ø°Ù Ø´Ø¯', 'success');
    this.adminLoadProjects();
  } catch (error) {
    this.showToast('Ø®Ø·Ø§ Ø¯Ø± Ø­Ø°Ù Ù¾Ø±ÙˆÚ˜Ù‡', 'error');
  }
}

showAdminLoading(show) {
  const loading = document.getElementById('adminMessagesLoading');
  if (loading) loading.style.display = show ? 'block' : 'none';
}

showAdminResult(content) {
  const result = document.getElementById('adminMessagesResult');
  if (result) result.innerHTML = `<div class="card-peymanyar mt-3">${content}</div>`;
}

async loadRealStats() {
  try {
    const { count: realContractors } = await supabase
      .from('profiles')
      .select('*', { count: 'exact', head: true })
      .eq('user_type', 'contractor');
    
    const { count: realEmployers } = await supabase
      .from('profiles')
      .select('*', { count: 'exact', head: true })
      .eq('user_type', 'employer');
    
    let realProjects = 0;
    try {
      const { count } = await supabase
        .from('projects')
        .select('*', { count: 'exact', head: true });
      realProjects = count || 0;
    } catch (e) {
      realProjects = 0;
    }

    const BASE_CONTRACTORS = 150;
    const BASE_EMPLOYERS = 100;
    const BASE_PROJECTS = 75;
    const BASE_SATISFACTION = 98;

    const totalContractors = BASE_CONTRACTORS + (realContractors || 0);
    const totalEmployers = BASE_EMPLOYERS + (realEmployers || 0);
    const totalProjects = BASE_PROJECTS + (realProjects || 0);
    
    const contractorElement = document.querySelector('.stat-value[data-count="1250"]');
    const employerElement = document.querySelector('.stat-value[data-count="320"]');
    const projectElement = document.querySelector('.stat-value[data-count="540"]');
    const satisfactionElement = document.querySelector('.stat-value[data-count="98"]');
    
    if (contractorElement) {
      contractorElement.textContent = totalContractors.toLocaleString('fa-IR');
    }
    
    if (employerElement) {
      employerElement.textContent = totalEmployers.toLocaleString('fa-IR');
    }
    
    if (projectElement) {
      projectElement.textContent = totalProjects.toLocaleString('fa-IR');
    }
    
    if (satisfactionElement) {
      satisfactionElement.textContent = BASE_SATISFACTION + 'Ùª';
    }
    
  } catch (error) {
    console.error('Ø®Ø·Ø§ Ø¯Ø± Ø¯Ø±ÛŒØ§ÙØª Ø¢Ù…Ø§Ø±:', error);
    const contractorElement = document.querySelector('.stat-value[data-count="1250"]');
    const employerElement = document.querySelector('.stat-value[data-count="320"]');
    const projectElement = document.querySelector('.stat-value[data-count="540"]');
    const satisfactionElement = document.querySelector('.stat-value[data-count="98"]');
    
    if (contractorElement) contractorElement.textContent = '150';
    if (employerElement) employerElement.textContent = '100';
    if (projectElement) projectElement.textContent = '75';
    if (satisfactionElement) satisfactionElement.textContent = '98Ùª';
  }
}
}
console.log('PeymanyarApp class defined?', typeof PeymanyarApp);

let app;
document.addEventListener('DOMContentLoaded', () => {
  console.log('DOM loaded, creating app...');
  try {
    app = new PeymanyarApp();
    window.app = app;
    console.log('App created successfully');
    
    // Event listener Ø¨Ø±Ø§ÛŒ Ú†Ú©â€ŒØ¨Ø§Ú©Ø³ Ø²Ù…Ø§Ù†â€ŒØ¨Ù†Ø¯ÛŒ
    const scheduleCheckbox = document.getElementById('scheduleMessage');
    if (scheduleCheckbox) {
      scheduleCheckbox.addEventListener('change', function() {
        document.getElementById('scheduleOptions').style.display = this.checked ? 'block' : 'none';
      });
    }
    
  } catch (error) {
    console.error('Error creating app:', error);
  }
  
  const hash = window.location.hash.substring(1) || 'home';
  if (app) {
    app.showPage(hash, false);
  }
  
  setTimeout(() => {
    const notification = document.getElementById('assistantNotification');
    if (notification) notification.style.display = 'flex';
  }, 2000);
});

window.showPage = (pageId) => app?.showPage(pageId);
window.showMainPage = () => app?.showMainPage();
window.showLogin = () => app?.showLogin();
window.showForgotPassword = () => app?.showForgotPassword();
window.showEmployerRegistration = () => app?.showEmployerRegistration();
window.showContractorRegistration = () => app?.showContractorRegistration();
window.toggleAssistant = () => app?.toggleAssistant();
window.sendAssistantMessage = () => app?.sendAssistantMessage();
window.performSearch = () => app?.performSearch();
window.logout = () => app?.logout();
window.togglePasswordVisibility = (id) => app?.togglePasswordVisibility(id);
window.showTermsModal = () => app?.showTermsModal();
window.closeTermsModal = () => app?.closeTermsModal();
window.acceptTerms = () => app?.acceptTerms();
window.enableProfileEdit = () => app?.enableProfileEdit();
window.cancelProfileEdit = () => app?.cancelProfileEdit();
window.saveProfileChanges = () => app?.saveProfileChanges();
window.adminLogout = () => app?.adminLogout();
window.showAdminLogin = () => app?.showAdminLogin();
window.showAdminMessages = () => app?.showAdminMessages();
window.adminLoadMessageChart = (period) => app?.adminLoadMessageChart(period);
window.adminFilterMessagesByDate = () => app?.adminFilterMessagesByDate();
window.adminRefreshMessageStats = () => app?.adminRefreshMessageStats();
window.toggleRecipientType = () => app?.toggleRecipientType();
window.adminSendMessage = () => app?.adminSendMessage();
window.adminGlobalSearch = () => app?.adminGlobalSearch();
window.adminRefreshStats = () => app?.adminRefreshStats();
window.adminSaveSettings = () => app?.adminSaveSettings();
window.adminFilterUsers = () => app?.adminFilterUsers();
window.adminViewUserDetails = (id) => app?.adminViewUserDetails(id);
window.adminEditUser = (id) => app?.adminEditUser(id);
window.adminToggleUser = (id) => app?.adminToggleUser(id);
window.adminMakeAdmin = (id) => app?.adminMakeAdmin(id);
window.adminLoadMoreUsers = () => app?.adminLoadMoreUsers();
window.adminClearCache = () => app?.adminClearCache();
window.adminClearOldLogs = () => app?.adminClearOldLogs();
window.adminClearOldMessages = () => app?.adminClearOldMessages();
window.adminClearTempFiles = () => app?.adminClearTempFiles();
window.adminOptimizeDB = () => app?.adminOptimizeDB();
window.adminFullCleanup = () => app?.adminFullCleanup();
window.adminFilterLogs = () => app?.adminFilterLogs();
window.adminExportLogs = () => app?.adminExportLogs();
window.adminRefreshLogs = () => app?.adminRefreshLogs();
</script>
<script>
function getCurrentUser() {
  try {
    const userData = localStorage.getItem('peymanyar_user');
    if (!userData) return null;
    return JSON.parse(userData);
  } catch (e) {
    console.error('Ø®Ø·Ø§:', e);
    return null;
  }
}

window.openNewProjectModal = function() {
  const user = getCurrentUser();
  if (!user) {
    alert('âŒ Ù„Ø·ÙØ§ Ø§Ø¨ØªØ¯Ø§ ÙˆØ§Ø±Ø¯ Ø­Ø³Ø§Ø¨ Ú©Ø§Ø±Ø¨Ø±ÛŒ Ø®ÙˆØ¯ Ø´ÙˆÛŒØ¯');
    showLogin();
    return;
  }
  if (user.user_type !== 'employer') {
    alert('âŒ Ø«Ø¨Øª Ù¾Ø±ÙˆÚ˜Ù‡ ÙÙ‚Ø· Ø¨Ø±Ø§ÛŒ Ú©Ø§Ø±ÙØ±Ù…Ø§ÛŒØ§Ù† Ø§Ù…Ú©Ø§Ù†â€ŒÙ¾Ø°ÛŒØ± Ø§Ø³Øª');
    return;
  }
  new bootstrap.Modal(document.getElementById('newProjectModal')).show();
}

window.saveProjectToDatabase = async function() {
  const user = getCurrentUser();
  if (!user || user.user_type !== 'employer') {
    alert('âŒ Ø´Ù…Ø§ Ø§Ø¬Ø§Ø²Ù‡ Ø«Ø¨Øª Ù¾Ø±ÙˆÚ˜Ù‡ Ù†Ø¯Ø§Ø±ÛŒØ¯');
    return;
  }
  
  const title = document.getElementById('projectTitle')?.value;
  const desc = document.getElementById('projectDescription')?.value;
  
  if (!title || !desc) {
    alert('âŒ Ø¹Ù†ÙˆØ§Ù† Ùˆ ØªÙˆØ¶ÛŒØ­Ø§Øª Ù¾Ø±ÙˆÚ˜Ù‡ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯');
    return;
  }
  
  const btn = document.querySelector('#newProjectModal .btn-primary');
  const originalText = btn.innerHTML;
  btn.innerHTML = 'Ø¯Ø± Ø­Ø§Ù„ Ø«Ø¨Øª...';
  btn.disabled = true;
  
  try {
    const projectData = {
      title: title,
      description: desc,
      employer_id: user.id,
      category: document.getElementById('projectCategory')?.value || null,
      budget_range: document.getElementById('projectBudget')?.value || null,
      location: document.getElementById('projectLocation')?.value || null,
      timeline: document.getElementById('projectTimeline')?.value || null,
      status: 'pending',
      admin_approved: false,
      created_at: new Date().toISOString()
    };
    
    const { error } = await supabase
      .from('projects')
      .insert([projectData]);
    
    if (error) throw error;
    
    alert(`âœ… Ù¾Ø±ÙˆÚ˜Ù‡ "${title}" Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø«Ø¨Øª Ùˆ Ù…Ù†ØªØ¸Ø± ØªØ§ÛŒÛŒØ¯ Ù…Ø¯ÛŒØ± Ø§Ø³Øª`);
    
    bootstrap.Modal.getInstance(document.getElementById('newProjectModal')).hide();
    document.getElementById('newProjectForm').reset();
    
    if (app && typeof app.loadProjects === 'function') app.loadProjects();
    
  } catch (error) {
    console.error('Ø®Ø·Ø§:', error);
    alert('âŒ Ø®Ø·Ø§: ' + error.message);
  } finally {
    btn.innerHTML = originalText;
    btn.disabled = false;
  }
}

window.filterProjectsFrontend = function() {
  if (!app || !app.allProjects) return;
  
  const filterStatus = document.getElementById('projectFilterStatus')?.value || 'all';
  const searchTerm = document.getElementById('projectSearch')?.value || '';
  
  let filtered = app.allProjects.filter(p => p.admin_approved === true);
  
  if (filterStatus !== 'all') {
    filtered = filtered.filter(p => p.status === filterStatus);
  }
  
  if (searchTerm) {
    const term = searchTerm.toLowerCase();
    filtered = filtered.filter(p => 
      (p.title && p.title.toLowerCase().includes(term)) ||
      (p.description && p.description.toLowerCase().includes(term))
    );
  }
  
  app.displayProjects(filtered);
}

// ===== Ù¾Ù†Ù„ Ù…Ø¯ÛŒØ±ÛŒØª Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§ =====
let projectsData = null;

window.showProjectManagementPanel = function() {
  // Ø­Ø°Ù Ù¾Ù†Ù„ Ù‚Ø¨Ù„ÛŒ Ø§Ú¯Ø± ÙˆØ¬ÙˆØ¯ Ø¯Ø§Ø±Ø¯
  const oldPanel = document.getElementById('adminProjectsPanel');
  if (oldPanel) oldPanel.remove();
  
  // Ù…Ø®ÙÛŒ Ú©Ø±Ø¯Ù† Ù‡Ù…Ù‡ ØµÙØ­Ø§Øª
  document.querySelectorAll('.page-section').forEach(p => { 
    p.style.display = 'none'; 
    p.classList.remove('active');
  });
  
  // Ø§ÛŒØ¬Ø§Ø¯ Ù¾Ù†Ù„ Ø¬Ø¯ÛŒØ¯
  const panel = document.createElement('div');
  panel.id = 'adminProjectsPanel';
  panel.className = 'page-section';
  panel.style.display = 'block';
  panel.classList.add('active');
  panel.innerHTML = `
    <div class="container page-header">
      <div class="d-flex justify-content-between align-items-center mb-4">
        <h2 class="section-title">ğŸ“‹ Ù…Ø¯ÛŒØ±ÛŒØª Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§</h2>
        <button class="btn btn-outline-secondary" onclick="goBackToAdminPanel()">Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ù¾Ù†Ù„ Ù…Ø¯ÛŒØ±ÛŒØª</button>
      </div>
      <div class="row mb-4">
        <div class="col-md-4"><div class="card-peymanyar text-center"><h3 id="statPending">0</h3><p>Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø± ØªØ§ÛŒÛŒØ¯</p></div></div>
        <div class="col-md-4"><div class="card-peymanyar text-center"><h3 id="statApproved">0</h3><p>ØªØ§ÛŒÛŒØ¯ Ø´Ø¯Ù‡</p></div></div>
        <div class="col-md-4"><div class="card-peymanyar text-center"><h3 id="statTotal">0</h3><p>Ú©Ù„ Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§</p></div></div>
      </div>
      <div id="projectsAdminList" class="row"></div>
    </div>
  `;
  
  document.body.appendChild(panel);
  loadAllProjects();
}

window.goBackToAdminPanel = function() {
  document.getElementById('adminProjectsPanel')?.remove();
  document.querySelectorAll('.page-section').forEach(p => p.style.display = 'none');
  document.getElementById('adminMessages').style.display = 'block';
  document.getElementById('adminMessages').classList.add('active');
}

window.loadAllProjects = async function() {
  try {
    const { data: projects } = await supabase
      .from('projects')
      .select('*')
      .order('created_at', { ascending: false });
    
    projectsData = projects || [];
    
    document.getElementById('statPending').textContent = projectsData.filter(p => !p.admin_approved).length;
    document.getElementById('statApproved').textContent = projectsData.filter(p => p.admin_approved).length;
    document.getElementById('statTotal').textContent = projectsData.length;
    
    document.getElementById('pendingProjectsCount').textContent = projectsData.filter(p => !p.admin_approved).length;
    
    displayProjectsList(projectsData.filter(p => !p.admin_approved));
    
  } catch (error) {
    console.error('Ø®Ø·Ø§:', error);
  }
}

function displayProjectsList(projects) {
  const container = document.getElementById('projectsAdminList');
  if (!container) return;
  
  if (!projects || projects.length === 0) {
    container.innerHTML = '<div class="col-12"><div class="card-peymanyar text-center">Ù¾Ø±ÙˆÚ˜Ù‡â€ŒØ§ÛŒ Ø¨Ø±Ø§ÛŒ ØªØ§ÛŒÛŒØ¯ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯</div></div>';
    return;
  }
  
  let html = '';
  projects.forEach(p => {
    html += `
      <div class="col-md-6 mb-4" id="project-${p.id}">
        <div class="card-peymanyar">
          <h5>${p.title}</h5>
          <p>${p.description || ''}</p>
          <div class="d-flex justify-content-between">
            <button class="btn btn-sm btn-success" onclick="approveProject(${p.id})">ØªØ§ÛŒÛŒØ¯</button>
            <button class="btn btn-sm btn-danger" onclick="deleteProject(${p.id})">Ø­Ø°Ù</button>
          </div>
        </div>
      </div>
    `;
  });
  
  container.innerHTML = html;
}

window.approveProject = async function(projectId) {
  if (!confirm('ØªØ§ÛŒÛŒØ¯ Ù…ÛŒâ€ŒØ´ÙˆØ¯ØŸ')) return;
  
  try {
    await supabase
      .from('projects')
      .update({ admin_approved: true, status: 'open' })
      .eq('id', projectId);
    
    document.getElementById(`project-${projectId}`)?.remove();
    
    const pending = document.getElementById('statPending');
    pending.textContent = parseInt(pending.textContent) - 1;
    
    const approved = document.getElementById('statApproved');
    approved.textContent = parseInt(approved.textContent) + 1;
    
    document.getElementById('pendingProjectsCount').textContent = pending.textContent;
    
    alert('âœ… ØªØ§ÛŒÛŒØ¯ Ø´Ø¯');
    
  } catch (error) {
    alert('Ø®Ø·Ø§: ' + error.message);
  }
}

window.deleteProject = async function(projectId) {
  if (!confirm('Ø­Ø°Ù Ø´ÙˆØ¯ØŸ')) return;
  
  try {
    await supabase
      .from('projects')
      .delete()
      .eq('id', projectId);
    
    document.getElementById(`project-${projectId}`)?.remove();
    
    const pending = document.getElementById('statPending');
    pending.textContent = parseInt(pending.textContent) - 1;
    
    const total = document.getElementById('statTotal');
    total.textContent = parseInt(total.textContent) - 1;
    
    document.getElementById('pendingProjectsCount').textContent = pending.textContent;
    
    alert('âœ… Ø­Ø°Ù Ø´Ø¯');
    
  } catch (error) {
    alert('Ø®Ø·Ø§: ' + error.message);
  }
}
</script>
</body>
</html>