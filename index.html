<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ù¾ÛŒÙ…Ø§Ù†â€ŒÛŒØ§Ø± | Ù¾Ù„ØªÙØ±Ù… Ù‡ÙˆØ´Ù…Ù†Ø¯ Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø±Ø§Ù† Ø³Ø§Ø®ØªÙ…Ø§Ù†ÛŒ</title>
  
  <!-- Ù…ØªØ§ ØªÚ¯â€ŒÙ‡Ø§ -->
  <meta name="description" content="Ù¾Ù„ØªÙØ±Ù… Ù‡ÙˆØ´Ù…Ù†Ø¯ Ù¾ÛŒÙ…Ø§Ù†â€ŒÛŒØ§Ø±ØŒ Ø§ÙˆÙ„ÛŒÙ† Ùˆ ØªØ®ØµØµÛŒâ€ŒØªØ±ÛŒÙ† Ù¾Ù„ØªÙØ±Ù… Ø§Ø±ØªØ¨Ø§Ø· Ú©Ø§Ø±ÙØ±Ù…Ø§ÛŒØ§Ù† Ùˆ Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø±Ø§Ù† Ø³Ø§Ø®ØªÙ…Ø§Ù†ÛŒ Ø¯Ø± Ø§ÛŒØ±Ø§Ù†">
  <meta name="keywords" content="Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø±, Ú©Ø§Ø±ÙØ±Ù…Ø§, Ø³Ø§Ø®ØªÙ…Ø§Ù†, Ø³Ø§Ø®Øªâ€ŒÙˆØ³Ø§Ø², Ù¾ÛŒÙ…Ø§Ù†â€ŒÛŒØ§Ø±">
  <meta name="author" content="Ù¾ÛŒÙ…Ø§Ù†â€ŒÛŒØ§Ø±">
  <meta property="og:title" content="Ù¾ÛŒÙ…Ø§Ù†â€ŒÛŒØ§Ø± | Ù¾Ù„ØªÙØ±Ù… Ù‡ÙˆØ´Ù…Ù†Ø¯ Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø±Ø§Ù† Ø³Ø§Ø®ØªÙ…Ø§Ù†ÛŒ">
  <meta property="og:description" content="Ù¾Ù„ØªÙØ±Ù… ØªØ®ØµØµÛŒ Ø¨Ø±Ø§ÛŒ ÛŒØ§ÙØªÙ†ØŒ Ø¨Ø±Ø±Ø³ÛŒ Ùˆ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø±Ø§Ù† Ù…Ø¹ØªØ¨Ø± Ø³Ø§Ø®ØªÙ…Ø§Ù†ÛŒ">
  <meta property="og:image" content="https://images.unsplash.com/photo-1541888946425-d81bb19240f5?ixlib=rb-1.2.1&auto=format&fit=crop&w=1200&q=80">
  
  <!-- Ù„ÛŒÙ†Ú©â€ŒÙ‡Ø§ÛŒ Ø¶Ø±ÙˆØ±ÛŒ -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
  <link href="https://cdn.jsdelivr.net/gh/rastikerdar/vazirmatn@v33.003/Vazirmatn-font-face.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
  
  <style>
    :root {
      --primary: #4361ee;
      --primary-dark: #3a0ca3;
      --accent: #f72585;
      --employer: #4cc9f0;
      --contractor: #7209b7;
      --dark: #1a1a2e;
      --light: #f8f9fa;
      --success: #28a745;
      --warning: #ffc107;
      --danger: #dc3545;
      --info: #17a2b8;
      
      --gradient-primary: linear-gradient(135deg, #4361ee, #3a0ca3);
      --gradient-accent: linear-gradient(135deg, #f72585, #b5179e);
      --gradient-employer: linear-gradient(135deg, #4cc9f0, #4895ef);
      --gradient-contractor: linear-gradient(135deg, #7209b7, #560bad);
      
      --shadow-sm: 0 2px 8px rgba(0,0,0,0.05);
      --shadow-md: 0 5px 15px rgba(0,0,0,0.08);
      --shadow-lg: 0 10px 25px rgba(0,0,0,0.12);
      --shadow-xl: 0 15px 35px rgba(0,0,0,0.2);
      
      --radius-sm: 8px;
      --radius-md: 12px;
      --radius-lg: 20px;
      --radius-xl: 30px;
    }
    
    * { margin: 0; padding: 0; box-sizing: border-box; }
    
    html {
      scroll-behavior: smooth;
      scroll-padding-top: 80px;
    }
    
    body {
      font-family: 'Vazirmatn', sans-serif;
      background-color: var(--light);
      color: var(--dark);
      line-height: 1.6;
      overflow-x: hidden;
    }
    
    /* Ø§Ø³Ú©Ø±ÙˆÙ„ Ø¨Ø§Ø± */
    ::-webkit-scrollbar { width: 10px; height: 10px; }
    ::-webkit-scrollbar-track { background: #f1f1f1; border-radius: var(--radius-sm); }
    ::-webkit-scrollbar-thumb { background: var(--primary); border-radius: var(--radius-sm); }
    ::-webkit-scrollbar-thumb:hover { background: var(--primary-dark); }
    
    /* ÙÙˆÚ©ÙˆØ³ */
    :focus-visible {
      outline: 3px solid var(--primary);
      outline-offset: 3px;
    }
    
    /* Ù†ÙˆØ§Ø± Ù†Ø§ÙˆØ¨Ø±ÛŒ */
    .navbar {
      background: rgba(255,255,255,0.98);
      backdrop-filter: blur(10px);
      box-shadow: var(--shadow-md);
      padding: 12px 0;
      z-index: 1030;
      border-bottom: 1px solid rgba(0,0,0,0.05);
    }
    
    .navbar-brand {
      font-weight: 900;
      font-size: 2rem;
      background: var(--gradient-primary);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      transition: all 0.3s ease;
    }
    
    .navbar-brand:hover { transform: translateY(-2px); }
    
    .nav-link {
      font-weight: 500;
      color: var(--dark);
      margin: 0 8px;
      padding: 8px 16px !important;
      border-radius: var(--radius-sm);
      transition: all 0.3s ease;
      position: relative;
    }
    
    .nav-link:hover,
    .nav-link.active {
      background-color: rgba(67,97,238,0.1);
      color: var(--primary);
    }
    
    .nav-link.active::after {
      content: '';
      position: absolute;
      bottom: -12px;
      right: 50%;
      transform: translateX(50%);
      width: 6px;
      height: 6px;
      background: var(--primary);
      border-radius: 50%;
    }
    
    /* Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ */
    .btn {
      font-weight: 600;
      border: none;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }
    
    .btn-primary {
      background: var(--gradient-primary);
      color: white;
      border-radius: var(--radius-xl);
      padding: 12px 30px;
      box-shadow: 0 5px 15px rgba(67,97,238,0.3);
    }
    
    .btn-primary:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 25px rgba(67,97,238,0.4);
      color: white;
    }
    
    .btn-employer {
      background: var(--gradient-employer);
      color: white;
      border-radius: var(--radius-xl);
      padding: 12px 30px;
      box-shadow: 0 5px 15px rgba(76,201,240,0.3);
    }
    
    .btn-employer:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 25px rgba(76,201,240,0.4);
      color: white;
    }
    
    .btn-contractor {
      background: var(--gradient-contractor);
      color: white;
      border-radius: var(--radius-xl);
      padding: 12px 30px;
      box-shadow: 0 5px 15px rgba(114,9,183,0.3);
    }
    
    .btn-contractor:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 25px rgba(114,9,183,0.4);
      color: white;
    }
    
    /* ØµÙØ­Ø§Øª */
    .page-section {
      display: none;
      min-height: 80vh;
      animation: fadeIn 0.5s ease;
    }
    
    .page-section.active { display: block; }
    
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    .page-header {
      padding-top: 120px;
      margin-bottom: 40px;
    }
    
    /* Ø¹Ù†ÙˆØ§Ù†â€ŒÙ‡Ø§ */
    .section-title {
      font-size: 2.5rem;
      font-weight: 800;
      margin-bottom: 20px;
      position: relative;
      display: inline-block;
    }
    
    .section-title::after {
      content: '';
      position: absolute;
      bottom: -10px;
      right: 0;
      width: 80px;
      height: 4px;
      background: var(--gradient-primary);
      border-radius: 2px;
    }
    
    /* Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§ */
    .card-peymanyar {
      background: white;
      border-radius: var(--radius-lg);
      padding: 25px;
      box-shadow: var(--shadow-lg);
      transition: all 0.3s ease;
      height: 100%;
      border: 1px solid rgba(0,0,0,0.05);
      position: relative;
      overflow: hidden;
    }
    
    .card-peymanyar::before {
      content: '';
      position: absolute;
      top: 0;
      right: 0;
      width: 100%;
      height: 4px;
      background: var(--gradient-primary);
    }
    
    .card-peymanyar:hover {
      transform: translateY(-10px);
      box-shadow: var(--shadow-xl);
    }
    
    /* Ø¯Ø³ØªÛŒØ§Ø± Ù‡ÙˆØ´Ù…Ù†Ø¯ */
    .assistant-container {
      position: fixed;
      bottom: 30px;
      left: 30px;
      z-index: 1050;
    }
    
    .assistant-window {
      width: 400px;
      max-width: calc(100vw - 60px);
      height: 600px;
      max-height: 70vh;
      background: white;
      border-radius: var(--radius-lg);
      box-shadow: var(--shadow-xl);
      display: flex;
      flex-direction: column;
      overflow: hidden;
      display: none;
      border: 1px solid rgba(0,0,0,0.1);
    }
    
    .assistant-window.active { display: flex; }
    
    .assistant-header {
      background: var(--gradient-primary);
      color: white;
      padding: 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .assistant-messages {
      flex: 1;
      padding: 20px;
      overflow-y: auto;
      background: #f8f9fa;
      display: flex;
      flex-direction: column;
      gap: 15px;
    }
    
    .message {
      display: flex;
      max-width: 85%;
      animation: slideIn 0.3s ease;
    }
    
    .message.user { margin-left: auto; }
    
    .message-bubble {
      padding: 12px 18px;
      border-radius: 18px;
      word-wrap: break-word;
      box-shadow: var(--shadow-sm);
    }
    
    .message.assistant .message-bubble {
      background: white;
      border: 1px solid #dee2e6;
      border-top-right-radius: 5px;
    }
    
    .message.user .message-bubble {
      background: var(--gradient-primary);
      color: white;
      border-top-left-radius: 5px;
    }
    
    .assistant-input {
      padding: 20px;
      border-top: 1px solid #dee2e6;
      background: white;
    }
    
    .assistant-toggle {
      width: 70px;
      height: 70px;
      border-radius: 50%;
      background: var(--gradient-primary);
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.8rem;
      box-shadow: var(--shadow-xl);
      cursor: pointer;
      transition: all 0.3s ease;
      border: none;
    }
    
    .assistant-toggle:hover {
      transform: scale(1.1);
      box-shadow: 0 15px 35px rgba(67,97,238,0.5);
    }
    
    .assistant-toggle .notification-badge {
      position: absolute;
      top: -5px;
      left: -5px;
      background: var(--accent);
      color: white;
      border-radius: 50%;
      width: 24px;
      height: 24px;
      font-size: 0.8rem;
      display: flex;
      align-items: center;
      justify-content: center;
      animation: pulse 2s infinite;
    }
    
    @keyframes pulse {
      0% { transform: scale(1); }
      70% { transform: scale(1.1); }
      100% { transform: scale(1); }
    }
    
    @keyframes slideIn {
      from { opacity: 0; transform: translateX(20px); }
      to { opacity: 1; transform: translateX(0); }
    }
    
    /* Ø¢Ù…Ø§Ø± */
    .stats-row {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 20px;
      margin-top: 50px;
    }
    
    .stat-box {
      background: white;
      border-radius: var(--radius-md);
      padding: 20px;
      text-align: center;
      box-shadow: var(--shadow-md);
    }
    
    .stat-value {
      font-size: 2.5rem;
      font-weight: 800;
      color: var(--primary);
      margin-bottom: 5px;
    }
    
    .stat-label {
      color: #6c757d;
      font-size: 0.95rem;
    }
    
    /* Ø§Ø³Ù„Ø§ÛŒØ¯Ø± */
    .hero-slider {
      position: relative;
      width: 100%;
      height: 500px;
      overflow: hidden;
      border-radius: var(--radius-lg);
    }
    
    .hero-slide {
      position: absolute;
      top: 0;
      right: 0;
      width: 100%;
      height: 100%;
      opacity: 0;
      transition: opacity 1s ease;
      object-fit: cover;
    }
    
    .hero-slide.active { opacity: 1; }
    
    .hero-slide-controls {
      position: absolute;
      bottom: 20px;
      right: 50%;
      transform: translateX(50%);
      display: flex;
      gap: 10px;
      z-index: 2;
    }
    
    .hero-slide-dot {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      background: rgba(255,255,255,0.5);
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .hero-slide-dot.active {
      background: white;
      transform: scale(1.2);
    }
    
    /* ÙØ±Ù…â€ŒÙ‡Ø§ */
    .form-container {
      background: white;
      border-radius: var(--radius-lg);
      padding: 30px;
      box-shadow: var(--shadow-lg);
      border-top: 4px solid;
      margin-bottom: 40px;
    }
    
    .form-section {
      margin-bottom: 30px;
      padding-bottom: 30px;
      border-bottom: 1px solid #e9ecef;
      animation: fadeIn 0.5s ease;
    }
    
    .form-section:last-child {
      border-bottom: none;
      margin-bottom: 0;
      padding-bottom: 0;
    }
    
    .required::after {
      content: " *";
      color: var(--danger);
      font-weight: bold;
    }
    
    .invalid-feedback {
      display: none;
      color: var(--danger);
      font-size: 0.875rem;
      margin-top: 0.25rem;
    }
    
    .was-validated .form-control:invalid ~ .invalid-feedback,
    .form-control.is-invalid ~ .invalid-feedback {
      display: block;
    }
    
    .form-navigation {
      display: flex;
      justify-content: space-between;
      margin-top: 30px;
      padding-top: 20px;
      border-top: 1px solid #e9ecef;
    }
    
    /* progress bar */
    .progress {
      height: 8px;
      margin-bottom: 40px;
      border-radius: var(--radius-sm);
      background-color: #e9ecef;
    }
    
    .step-indicator {
      display: flex;
      justify-content: space-between;
      margin-bottom: 30px;
      position: relative;
    }
    
    .step-indicator::before {
      content: '';
      position: absolute;
      top: 20px;
      right: 0;
      left: 0;
      height: 2px;
      background: #e9ecef;
      z-index: 1;
    }
    
    .step {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: #e9ecef;
      color: #6c757d;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      position: relative;
      z-index: 2;
      transition: all 0.3s ease;
    }
    
    .step.active {
      background: var(--contractor);
      color: white;
      transform: scale(1.1);
      box-shadow: 0 0 0 4px rgba(114,9,183,0.2);
    }
    
    .step.completed {
      background: var(--success);
      color: white;
    }
    
    /* Ø¢Ù¾Ù„ÙˆØ¯ ÙØ§ÛŒÙ„ */
    .upload-box {
      border: 2px dashed #dee2e6;
      border-radius: var(--radius-md);
      padding: 40px 20px;
      text-align: center;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .upload-box:hover,
    .upload-box:focus-within {
      border-color: var(--primary);
      background-color: rgba(67,97,238,0.05);
    }
    
    .upload-box.dragover {
      border-color: var(--success);
      background-color: rgba(40,167,69,0.1);
    }
    
    /* Ø¨Ù„Ø§Ú¯ */
    .blog-card {
      background: white;
      border-radius: var(--radius-lg);
      overflow: hidden;
      box-shadow: var(--shadow-lg);
      transition: all 0.3s ease;
      height: 100%;
    }
    
    .blog-card:hover {
      transform: translateY(-10px);
      box-shadow: var(--shadow-xl);
    }
    
    .blog-image {
      width: 100%;
      height: 200px;
      background: linear-gradient(135deg, #667eea, #764ba2);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 1.5rem;
      font-weight: bold;
    }
    
    .blog-content { padding: 20px; }
    .blog-title { font-size: 1.3rem; font-weight: 700; margin-bottom: 10px; }
    .blog-excerpt { color: #6c757d; margin-bottom: 15px; }
    .blog-meta { display: flex; justify-content: space-between; color: #6c757d; font-size: 0.85rem; }
    
    /* Ù¾Ø±ÙˆÙØ§ÛŒÙ„ */
    .user-avatar {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      background: linear-gradient(135deg, #667eea, #764ba2);
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 2rem;
      font-weight: bold;
      margin: 0 auto;
    }
    
    /* ÙÙˆØªØ± */
    .footer {
      background-color: var(--dark);
      color: white;
      padding: 80px 0 30px;
      margin-top: 100px;
      position: relative;
    }
    
    .footer::before {
      content: '';
      position: absolute;
      top: 0;
      right: 0;
      width: 100%;
      height: 4px;
      background: var(--gradient-primary);
    }
    
    .footer-logo {
      font-size: 2.5rem;
      font-weight: 900;
      background: var(--gradient-primary);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      margin-bottom: 20px;
      display: inline-block;
    }
    
    .footer-title {
      font-size: 1.2rem;
      font-weight: 700;
      margin-bottom: 25px;
      position: relative;
      padding-bottom: 10px;
    }
    
    .footer-title::after {
      content: '';
      position: absolute;
      bottom: 0;
      right: 0;
      width: 40px;
      height: 3px;
      background: var(--primary);
      border-radius: 2px;
    }
    
    .footer-links {
      list-style: none;
      padding: 0;
    }
    
    .footer-links li { margin-bottom: 12px; }
    .footer-links a {
      color: #b0bec5;
      text-decoration: none;
      transition: all 0.3s ease;
    }
    .footer-links a:hover {
      color: white;
      transform: translateX(-5px);
    }
    
    .social-links {
      display: flex;
      gap: 15px;
      margin-top: 20px;
    }
    
    .social-link {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: rgba(255,255,255,0.1);
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.2rem;
      transition: all 0.3s ease;
      text-decoration: none;
    }
    
    .social-link:hover {
      background: var(--primary);
      transform: translateY(-3px);
    }
    
    .copyright {
      text-align: center;
      padding-top: 30px;
      margin-top: 50px;
      border-top: 1px solid rgba(255,255,255,0.1);
      color: #b0bec5;
    }
    
    /* Ø±ÛŒØ³Ù¾Ø§Ù†Ø³ÛŒÙˆ */
    @media (max-width: 768px) {
      .stats-row { grid-template-columns: repeat(2, 1fr); }
      .section-title { font-size: 2rem; }
      .assistant-container { bottom: 20px; left: 20px; }
      .assistant-window { width: calc(100vw - 40px); height: 70vh; }
      .form-navigation { flex-direction: column; gap: 10px; }
    }
    
    @media (max-width: 576px) {
      .navbar-brand { font-size: 1.5rem; }
      .stats-row { grid-template-columns: 1fr; }
      .btn-primary, .btn-employer, .btn-contractor { width: 100%; margin-bottom: 10px; }
    }
    
    /* Ø¯Ø§Ø±Ú© Ù…ÙˆØ¯ */
    @media (prefers-color-scheme: dark) {
      :root {
        --light: #1a1a2e;
        --dark: #f8f9fa;
      }
      body { background-color: #121212; }
      .navbar { background-color: rgba(26,26,46,0.95); }
      .card-peymanyar { background: #2d2d2d; border-color: #404040; }
      .form-container { background: #2d2d2d; }
      .form-control, .form-select {
        background-color: #404040;
        border-color: #555;
        color: #e0e0e0;
      }
      .stat-box { background: #2d2d2d; }
      .blog-card { background: #2d2d2d; }
    }
  </style>
</head>
<body>
  <!-- Ø¯Ú©Ù…Ù‡ Ù¾Ø±Ø´ Ø¨Ù‡ Ù…Ø­ØªÙˆØ§ -->
  <a href="#main-content" class="skip-to-content" style="position:absolute; top:-40px; right:0; background:var(--primary); color:white; padding:8px 16px; z-index:9999;">Ù¾Ø±Ø´ Ø¨Ù‡ Ù…Ø­ØªÙˆØ§</a>

  <!-- Ù…ÙˆØ¯Ø§Ù„ Ù‚ÙˆØ§Ù†ÛŒÙ† -->
  <div class="modal fade" id="termsModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Ù‚ÙˆØ§Ù†ÛŒÙ† Ùˆ Ù…Ù‚Ø±Ø±Ø§Øª Ù¾ÛŒÙ…Ø§Ù†â€ŒÛŒØ§Ø±</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Ø¨Ø³ØªÙ†"></button>
        </div>
        <div class="modal-body">
          <h6>Û±. Ù‚ÙˆØ§Ù†ÛŒÙ† Ø¹Ù…ÙˆÙ…ÛŒ</h6>
          <p>Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ø®Ø¯Ù…Ø§Øª Ù¾Ù„ØªÙØ±Ù… Ù¾ÛŒÙ…Ø§Ù†â€ŒÛŒØ§Ø± Ø¨Ù‡ Ù…Ø¹Ù†Ø§ÛŒ Ù¾Ø°ÛŒØ±Ø´ Ú©Ø§Ù…Ù„ Ù‚ÙˆØ§Ù†ÛŒÙ† Ùˆ Ù…Ù‚Ø±Ø±Ø§Øª Ø²ÛŒØ± Ù…ÛŒâ€ŒØ¨Ø§Ø´Ø¯.</p>
          <h6>Û². Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ùˆ Ø­Ø³Ø§Ø¨ Ú©Ø§Ø±Ø¨Ø±ÛŒ</h6>
          <p>Ú©Ø§Ø±Ø¨Ø±Ø§Ù† Ù…ÙˆØ¸ÙÙ†Ø¯ Ø§Ø·Ù„Ø§Ø¹Ø§Øª ØµØ­ÛŒØ­ Ùˆ Ú©Ø§Ù…Ù„ Ø¯Ø± Ù‡Ù†Ú¯Ø§Ù… Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ø§Ø±Ø§Ø¦Ù‡ Ø¯Ù‡Ù†Ø¯.</p>
          <h6>Û³. Ø­Ø±ÛŒÙ… Ø®ØµÙˆØµÛŒ</h6>
          <p>Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ú©Ø§Ø±Ø¨Ø±Ø§Ù† Ù†Ø²Ø¯ Ù¾ÛŒÙ…Ø§Ù†â€ŒÛŒØ§Ø± Ù…Ø­ÙÙˆØ¸ Ø¨ÙˆØ¯Ù‡ Ùˆ Ø¨Ø¯ÙˆÙ† Ø±Ø¶Ø§ÛŒØª Ú©Ø§Ø±Ø¨Ø± Ø¯Ø± Ø§Ø®ØªÛŒØ§Ø± Ø§Ø´Ø®Ø§Øµ Ø«Ø§Ù„Ø« Ù‚Ø±Ø§Ø± Ù†Ø®ÙˆØ§Ù‡Ø¯ Ú¯Ø±ÙØª.</p>
          <h6>Û´. Ù‚ÙˆØ§Ù†ÛŒÙ† Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯Ù‡Ø§</h6>
          <p>Ù¾ÛŒÙ…Ø§Ù†â€ŒÛŒØ§Ø± ØµØ±ÙØ§Ù‹ ÛŒÚ© Ù¾Ù„ØªÙØ±Ù… Ø§Ø±ØªØ¨Ø§Ø·ÛŒ Ø§Ø³Øª Ùˆ Ù…Ø³Ø¦ÙˆÙ„ÛŒØªÛŒ Ø¯Ø± Ù‚Ø¨Ø§Ù„ Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯Ù‡Ø§ÛŒ Ù…Ù†Ø¹Ù‚Ø¯ Ø´Ø¯Ù‡ Ù†Ø¯Ø§Ø±Ø¯.</p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Ø¨Ø³ØªÙ†</button>
          <button type="button" class="btn btn-primary" onclick="window.app.acceptTerms()">Ù¾Ø°ÛŒØ±Ø´ Ù‚ÙˆØ§Ù†ÛŒÙ†</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Ú©Ø§Ù†ØªÛŒÙ†Ø± toast -->
  <div id="toastContainer" style="position: fixed; top: 20px; left: 20px; z-index: 9999;"></div>

  <!-- Ø¯Ø³ØªÛŒØ§Ø± Ù‡ÙˆØ´Ù…Ù†Ø¯ -->
  <div class="assistant-container">
    <div id="assistantWindow" class="assistant-window">
      <div class="assistant-header">
        <div>
          <h5 class="mb-1"><i class="bi bi-robot me-2"></i>Ø¯Ø³ØªÛŒØ§Ø± Ù‡ÙˆØ´Ù…Ù†Ø¯</h5>
          <small>Ø¨Ø±Ø§ÛŒ Ú©Ù…Ú© Ø¨Ù‡ Ø´Ù…Ø§ Ø§ÛŒÙ†Ø¬Ø§ÛŒÙ…!</small>
        </div>
        <button class="btn btn-sm btn-light" onclick="window.app.toggleAssistant()">
          <i class="bi bi-x-lg"></i>
        </button>
      </div>
      <div class="assistant-messages" id="assistantMessages"></div>
      <div class="assistant-input">
        <div class="input-group">
          <input type="text" class="form-control" id="assistantInput" placeholder="Ø³ÙˆØ§Ù„ Ø®ÙˆØ¯ Ø±Ø§ Ø¨Ù¾Ø±Ø³ÛŒØ¯...">
          <button class="btn btn-primary" onclick="window.app.sendAssistantMessage()">
            <i class="bi bi-send"></i>
          </button>
        </div>
        <small class="text-muted mt-2 d-block">
          <i class="bi bi-info-circle me-1"></i>
          Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø¯Ø± Ù…ÙˆØ±Ø¯ Ø«Ø¨Øªâ€ŒÙ†Ø§Ù…ØŒ Ø¬Ø³ØªØ¬ÙˆØŒ Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯Ù‡Ø§ Ùˆ ... Ø³ÙˆØ§Ù„ Ø¨Ù¾Ø±Ø³ÛŒØ¯
        </small>
      </div>
    </div>
    <button class="assistant-toggle" onclick="window.app.toggleAssistant()" aria-label="Ø¨Ø§Ø² Ú©Ø±Ø¯Ù† Ø¯Ø³ØªÛŒØ§Ø±">
      <i class="bi bi-robot"></i>
      <span class="notification-badge" id="assistantNotification">Û±</span>
    </button>
  </div>

  <!-- Ù†ÙˆØ§Ø± Ù†Ø§ÙˆØ¨Ø±ÛŒ -->
  <nav class="navbar navbar-expand-lg navbar-light fixed-top">
    <div class="container">
      <a class="navbar-brand" href="#" onclick="window.app.showPage('home')">
        <span role="img" aria-label="Ø¢ÛŒÚ©ÙˆÙ†">ğŸ—ï¸</span> Ù¾ÛŒÙ…Ø§Ù†â€ŒÛŒØ§Ø±
      </a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarMain">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarMain">
        <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
          <li class="nav-item"><a class="nav-link active" href="#" onclick="window.app.showPage('home')">Ø®Ø§Ù†Ù‡</a></li>
          <li class="nav-item"><a class="nav-link" href="#" onclick="window.app.showPage('features')">ÙˆÛŒÚ˜Ú¯ÛŒâ€ŒÙ‡Ø§</a></li>
          <li class="nav-item"><a class="nav-link" href="#" onclick="window.app.showPage('search')">Ø¬Ø³ØªØ¬ÙˆÛŒ Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø±</a></li>
          <li class="nav-item"><a class="nav-link" href="#" onclick="window.app.showPage('projects')">Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§</a></li>
          <li class="nav-item"><a class="nav-link" href="#" onclick="window.app.showPage('blog')">Ø¨Ù„Ø§Ú¯</a></li>
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">
              <i class="bi bi-person-circle me-1"></i> Ø­Ø³Ø§Ø¨ Ú©Ø§Ø±Ø¨Ø±ÛŒ
            </a>
            <ul class="dropdown-menu">
              <li><a class="dropdown-item" href="#" onclick="window.app.showPage('profile')">Ù¾Ù†Ù„ Ú©Ø§Ø±Ø¨Ø±ÛŒ</a></li>
              <li><a class="dropdown-item" href="#" onclick="window.app.showLogin()">ÙˆØ±ÙˆØ¯</a></li>
              <li><hr class="dropdown-divider"></li>
              <li><a class="dropdown-item" href="#" onclick="window.app.showEmployerRegistration()">Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ú©Ø§Ø±ÙØ±Ù…Ø§</a></li>
              <li><a class="dropdown-item" href="#" onclick="window.app.showContractorRegistration()">Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø±</a></li>
              <li><hr class="dropdown-divider"></li>
              <li><a class="dropdown-item admin-only" href="#" onclick="window.app.showAdminLogin()" style="display:none;">ÙˆØ±ÙˆØ¯ Ù…Ø¯ÛŒØ±</a></li>
              <li><a class="dropdown-item admin-only" href="#" onclick="window.app.showAdminMessages()" style="display:none;">Ù¾Ù†Ù„ Ù…Ø¯ÛŒØ±ÛŒØª</a></li>
            </ul>
          </li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- ØµÙØ­Ù‡ Ø§ØµÙ„ÛŒ -->
  <div id="home" class="page-section active">
    <section style="padding-top: 100px;">
      <div class="container">
        <div class="row align-items-center">
          <div class="col-lg-6">
            <div>
              <h1 class="mb-4">
                <span class="d-block">Ù¾Ù„ØªÙØ±Ù… Ù‡ÙˆØ´Ù…Ù†Ø¯</span>
                <span class="gradient-text d-block" style="font-size: 3.5rem;">Ù¾ÛŒÙ…Ø§Ù†â€ŒÛŒØ§Ø±</span>
                <span class="d-block mt-2" style="color: var(--accent); font-size: 1.8rem;">Ø§ØªØµØ§Ù„ Ú©Ø§Ø±ÙØ±Ù…Ø§ÛŒØ§Ù† Ùˆ Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø±Ø§Ù†</span>
              </h1>
              <p class="mb-5" style="max-width: 90%; line-height: 1.8;">
                Ù¾Ù„ØªÙØ±Ù… ØªØ®ØµØµÛŒ Ø¨Ø±Ø§ÛŒ ÛŒØ§ÙØªÙ†ØŒ Ø¨Ø±Ø±Ø³ÛŒ Ùˆ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø±Ø§Ù† Ù…Ø¹ØªØ¨Ø± Ø³Ø§Ø®ØªÙ…Ø§Ù†ÛŒ. 
                Ø¨Ø§ Ù…Ø§ØŒ Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§ÛŒ Ø³Ø§Ø®ØªÙ…Ø§Ù†ÛŒ Ø®ÙˆØ¯ Ø±Ø§ Ø¨Ù‡ Ø¯Ø³Øª Ø¨Ù‡ØªØ±ÛŒÙ† Ù…ØªØ®ØµØµØ§Ù† Ø¨Ø³Ù¾Ø§Ø±ÛŒØ¯.
              </p>
              <div class="d-flex gap-3 mb-5 flex-wrap">
                <button class="btn btn-employer flex-grow-1" onclick="window.app.showEmployerRegistration()">
                  <i class="bi bi-briefcase me-2"></i>Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ú©Ø§Ø±ÙØ±Ù…Ø§
                </button>
                <button class="btn btn-contractor flex-grow-1" onclick="window.app.showContractorRegistration()">
                  <i class="bi bi-tools me-2"></i>Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø±
                </button>
              </div>
            </div>
          </div>
          <div class="col-lg-6">
            <div class="hero-slider" id="heroSlider"></div>
          </div>
        </div>
        
        <!-- Ø¢Ù…Ø§Ø± -->
        <div class="stats-row">
          <div class="stat-box">
            <div class="stat-value" id="statContractors">Û°</div>
            <div class="stat-label">Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø± Ø«Ø¨Øªâ€ŒÙ†Ø§Ù…ÛŒ</div>
          </div>
          <div class="stat-box">
            <div class="stat-value" id="statProjects">Û°</div>
            <div class="stat-label">Ù¾Ø±ÙˆÚ˜Ù‡ ØªÚ©Ù…ÛŒÙ„ Ø´Ø¯Ù‡</div>
          </div>
          <div class="stat-box">
            <div class="stat-value" id="statEmployers">Û°</div>
            <div class="stat-label">Ú©Ø§Ø±ÙØ±Ù…Ø§ÛŒ ÙØ¹Ø§Ù„</div>
          </div>
          <div class="stat-box">
            <div class="stat-value" id="statSatisfaction">Û°</div>
            <div class="stat-label">Ø±Ø¶Ø§ÛŒØªâ€ŒÙ…Ù†Ø¯ÛŒ</div>
          </div>
        </div>
      </div>
    </section>

    <!-- Ú†Ø±Ø§ Ù¾ÛŒÙ…Ø§Ù†â€ŒÛŒØ§Ø± -->
    <section class="py-5">
      <div class="container">
        <h2 class="section-title text-center mb-5">Ú†Ø±Ø§ Ù¾ÛŒÙ…Ø§Ù†â€ŒÛŒØ§Ø±ØŸ</h2>
        <div class="row">
          <div class="col-md-4 mb-4">
            <div class="card-peymanyar text-center">
              <div class="mb-4">
                <i class="bi bi-shield-check" style="font-size: 3rem; color: var(--primary);"></i>
              </div>
              <h4 class="mb-3">Ø§Ø¹ØªØ¨Ø§Ø±Ø³Ù†Ø¬ÛŒ Ù‡ÙˆØ´Ù…Ù†Ø¯</h4>
              <p class="text-muted">Ø¨Ø±Ø±Ø³ÛŒ Ú©Ø§Ù…Ù„ Ù…Ø¯Ø§Ø±Ú© Ùˆ Ø³ÙˆØ§Ø¨Ù‚ Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø±Ø§Ù† ØªÙˆØ³Ø· ØªÛŒÙ… ØªØ®ØµØµÛŒ</p>
            </div>
          </div>
          <div class="col-md-4 mb-4">
            <div class="card-peymanyar text-center">
              <div class="mb-4">
                <i class="bi bi-search-heart" style="font-size: 3rem; color: var(--primary);"></i>
              </div>
              <h4 class="mb-3">Ø¬Ø³ØªØ¬ÙˆÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡</h4>
              <p class="text-muted">ÛŒØ§ÙØªÙ† Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø± Ù…Ù†Ø§Ø³Ø¨ Ø¨Ø§ ÙÛŒÙ„ØªØ±Ù‡Ø§ÛŒ Ù…ØªÙ†ÙˆØ¹ Ùˆ Ù‡ÙˆØ´Ù…Ù†Ø¯</p>
            </div>
          </div>
          <div class="col-md-4 mb-4">
            <div class="card-peymanyar text-center">
              <div class="mb-4">
                <i class="bi bi-chat-dots" style="font-size: 3rem; color: var(--primary);"></i>
              </div>
              <h4 class="mb-3">Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Û²Û´/Û·</h4>
              <p class="text-muted">Ø¯Ø³ØªÛŒØ§Ø± Ù‡ÙˆØ´Ù…Ù†Ø¯ Ùˆ ØªÛŒÙ… Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ù‡Ù…ÛŒØ´Ù‡ Ø¯Ø± Ø¯Ø³ØªØ±Ø³</p>
            </div>
          </div>
        </div>
      </div>
    </section>
  </div>

  <!-- ØµÙØ­Ù‡ ÙˆÛŒÚ˜Ú¯ÛŒâ€ŒÙ‡Ø§ -->
  <div id="features" class="page-section">
    <div class="container page-header">
      <h2 class="section-title mb-4">ÙˆÛŒÚ˜Ú¯ÛŒâ€ŒÙ‡Ø§ÛŒ Ù¾Ù„ØªÙØ±Ù… Ù¾ÛŒÙ…Ø§Ù†â€ŒÛŒØ§Ø±</h2>
      <p class="text-muted mb-5">Ù¾Ù„ØªÙØ±Ù… Ù¾ÛŒÙ…Ø§Ù†â€ŒÛŒØ§Ø± Ø¨Ø§ Ø§Ø±Ø§Ø¦Ù‡ Ø±Ø§Ù‡Ú©Ø§Ø±Ù‡Ø§ÛŒ Ù‡ÙˆØ´Ù…Ù†Ø¯ØŒ ÙØ±Ø¢ÛŒÙ†Ø¯ ÛŒØ§ÙØªÙ† Ùˆ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø±Ø§Ù† Ø³Ø§Ø®ØªÙ…Ø§Ù†ÛŒ Ø±Ø§ Ù…ØªØ­ÙˆÙ„ Ú©Ø±Ø¯Ù‡ Ø§Ø³Øª.</p>
      <div class="row">
        <div class="col-lg-6 mb-5">
          <div class="card-peymanyar h-100">
            <h3 class="mb-3"><i class="bi bi-search text-primary me-2"></i>Ø³ÛŒØ³ØªÙ… Ø¬Ø³ØªØ¬ÙˆÛŒ Ù‡ÙˆØ´Ù…Ù†Ø¯</h3>
            <p class="text-muted mb-4">Ø¨Ø§ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² ÙÛŒÙ„ØªØ±Ù‡Ø§ÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡ Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø±Ø§Ù† Ø±Ø§ Ø¨Ø± Ø§Ø³Ø§Ø³ ØªØ®ØµØµØŒ Ø³Ø§Ø¨Ù‚Ù‡ Ú©Ø§Ø±ØŒ Ù…ÙˆÙ‚Ø¹ÛŒØª Ø¬ØºØ±Ø§ÙÛŒØ§ÛŒÛŒ Ùˆ Ø¨ÙˆØ¯Ø¬Ù‡ Ù¾ÛŒØ¯Ø§ Ú©Ù†ÛŒØ¯.</p>
            <ul class="list-unstyled">
              <li class="mb-2"><i class="bi bi-check-circle-fill text-success me-2"></i>Ø¬Ø³ØªØ¬ÙˆÛŒ Ø¨Ø± Ø§Ø³Ø§Ø³ ØªØ®ØµØµ Ùˆ Ù…Ù‡Ø§Ø±Øª</li>
              <li class="mb-2"><i class="bi bi-check-circle-fill text-success me-2"></i>ÙÛŒÙ„ØªØ± Ø¬ØºØ±Ø§ÙÛŒØ§ÛŒÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡</li>
              <li class="mb-2"><i class="bi bi-check-circle-fill text-success me-2"></i>Ù…Ù‚Ø§ÛŒØ³Ù‡ Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø±Ø§Ù†</li>
            </ul>
          </div>
        </div>
        <div class="col-lg-6 mb-5">
          <div class="card-peymanyar h-100">
            <h3 class="mb-3"><i class="bi bi-shield-check text-primary me-2"></i>Ø³ÛŒØ³ØªÙ… Ø§Ø¹ØªØ¨Ø§Ø±Ø³Ù†Ø¬ÛŒ</h3>
            <p class="text-muted mb-4">ØªÛŒÙ… ØªØ®ØµØµÛŒ Ù…Ø§ Ù…Ø¯Ø§Ø±Ú©ØŒ Ú¯ÙˆØ§Ù‡ÛŒÙ†Ø§Ù…Ù‡â€ŒÙ‡Ø§ Ùˆ Ø³ÙˆØ§Ø¨Ù‚ Ù‡Ø± Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø± Ø±Ø§ Ø¨Ù‡ Ø¯Ù‚Øª Ø¨Ø±Ø±Ø³ÛŒ Ù…ÛŒâ€ŒÚ©Ù†Ø¯.</p>
            <ul class="list-unstyled">
              <li class="mb-2"><i class="bi bi-check-circle-fill text-success me-2"></i>Ø¨Ø±Ø±Ø³ÛŒ Ù…Ø¯Ø§Ø±Ú© Ùˆ Ú¯ÙˆØ§Ù‡ÛŒÙ†Ø§Ù…Ù‡â€ŒÙ‡Ø§</li>
              <li class="mb-2"><i class="bi bi-check-circle-fill text-success me-2"></i>Ø§Ø¹ØªØ¨Ø§Ø±Ø³Ù†Ø¬ÛŒ Ø³ÙˆØ§Ø¨Ù‚ Ú©Ø§Ø±ÛŒ</li>
              <li class="mb-2"><i class="bi bi-check-circle-fill text-success me-2"></i>Ø³ÛŒØ³ØªÙ… Ø§Ù…ØªÛŒØ§Ø²Ø¯Ù‡ÛŒ Ùˆ Ù†Ø¸Ø±Ø§Øª</li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- ØµÙØ­Ù‡ Ø¬Ø³ØªØ¬Ùˆ -->
  <div id="search" class="page-section">
    <div class="container page-header">
      <h2 class="section-title mb-4">Ø¬Ø³ØªØ¬ÙˆÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡ Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø±Ø§Ù†</h2>
      <p class="text-muted mb-5">Ø¨Ø§ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² ÙÛŒÙ„ØªØ±Ù‡Ø§ÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡ØŒ Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø± Ù…Ù†Ø§Ø³Ø¨ Ù¾Ø±ÙˆÚ˜Ù‡ Ø®ÙˆØ¯ Ø±Ø§ Ù¾ÛŒØ¯Ø§ Ú©Ù†ÛŒØ¯.</p>
      <div class="card-peymanyar mb-4">
        <div class="row g-3">
          <div class="col-md-6">
            <label class="form-label">Ú©Ù„Ù…Ù‡ Ú©Ù„ÛŒØ¯ÛŒ</label>
            <input type="text" class="form-control" id="searchKeyword" placeholder="Ø¬Ø³ØªØ¬Ùˆ Ø¨Ø± Ø§Ø³Ø§Ø³ ØªØ®ØµØµØŒ Ù†Ø§Ù… ÛŒØ§ Ø´Ù‡Ø±...">
          </div>
          <div class="col-md-6">
            <label class="form-label">Ø­ÙˆØ²Ù‡ ØªØ®ØµØµ</label>
            <select class="form-select" id="searchSpecialty">
              <option value="">Ù‡Ù…Ù‡ ØªØ®ØµØµâ€ŒÙ‡Ø§</option>
              <option value="steel_fabrication">Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø± Ø³Ø§Ø®Øª Ø§Ø³Ú©Ù„Øª ÙÙ„Ø²ÛŒ</option>
              <option value="steel_installation">Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø± Ù†ØµØ¨ Ø§Ø³Ú©Ù„Øª ÙÙ„Ø²ÛŒ</option>
              <option value="formwork">Ø§Ú©ÛŒÙ¾ Ù‚Ø§Ù„Ø¨â€ŒØ¨Ù†Ø¯ÛŒ</option>
              <option value="rebar">Ø§Ú©ÛŒÙ¾ Ø¢Ø±Ù…Ø§ØªÙˆØ±Ø¨Ù†Ø¯ÛŒ</option>
              <option value="concrete_execution">Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø± Ø§Ø¬Ø±Ø§ÛŒ Ø¨ØªÙ†</option>
              <option value="grouting">Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø± Ú¯Ø±ÙˆØªâ€ŒØ±ÛŒØ²ÛŒ</option>
              <option value="welding">Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø± Ø¬ÙˆØ´Ú©Ø§Ø±ÛŒ Ø³Ø§Ø²Ù‡</option>
              <option value="coating">Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø± Ø±Ù†Ú¯ Ùˆ Ù¾ÙˆØ´Ø´ ØµÙ†Ø¹ØªÛŒ</option>
              <option value="excavation">Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø± Ø®Ø§Ú©Ø¨Ø±Ø¯Ø§Ø±ÛŒ</option>
              <option value="foundation">Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø± ÙÙˆÙ†Ø¯Ø§Ø³ÛŒÙˆÙ†</option>
            </select>
          </div>
          <div class="col-md-6">
            <label class="form-label">Ù…ÙˆÙ‚Ø¹ÛŒØª Ø¬ØºØ±Ø§ÙÛŒØ§ÛŒÛŒ</label>
            <select class="form-select" id="searchLocation" multiple style="height: 150px;">
              <optgroup label="Ù…Ù†Ø§Ø·Ù‚ Ù…Ø±Ú©Ø²ÛŒ">
                <option value="tehran">ØªÙ‡Ø±Ø§Ù†</option>
                <option value="alborz">Ø§Ù„Ø¨Ø±Ø²</option>
                <option value="esfahan">Ø§ØµÙÙ‡Ø§Ù†</option>
              </optgroup>
              <optgroup label="Ù…Ù†Ø§Ø·Ù‚ Ø´Ù…Ø§Ù„ÛŒ">
                <option value="gilan">Ú¯ÛŒÙ„Ø§Ù†</option>
                <option value="mazandaran">Ù…Ø§Ø²Ù†Ø¯Ø±Ø§Ù†</option>
              </optgroup>
            </select>
            <div class="form-text">Ctrl Ø±Ø§ Ù†Ú¯Ù‡ Ø¯Ø§Ø±ÛŒØ¯ Ø¨Ø±Ø§ÛŒ Ø§Ù†ØªØ®Ø§Ø¨ Ú†Ù†Ø¯ Ú¯Ø²ÛŒÙ†Ù‡</div>
          </div>
          <div class="col-md-6">
            <label class="form-label">Ø­Ø¯Ø§Ù‚Ù„ Ø³Ø§Ø¨Ù‚Ù‡ Ú©Ø§Ø±</label>
            <select class="form-select" id="searchExperience">
              <option value="">Ø¨Ø¯ÙˆÙ† Ù…Ø­Ø¯ÙˆØ¯ÛŒØª</option>
              <option value="1">1 Ø³Ø§Ù„</option>
              <option value="3">3 Ø³Ø§Ù„</option>
              <option value="5">5 Ø³Ø§Ù„</option>
              <option value="10">10 Ø³Ø§Ù„</option>
            </select>
          </div>
          <div class="col-12">
            <button class="btn btn-primary w-100" onclick="window.app.performSearch()">
              <i class="bi bi-search me-2"></i>Ø¬Ø³ØªØ¬ÙˆÛŒ Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø±
            </button>
          </div>
        </div>
      </div>
      <div id="searchResults" class="row"></div>
    </div>
  </div>

  <!-- ØµÙØ­Ù‡ Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§ -->
  <div id="projects" class="page-section">
    <div class="container page-header">
      <div class="d-flex justify-content-between align-items-center mb-4">
        <h2 class="section-title">Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§</h2>
        <button class="btn btn-primary" onclick="window.app.openNewProjectModal()">
          <i class="bi bi-plus-circle me-2"></i>Ù¾Ø±ÙˆÚ˜Ù‡ Ø¬Ø¯ÛŒØ¯
        </button>
      </div>

      <div class="card-peymanyar mb-4">
        <div class="row g-3">
          <div class="col-md-4">
            <select class="form-select" id="projectFilterStatus">
              <option value="all">Ù‡Ù…Ù‡ Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§</option>
              <option value="open">Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø± Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø±</option>
              <option value="in_progress">Ø¯Ø± Ø­Ø§Ù„ Ø§Ù†Ø¬Ø§Ù…</option>
              <option value="completed">ØªÚ©Ù…ÛŒÙ„ Ø´Ø¯Ù‡</option>
            </select>
          </div>
          <div class="col-md-4">
            <input type="text" class="form-control" id="projectSearch" placeholder="Ø¬Ø³ØªØ¬Ùˆ Ø¯Ø± Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§...">
          </div>
          <div class="col-md-4">
            <button class="btn btn-primary w-100" onclick="window.app.filterProjects()">
              <i class="bi bi-search me-2"></i>Ø§Ø¹Ù…Ø§Ù„ ÙÛŒÙ„ØªØ±
            </button>
          </div>
        </div>
      </div>

      <div id="projectsList" class="row"></div>
    </div>
  </div>

  <!-- Ù…ÙˆØ¯Ø§Ù„ Ù¾Ø±ÙˆÚ˜Ù‡ Ø¬Ø¯ÛŒØ¯ -->
  <div class="modal fade" id="newProjectModal" tabindex="-1">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Ø§ÛŒØ¬Ø§Ø¯ Ù¾Ø±ÙˆÚ˜Ù‡ Ø¬Ø¯ÛŒØ¯</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <form id="newProjectForm">
            <div class="mb-3">
              <label class="form-label required">Ø¹Ù†ÙˆØ§Ù† Ù¾Ø±ÙˆÚ˜Ù‡</label>
              <input type="text" class="form-control" id="projectTitle" required>
            </div>
            <div class="mb-3">
              <label class="form-label required">ØªÙˆØ¶ÛŒØ­Ø§Øª Ù¾Ø±ÙˆÚ˜Ù‡</label>
              <textarea class="form-control" id="projectDescription" rows="4" required></textarea>
            </div>
            <div class="row">
              <div class="col-md-6 mb-3">
                <label class="form-label">Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ</label>
                <select class="form-select" id="projectCategory">
                  <option value="">Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</option>
                  <option value="residential">Ù…Ø³Ú©ÙˆÙ†ÛŒ</option>
                  <option value="commercial">ØªØ¬Ø§Ø±ÛŒ</option>
                  <option value="industrial">ØµÙ†Ø¹ØªÛŒ</option>
                </select>
              </div>
              <div class="col-md-6 mb-3">
                <label class="form-label">Ø¨ÙˆØ¯Ø¬Ù‡ ØªÙ‚Ø±ÛŒØ¨ÛŒ</label>
                <select class="form-select" id="projectBudget">
                  <option value="">Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</option>
                  <option value="under100">Ø²ÛŒØ± Û±Û°Û° Ù…ÛŒÙ„ÛŒÙˆÙ†</option>
                  <option value="100-500">Û±Û°Û° ØªØ§ ÛµÛ°Û° Ù…ÛŒÙ„ÛŒÙˆÙ†</option>
                  <option value="500-1000">ÛµÛ°Û° Ù…ÛŒÙ„ÛŒÙˆÙ† ØªØ§ Û± Ù…ÛŒÙ„ÛŒØ§Ø±Ø¯</option>
                </select>
              </div>
            </div>
            <div class="row">
              <div class="col-md-6 mb-3">
                <label class="form-label">Ù…ÙˆÙ‚Ø¹ÛŒØª Ù…Ú©Ø§Ù†ÛŒ</label>
                <input type="text" class="form-control" id="projectLocation" placeholder="Ù…Ø«Ø§Ù„: ØªÙ‡Ø±Ø§Ù†ØŒ Ø³Ø¹Ø§Ø¯Øªâ€ŒØ¢Ø¨Ø§Ø¯">
              </div>
              <div class="col-md-6 mb-3">
                <label class="form-label">Ø²Ù…Ø§Ù†Ø¨Ù†Ø¯ÛŒ</label>
                <select class="form-select" id="projectTimeline">
                  <option value="">Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</option>
                  <option value="urgent">ÙÙˆØ±ÛŒ (Ú©Ù…ØªØ± Ø§Ø² Û± Ù…Ø§Ù‡)</option>
                  <option value="1-3">Û± ØªØ§ Û³ Ù…Ø§Ù‡</option>
                  <option value="3-6">Û³ ØªØ§ Û¶ Ù…Ø§Ù‡</option>
                </select>
              </div>
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Ø§Ù†ØµØ±Ø§Ù</button>
          <button type="button" class="btn btn-primary" onclick="window.app.saveProject()">Ø§ÛŒØ¬Ø§Ø¯ Ù¾Ø±ÙˆÚ˜Ù‡</button>
        </div>
      </div>
    </div>
  </div>

  <!-- ØµÙØ­Ù‡ Ø¨Ù„Ø§Ú¯ -->
  <div id="blog" class="page-section">
    <div class="container page-header">
      <h2 class="section-title mb-4">Ù…Ù‚Ø§Ù„Ø§Øª Ùˆ Ù…Ø·Ø§Ù„Ø¨ Ø¢Ù…ÙˆØ²Ø´ÛŒ</h2>
      <p class="text-muted mb-5">Ø¢Ø®Ø±ÛŒÙ† Ù…Ø·Ø§Ù„Ø¨ Ùˆ Ù…Ù‚Ø§Ù„Ø§Øª ØªØ®ØµØµÛŒ Ø¯Ø± Ø­ÙˆØ²Ù‡ Ø³Ø§Ø®ØªÙ…Ø§Ù† Ùˆ Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø±ÛŒ</p>
      <div class="row" id="blogPosts">
        <div class="col-lg-4 col-md-6 mb-4">
          <div class="blog-card">
            <div class="blog-image">Ù…Ø¯ÛŒØ±ÛŒØª Ù¾Ø±ÙˆÚ˜Ù‡</div>
            <div class="blog-content">
              <h3 class="blog-title">Û±Û° Ù†Ú©ØªÙ‡ Ú©Ù„ÛŒØ¯ÛŒ Ø¯Ø± Ù…Ø¯ÛŒØ±ÛŒØª Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§ÛŒ Ø³Ø§Ø®ØªÙ…Ø§Ù†ÛŒ</h3>
              <p class="blog-excerpt">Ø¢Ù…ÙˆØ²Ø´ Ø¨Ù‡ØªØ±ÛŒÙ† Ø±ÙˆØ´â€ŒÙ‡Ø§ Ø¨Ø±Ø§ÛŒ Ù…Ø¯ÛŒØ±ÛŒØª Ø¨Ù‡ÛŒÙ†Ù‡ Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§ÛŒ Ø³Ø§Ø®ØªÙ…Ø§Ù†ÛŒ</p>
              <div class="blog-meta">
                <span><i class="bi bi-calendar"></i> Û±Ûµ ÙØ±ÙˆØ±Ø¯ÛŒÙ† Û±Û´Û°Û³</span>
                <span>Ûµ Ø¯Ù‚ÛŒÙ‚Ù‡</span>
              </div>
            </div>
          </div>
        </div>
        <div class="col-lg-4 col-md-6 mb-4">
          <div class="blog-card">
            <div class="blog-image">Ø§Ù†ØªØ®Ø§Ø¨ Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø±</div>
            <div class="blog-content">
              <h3 class="blog-title">Ú†Ú¯ÙˆÙ†Ù‡ Ø¨Ù‡ØªØ±ÛŒÙ† Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø± Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒÙ…ØŸ</h3>
              <p class="blog-excerpt">Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ Ø¬Ø§Ù…Ø¹ Ø¨Ø±Ø§ÛŒ Ø§Ø±Ø²ÛŒØ§Ø¨ÛŒ Ùˆ Ø§Ù†ØªØ®Ø§Ø¨ Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø± Ù…Ù†Ø§Ø³Ø¨</p>
              <div class="blog-meta">
                <span><i class="bi bi-calendar"></i> Û±Û° ÙØ±ÙˆØ±Ø¯ÛŒÙ† Û±Û´Û°Û³</span>
                <span>Û· Ø¯Ù‚ÛŒÙ‚Ù‡</span>
              </div>
            </div>
          </div>
        </div>
        <div class="col-lg-4 col-md-6 mb-4">
          <div class="blog-card">
            <div class="blog-image">Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯ Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø±ÛŒ</div>
            <div class="blog-content">
              <h3 class="blog-title">Ø§Ù†ÙˆØ§Ø¹ Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯Ù‡Ø§ÛŒ Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø±ÛŒ</h3>
              <p class="blog-excerpt">Ø¨Ø±Ø±Ø³ÛŒ Ø§Ù†ÙˆØ§Ø¹ Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯Ù‡Ø§ÛŒ Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø±ÛŒ Ùˆ Ù…Ø²Ø§ÛŒØ§ÛŒ Ù‡Ø±Ú©Ø¯Ø§Ù…</p>
              <div class="blog-meta">
                <span><i class="bi bi-calendar"></i> Ûµ ÙØ±ÙˆØ±Ø¯ÛŒÙ† Û±Û´Û°Û³</span>
                <span>Û±Û° Ø¯Ù‚ÛŒÙ‚Ù‡</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- ØµÙØ­Ù‡ ÙˆØ±ÙˆØ¯ -->
  <div id="login" class="page-section">
    <div class="container page-header">
      <div class="row justify-content-center">
        <div class="col-md-6 col-lg-5">
          <div class="card-peymanyar">
            <div class="text-center mb-4">
              <h2 class="section-title">ÙˆØ±ÙˆØ¯ Ø¨Ù‡ Ø­Ø³Ø§Ø¨ Ú©Ø§Ø±Ø¨Ø±ÛŒ</h2>
            </div>
            <form id="loginForm">
              <div class="mb-3">
                <label class="form-label required">Ø§ÛŒÙ…ÛŒÙ„</label>
                <input type="email" class="form-control" id="loginEmail" required>
              </div>
              <div class="mb-3">
                <label class="form-label required">Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±</label>
                <div class="input-group">
                  <input type="password" class="form-control" id="loginPassword" required>
                  <button type="button" class="btn btn-outline-secondary" onclick="window.app.togglePasswordVisibility('loginPassword')">
                    <i class="bi bi-eye"></i>
                  </button>
                </div>
              </div>
              <div class="mb-3 form-check">
                <input type="checkbox" class="form-check-input" id="rememberMe">
                <label class="form-check-label">Ù…Ø±Ø§ Ø¨Ù‡ Ø®Ø§Ø·Ø± Ø¨Ø³Ù¾Ø§Ø±</label>
              </div>
              <div class="mb-3 text-end">
                <a href="#" class="text-primary" onclick="window.app.showForgotPassword()">Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø±Ø§ ÙØ±Ø§Ù…ÙˆØ´ Ú©Ø±Ø¯Ù‡â€ŒØ§ÛŒØ¯ØŸ</a>
              </div>
              <div class="d-grid gap-2">
                <button type="submit" class="btn btn-primary">ÙˆØ±ÙˆØ¯</button>
                <button type="button" class="btn btn-outline-secondary" onclick="window.app.showPage('home')">Ø¨Ø§Ø²Ú¯Ø´Øª</button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- ØµÙØ­Ù‡ ÙØ±Ø§Ù…ÙˆØ´ÛŒ Ø±Ù…Ø² -->
  <div id="forgotPassword" class="page-section">
    <div class="container page-header">
      <div class="row justify-content-center">
        <div class="col-md-6 col-lg-5">
          <div class="card-peymanyar">
            <button class="btn btn-back mb-3" onclick="window.app.showPage('login')">
              <i class="bi bi-arrow-right me-2"></i>Ø¨Ø§Ø²Ú¯Ø´Øª
            </button>
            <div class="text-center mb-4">
              <h2 class="section-title">Ø¨Ø§Ø²ÛŒØ§Ø¨ÛŒ Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±</h2>
            </div>
            <form id="forgotPasswordForm">
              <div class="mb-3">
                <label class="form-label required">Ø§ÛŒÙ…ÛŒÙ„</label>
                <input type="email" class="form-control" id="forgotEmail" required>
              </div>
              <div class="d-grid">
                <button type="submit" class="btn btn-primary">Ø§Ø±Ø³Ø§Ù„ Ù„ÛŒÙ†Ú© Ø¨Ø§Ø²ÛŒØ§Ø¨ÛŒ</button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- ØµÙØ­Ù‡ Ù¾Ø±ÙˆÙØ§ÛŒÙ„ -->
  <div id="profile" class="page-section">
    <div class="container page-header">
      <div style="max-width: 1000px; margin: 0 auto;">
        <div class="d-flex justify-content-between align-items-center mb-4">
          <h2 class="section-title">Ù¾Ø±ÙˆÙØ§ÛŒÙ„ Ú©Ø§Ø±Ø¨Ø±ÛŒ</h2>
          <div>
            <button class="btn btn-primary me-2" onclick="window.app.enableProfileEdit()">
              <i class="bi bi-pencil me-2"></i>ÙˆÛŒØ±Ø§ÛŒØ´
            </button>
            <button class="btn btn-danger" onclick="window.app.logout()">
              <i class="bi bi-box-arrow-right me-2"></i>Ø®Ø±ÙˆØ¬
            </button>
          </div>
        </div>

        <div class="card-peymanyar">
          <!-- Ø­Ø§Ù„Øª Ù†Ù…Ø§ÛŒØ´ -->
          <div id="profileViewMode">
            <div class="text-center mb-4">
              <div class="user-avatar" id="profileAvatar">?</div>
              <h3 class="mt-3" id="profileDisplayName">Ú©Ø§Ø±Ø¨Ø±</h3>
              <p class="text-muted" id="profileDisplayEmail">Ø§ÛŒÙ…ÛŒÙ„</p>
              <div id="profileVerificationBadge"></div>
            </div>

            <div class="row" id="profileDisplayContent"></div>
            
            <!-- Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø´Ø±Ú©Øª (Ø¨Ø±Ø§ÛŒ Ø´Ø®Øµ Ø­Ù‚ÙˆÙ‚ÛŒ) -->
            <div id="profileCompanyFields" style="display:none;" class="row mt-4"></div>
            
            <!-- Ø§Ø·Ù„Ø§Ø¹Ø§Øª ØªØ®ØµØµÛŒ (Ø¨Ø±Ø§ÛŒ Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø±Ø§Ù†) -->
            <div id="profileContractorFields" style="display:none;" class="row mt-4"></div>
            
            <!-- Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§ÛŒ Ù†Ù…ÙˆÙ†Ù‡ -->
            <div id="profileProjectsSection" style="display:none;" class="mt-4"></div>
            
            <!-- Ù…Ø¯Ø§Ø±Ú© -->
            <div id="profileDocumentsSection" style="display:none;" class="mt-4"></div>
            
            <!-- ÙˆØ¶Ø¹ÛŒØª ØªØ£ÛŒÛŒØ¯ -->
            <div id="profileVerificationStatus" style="display:none;" class="mt-4 p-3 bg-light rounded"></div>
          </div>

          <!-- Ø­Ø§Ù„Øª ÙˆÛŒØ±Ø§ÛŒØ´ -->
          <div id="profileEditMode" style="display:none;">
            <form id="profileEditForm">
              <div class="row">
                <div class="col-md-6 mb-3">
                  <label class="form-label">Ù†Ø§Ù… Ùˆ Ù†Ø§Ù… Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ</label>
                  <input type="text" class="form-control" id="editFullName">
                </div>
                <div class="col-md-6 mb-3">
                  <label class="form-label">Ú©Ø¯ Ù…Ù„ÛŒ</label>
                  <input type="text" class="form-control" id="editNationalId">
                </div>
                <div class="col-md-6 mb-3">
                  <label class="form-label">Ø§ÛŒÙ…ÛŒÙ„</label>
                  <input type="email" class="form-control" id="editEmail" readonly disabled>
                </div>
                <div class="col-md-6 mb-3">
                  <label class="form-label">ØªÙ„ÙÙ† Ù‡Ù…Ø±Ø§Ù‡</label>
                  <input type="tel" class="form-control" id="editMobile">
                </div>
                <div class="col-md-6 mb-3">
                  <label class="form-label">ØªÙ„ÙÙ† Ø«Ø§Ø¨Øª</label>
                  <input type="tel" class="form-control" id="editPhone">
                </div>
                <div class="col-12 mb-3">
                  <label class="form-label">Ø¢Ø¯Ø±Ø³</label>
                  <textarea class="form-control" id="editAddress" rows="3"></textarea>
                </div>
              </div>

              <!-- Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø´Ø±Ú©Øª -->
              <div id="editCompanyFields" style="display:none;" class="row mt-3">
                <div class="col-12"><h5>Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø´Ø±Ú©Øª</h5></div>
                <div class="col-md-6 mb-3">
                  <label class="form-label">Ù†Ø§Ù… Ø´Ø±Ú©Øª</label>
                  <input type="text" class="form-control" id="editCompanyName">
                </div>
                <div class="col-md-6 mb-3">
                  <label class="form-label">Ø´Ù…Ø§Ø±Ù‡ Ø«Ø¨Øª</label>
                  <input type="text" class="form-control" id="editRegistrationNo">
                </div>
              </div>

              <!-- Ø§Ø·Ù„Ø§Ø¹Ø§Øª ØªØ®ØµØµÛŒ -->
              <div id="editContractorFields" style="display:none;" class="row mt-3">
                <div class="col-12"><h5>Ø§Ø·Ù„Ø§Ø¹Ø§Øª ØªØ®ØµØµÛŒ</h5></div>
                <div class="col-md-6 mb-3">
                  <label class="form-label">ØªØ®ØµØµ Ø§ØµÙ„ÛŒ</label>
                  <select class="form-select" id="editMainExpertise">
                    <option value="">Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</option>
                    <option value="steel_fabrication">Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø± Ø³Ø§Ø®Øª Ø§Ø³Ú©Ù„Øª ÙÙ„Ø²ÛŒ</option>
                    <option value="concrete_execution">Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø± Ø§Ø¬Ø±Ø§ÛŒ Ø¨ØªÙ†</option>
                  </select>
                </div>
                <div class="col-md-6 mb-3">
                  <label class="form-label">Ø³Ø§Ù„ Ø´Ø±ÙˆØ¹ ÙØ¹Ø§Ù„ÛŒØª</label>
                  <select class="form-select" id="editStartYear"></select>
                </div>
              </div>

              <div class="d-flex gap-2 justify-content-end mt-4">
                <button type="button" class="btn btn-secondary" onclick="window.app.cancelProfileEdit()">Ø§Ù†ØµØ±Ø§Ù</button>
                <button type="submit" class="btn btn-primary">Ø°Ø®ÛŒØ±Ù‡</button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- ØµÙØ­Ù‡ Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ú©Ø§Ø±ÙØ±Ù…Ø§ -->
  <div id="employerRegistration" class="page-section">
    <div class="container page-header">
      <button class="btn btn-back mb-3" onclick="window.app.showPage('home')">
        <i class="bi bi-arrow-right me-2"></i>Ø¨Ø§Ø²Ú¯Ø´Øª
      </button>
      <div class="row justify-content-center">
        <div class="col-lg-8">
          <div class="text-center mb-5">
            <h1 style="color: var(--employer);">Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ú©Ø§Ø±ÙØ±Ù…Ø§</h1>
          </div>
          <form id="employerForm" class="form-container" style="border-top-color: var(--employer);" novalidate>
            <!-- Ø¨Ø®Ø´ 1 -->
            <div class="form-section" id="employerSection1">
              <h5>Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù¾Ø§ÛŒÙ‡</h5>
              <div class="row">
                <div class="col-md-6 mb-3">
                  <label class="form-label required">Ù†ÙˆØ¹ Ø´Ø®ØµÛŒØª</label>
                  <select class="form-select" id="employerAccountType" required>
                    <option value="">Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</option>
                    <option value="individual">Ø´Ø®Øµ Ø­Ù‚ÛŒÙ‚ÛŒ</option>
                    <option value="company">Ø´Ø®Øµ Ø­Ù‚ÙˆÙ‚ÛŒ</option>
                  </select>
                </div>
              </div>
              <div id="employerDynamicFields"></div>
              <div class="row">
                <div class="col-md-6 mb-3">
                  <label class="form-label required">Ø§ÛŒÙ…ÛŒÙ„</label>
                  <input type="email" class="form-control" id="employerEmail" required>
                </div>
                <div class="col-md-6 mb-3">
                  <label class="form-label required">Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±</label>
                  <input type="password" class="form-control" id="employerPassword" required>
                </div>
                <div class="col-md-6 mb-3">
                  <label class="form-label required">ØªÚ©Ø±Ø§Ø± Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±</label>
                  <input type="password" class="form-control" id="employerConfirmPassword" required>
                </div>
              </div>
            </div>

            <!-- Ø¨Ø®Ø´ 2 -->
            <div class="form-section" id="employerSection2" style="display:none;">
              <h5>Ø§Ø·Ù„Ø§Ø¹Ø§Øª ØªÙ…Ø§Ø³</h5>
              <div class="row">
                <div class="col-md-6 mb-3">
                  <label class="form-label required">ØªÙ„ÙÙ† Ù‡Ù…Ø±Ø§Ù‡</label>
                  <input type="tel" class="form-control" id="employerMobile" pattern="09[0-9]{9}" required>
                </div>
                <div class="col-md-6 mb-3">
                  <label class="form-label">ØªÙ„ÙÙ† Ø«Ø§Ø¨Øª</label>
                  <input type="tel" class="form-control" id="employerPhone">
                </div>
                <div class="col-12 mb-3">
                  <label class="form-label required">Ø¢Ø¯Ø±Ø³</label>
                  <textarea class="form-control" id="employerAddress" required></textarea>
                </div>
              </div>
              <div id="employerCompanyFields" style="display:none;">
                <div class="row">
                  <div class="col-md-6 mb-3">
                    <label class="form-label required">Ø´Ù†Ø§Ø³Ù‡ Ù…Ù„ÛŒ</label>
                    <input type="text" class="form-control" id="employerCompanyId" required>
                  </div>
                  <div class="col-md-6 mb-3">
                    <label class="form-label required">Ø´Ù…Ø§Ø±Ù‡ Ø«Ø¨Øª</label>
                    <input type="text" class="form-control" id="employerRegistrationNo" required>
                  </div>
                </div>
              </div>
            </div>

            <!-- Ø¨Ø®Ø´ 3 -->
            <div class="form-section" id="employerSection3" style="display:none;">
              <h5>Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù¾Ø±ÙˆÚ˜Ù‡</h5>
              <div class="mb-3">
                <label class="form-label">Ù†ÙˆØ¹ Ù¾Ø±ÙˆÚ˜Ù‡ Ù…ÙˆØ±Ø¯ Ù†Ø¸Ø±</label>
                <div class="row">
                  <div class="col-6">
                    <div class="form-check">
                      <input class="form-check-input" type="checkbox" id="projectResidential" name="projectType">
                      <label class="form-check-label">Ù…Ø³Ú©ÙˆÙ†ÛŒ</label>
                    </div>
                  </div>
                  <div class="col-6">
                    <div class="form-check">
                      <input class="form-check-input" type="checkbox" id="projectCommercial" name="projectType">
                      <label class="form-check-label">ØªØ¬Ø§Ø±ÛŒ</label>
                    </div>
                  </div>
                  <div class="col-6">
                    <div class="form-check">
                      <input class="form-check-input" type="checkbox" id="projectIndustrial" name="projectType">
                      <label class="form-check-label">ØµÙ†Ø¹ØªÛŒ</label>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Ø¨Ø®Ø´ 4 -->
            <div class="form-section" id="employerSection4" style="display:none;">
              <h5>ØªØ§ÛŒÛŒØ¯ Ù†Ù‡Ø§ÛŒÛŒ</h5>
              <div class="alert alert-info" id="employerSummary"></div>
              <div class="form-check mb-3">
                <input class="form-check-input" type="checkbox" id="employerTerms" required>
                <label class="form-check-label">Ù‚ÙˆØ§Ù†ÛŒÙ† Ùˆ Ù…Ù‚Ø±Ø±Ø§Øª Ø±Ø§ Ù…ÛŒâ€ŒÙ¾Ø°ÛŒØ±Ù…</label>
              </div>
            </div>

            <div class="form-navigation">
              <button type="button" class="btn btn-secondary" id="employerPrevBtn" style="display:none;">Ù‚Ø¨Ù„ÛŒ</button>
              <button type="button" class="btn btn-primary" id="employerNextBtn">Ø¨Ø¹Ø¯ÛŒ</button>
              <button type="submit" class="btn btn-success" id="employerSubmitBtn" style="display:none;">Ø«Ø¨Øªâ€ŒÙ†Ø§Ù…</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>

  <!-- ØµÙØ­Ù‡ Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø± -->
  <div id="contractorRegistration" class="page-section">
    <div class="container page-header">
      <button class="btn btn-back mb-3" onclick="window.app.showPage('home')">
        <i class="bi bi-arrow-right me-2"></i>Ø¨Ø§Ø²Ú¯Ø´Øª
      </button>
      <div class="row justify-content-center">
        <div class="col-lg-10">
          <div class="text-center mb-5">
            <h1 style="color: var(--contractor);">Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø±</h1>
          </div>

          <div class="progress mb-4">
            <div id="contractorProgress" class="progress-bar" style="width:20%; background: var(--gradient-contractor);"></div>
          </div>

          <div class="step-indicator" id="contractorSteps">
            <div class="step active" id="step1">1</div>
            <div class="step" id="step2">2</div>
            <div class="step" id="step3">3</div>
            <div class="step" id="step4">4</div>
            <div class="step" id="step5">5</div>
          </div>

          <form id="contractorForm" class="form-container" style="border-top-color: var(--contractor);" novalidate>
            <!-- Ù…Ø±Ø­Ù„Ù‡ 1 -->
            <div class="form-section" id="contractorSection1">
              <h5>Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù‡ÙˆÛŒØªÛŒ</h5>
              <div class="row">
                <div class="col-md-6 mb-3">
                  <label class="form-label required">Ù†ÙˆØ¹ Ø´Ø®ØµÛŒØª</label>
                  <select class="form-select" id="contractorAccountType" required>
                    <option value="">Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</option>
                    <option value="individual">Ø´Ø®Øµ Ø­Ù‚ÛŒÙ‚ÛŒ</option>
                    <option value="company">Ø´Ø®Øµ Ø­Ù‚ÙˆÙ‚ÛŒ</option>
                  </select>
                </div>
              </div>
              <div id="contractorDynamicFields"></div>
              <div class="row">
                <div class="col-md-6 mb-3">
                  <label class="form-label required">Ù…Ø³Ø¦ÙˆÙ„ Ø§Ø±ØªØ¨Ø§Ø·</label>
                  <input type="text" class="form-control" id="contactPerson" required>
                </div>
                <div class="col-md-6 mb-3">
                  <label class="form-label required">ØªÙ„ÙÙ† Ù‡Ù…Ø±Ø§Ù‡</label>
                  <input type="tel" class="form-control" id="contractorMobile" pattern="09[0-9]{9}" required>
                </div>
                <div class="col-md-6 mb-3">
                  <label class="form-label required">Ø§ÛŒÙ…ÛŒÙ„</label>
                  <input type="email" class="form-control" id="contractorEmail" required>
                </div>
                <div class="col-md-6 mb-3">
                  <label class="form-label required">Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±</label>
                  <input type="password" class="form-control" id="contractorPassword" required>
                </div>
                <div class="col-md-6 mb-3">
                  <label class="form-label required">ØªÚ©Ø±Ø§Ø± Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±</label>
                  <input type="password" class="form-control" id="contractorConfirmPassword" required>
                </div>
              </div>
            </div>

            <!-- Ù…Ø±Ø­Ù„Ù‡ 2 -->
            <div class="form-section" id="contractorSection2" style="display:none;">
              <h5>ØªØ®ØµØµ Ùˆ Ø®Ø¯Ù…Ø§Øª</h5>
              <div class="row">
                <div class="col-md-6 mb-3">
                  <label class="form-label required">ØªØ®ØµØµ Ø§ØµÙ„ÛŒ</label>
                  <select class="form-select" id="mainExpertise" required>
                    <option value="">Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</option>
                    <option value="steel_fabrication">Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø± Ø³Ø§Ø®Øª Ø§Ø³Ú©Ù„Øª ÙÙ„Ø²ÛŒ</option>
                    <option value="steel_installation">Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø± Ù†ØµØ¨ Ø§Ø³Ú©Ù„Øª ÙÙ„Ø²ÛŒ</option>
                    <option value="formwork">Ø§Ú©ÛŒÙ¾ Ù‚Ø§Ù„Ø¨â€ŒØ¨Ù†Ø¯ÛŒ</option>
                    <option value="rebar">Ø§Ú©ÛŒÙ¾ Ø¢Ø±Ù…Ø§ØªÙˆØ±Ø¨Ù†Ø¯ÛŒ</option>
                    <option value="concrete_execution">Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø± Ø§Ø¬Ø±Ø§ÛŒ Ø¨ØªÙ†</option>
                    <option value="welding">Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø± Ø¬ÙˆØ´Ú©Ø§Ø±ÛŒ Ø³Ø§Ø²Ù‡</option>
                  </select>
                </div>
                <div class="col-md-6 mb-3">
                  <label class="form-label">Ø²ÛŒØ±Ø­ÙˆØ²Ù‡â€ŒÙ‡Ø§</label>
                  <div id="subExpertiseContainer"></div>
                </div>
                <div class="col-12 mb-3">
                  <label class="form-label">Ù…Ù‚ÛŒØ§Ø³ Ù¾Ø±ÙˆÚ˜Ù‡ (Ø¯Ø± Ù…Ø§Ù‡)</label>
                  <div class="row">
                    <div class="col-md-6">
                      <label>Ù…ØªØ±Ø§Ú˜</label>
                      <div class="input-group">
                        <input type="number" class="form-control" id="projectArea" min="0">
                        <select class="form-select" id="areaUnit" style="max-width:120px;">
                          <option value="sqm">Ù…ØªØ± Ù…Ø±Ø¨Ø¹</option>
                          <option value="cbm">Ù…ØªØ± Ù…Ú©Ø¹Ø¨</option>
                        </select>
                      </div>
                    </div>
                    <div class="col-md-6">
                      <label>ÙˆØ²Ù† (ØªÙ†)</label>
                      <input type="number" class="form-control" id="projectWeight" min="0">
                    </div>
                  </div>
                </div>
                <div class="col-12 mb-3">
                  <label class="form-label required">Ù…Ø­Ø¯ÙˆØ¯Ù‡ Ø¬ØºØ±Ø§ÙÛŒØ§ÛŒÛŒ ÙØ¹Ø§Ù„ÛŒØª</label>
                  <select class="form-select" id="workArea" multiple required style="height:200px;">
                    <option value="all" class="select-all-option">âœ… Ú©Ù„ Ø§ÛŒØ±Ø§Ù†</option>
                    <optgroup label="Ù…Ù†Ø§Ø·Ù‚ Ù…Ø±Ú©Ø²ÛŒ">
                      <option value="tehran">ØªÙ‡Ø±Ø§Ù†</option>
                      <option value="alborz">Ø§Ù„Ø¨Ø±Ø²</option>
                      <option value="esfahan">Ø§ØµÙÙ‡Ø§Ù†</option>
                    </optgroup>
                    <optgroup label="Ù…Ù†Ø§Ø·Ù‚ Ø´Ù…Ø§Ù„ÛŒ">
                      <option value="gilan">Ú¯ÛŒÙ„Ø§Ù†</option>
                      <option value="mazandaran">Ù…Ø§Ø²Ù†Ø¯Ø±Ø§Ù†</option>
                    </optgroup>
                  </select>
                  <div class="form-text">Ctrl Ø±Ø§ Ù†Ú¯Ù‡ Ø¯Ø§Ø±ÛŒØ¯ Ø¨Ø±Ø§ÛŒ Ø§Ù†ØªØ®Ø§Ø¨ Ú†Ù†Ø¯ Ú¯Ø²ÛŒÙ†Ù‡</div>
                </div>
              </div>
            </div>

            <!-- Ù…Ø±Ø­Ù„Ù‡ 3 -->
            <div class="form-section" id="contractorSection3" style="display:none;">
              <h5>Ø³Ø§Ø¨Ù‚Ù‡ Ùˆ ØªÙˆØ§Ù†Ù…Ù†Ø¯ÛŒâ€ŒÙ‡Ø§</h5>
              <div class="row">
                <div class="col-md-6 mb-3">
                  <label class="form-label required">Ø³Ø§Ù„ Ø¢ØºØ§Ø² ÙØ¹Ø§Ù„ÛŒØª</label>
                  <select class="form-select" id="startYear" required>
                    <option value="">Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</option>
                  </select>
                </div>
                <div class="col-md-6 mb-3">
                  <label class="form-label">ØªØ¹Ø¯Ø§Ø¯ Ù†ÛŒØ±ÙˆÛŒ Ø§Ù†Ø³Ø§Ù†ÛŒ</label>
                  <input type="number" class="form-control" id="teamSize" min="0">
                </div>
                <div class="col-12 mb-3">
                  <label class="form-label">ØªØ¬Ù‡ÛŒØ²Ø§Øª Ùˆ Ù…Ø§Ø´ÛŒÙ†â€ŒØ¢Ù„Ø§Øª</label>
                  <textarea class="form-control" id="equipment" rows="3" placeholder="Ø¯Ø³ØªÚ¯Ø§Ù‡ Ø¬ÙˆØ´ØŒ Ø¬Ø±Ø«Ù‚ÛŒÙ„ØŒ ..."></textarea>
                </div>
                <div class="col-12 mb-4">
                  <label class="form-label">Ù…Ø¯Ø§Ø±Ú© Ùˆ Ú¯ÙˆØ§Ù‡ÛŒÙ†Ø§Ù…Ù‡â€ŒÙ‡Ø§</label>
                  <div class="upload-box" id="docUploadArea">
                    <i class="bi bi-cloud-arrow-up" style="font-size:2rem;"></i>
                    <p>ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ Ø±Ø§ Ø§ÛŒÙ†Ø¬Ø§ Ø±Ù‡Ø§ Ú©Ù†ÛŒØ¯ ÛŒØ§ Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯</p>
                    <input type="file" class="d-none" id="documentUpload" multiple accept=".pdf,.jpg,.png">
                  </div>
                  <div id="fileList" class="mt-2"></div>
                </div>
              </div>
            </div>

            <!-- Ù…Ø±Ø­Ù„Ù‡ 4 -->
            <div class="form-section" id="contractorSection4" style="display:none;">
              <h5>Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§ÛŒ Ù†Ù…ÙˆÙ†Ù‡</h5>
              <div id="projectContainer">
                <div class="card mb-3 project-card">
                  <div class="card-body">
                    <h6>Ù¾Ø±ÙˆÚ˜Ù‡ Ù†Ù…ÙˆÙ†Ù‡ Û±</h6>
                    <div class="row">
                      <div class="col-md-4 mb-3">
                        <label class="form-label">Ù†Ø§Ù… Ù¾Ø±ÙˆÚ˜Ù‡</label>
                        <input type="text" class="form-control" name="projectName[]">
                      </div>
                      <div class="col-md-4 mb-3">
                        <label class="form-label">Ø³Ø§Ù„ ØªØ­ÙˆÛŒÙ„</label>
                        <select class="form-select" name="projectYear[]">
                          <option value="">Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</option>
                        </select>
                      </div>
                      <div class="col-md-4 mb-3">
                        <label class="form-label">Ù…Ø´ØªØ±ÛŒ</label>
                        <input type="text" class="form-control" name="projectClient[]">
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <button type="button" class="btn btn-outline-primary" id="addProject">
                <i class="bi bi-plus-circle me-1"></i>Ø§ÙØ²ÙˆØ¯Ù† Ù¾Ø±ÙˆÚ˜Ù‡
              </button>
            </div>

            <!-- Ù…Ø±Ø­Ù„Ù‡ 5 -->
            <div class="form-section" id="contractorSection5" style="display:none;">
              <h5>Ø§Ø·Ù„Ø§Ø¹Ø§Øª ØªÚ©Ù…ÛŒÙ„ÛŒ</h5>
              <div class="row">
                <div class="col-md-6 mb-3">
                  <label class="form-label">Ø±ÙˆØ´ Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯</label>
                  <select class="form-select" id="contractMethod">
                    <option value="">Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</option>
                    <option value="fixed">Ù…Ù‚Ø·ÙˆØ¹</option>
                    <option value="kiloyi">Ú©ÛŒÙ„ÙˆÛŒÛŒ</option>
                  </select>
                </div>
                <div class="col-md-6 mb-3">
                  <label class="form-label">Ø¨ÛŒÙ…Ù‡ Ù…Ø³Ø¦ÙˆÙ„ÛŒØª</label>
                  <select class="form-select" id="insurance">
                    <option value="">Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</option>
                    <option value="yes">Ø¯Ø§Ø±Ù…</option>
                    <option value="no">Ù†Ø¯Ø§Ø±Ù…</option>
                  </select>
                </div>
              </div>
              <div class="form-check mb-3">
                <input class="form-check-input" type="checkbox" id="contractorTerms" required>
                <label class="form-check-label">Ù‚ÙˆØ§Ù†ÛŒÙ† Ùˆ Ù…Ù‚Ø±Ø±Ø§Øª Ø±Ø§ Ù…ÛŒâ€ŒÙ¾Ø°ÛŒØ±Ù…</label>
              </div>
              <div class="summary-box" id="formSummary" style="display:none;">
                <h6>Ù¾ÛŒØ´â€ŒÙ†Ù…Ø§ÛŒØ´ Ù¾Ø±ÙˆÙØ§ÛŒÙ„</h6>
                <div id="summaryContent" class="mt-2"></div>
              </div>
            </div>

            <div class="form-navigation">
              <button type="button" class="btn btn-secondary" id="contractorPrevBtn" style="display:none;">Ù‚Ø¨Ù„ÛŒ</button>
              <button type="button" class="btn btn-primary" id="contractorNextBtn">Ø¨Ø¹Ø¯ÛŒ</button>
              <button type="submit" class="btn btn-success" id="contractorSubmitBtn" style="display:none;">Ø«Ø¨Øªâ€ŒÙ†Ø§Ù…</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>

  <!-- Ù¾Ù†Ù„ Ù…Ø¯ÛŒØ±ÛŒØª -->
  <div id="adminMessages" class="page-section">
    <div class="container page-header">
      <div class="d-flex justify-content-between align-items-center mb-4">
        <h2 class="section-title">Ù¾Ù†Ù„ Ù…Ø¯ÛŒØ±ÛŒØª</h2>
        <button class="btn btn-danger" onclick="window.app.adminLogout()">Ø®Ø±ÙˆØ¬</button>
      </div>

      <!-- Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§ÛŒ Ø¢Ù…Ø§Ø± -->
      <div class="row mb-4">
        <div class="col-md-3 col-6 mb-3">
          <div class="card-peymanyar text-center">
            <h3 id="adminTotalMessages">0</h3>
            <p>Ú©Ù„ Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§</p>
          </div>
        </div>
        <div class="col-md-3 col-6 mb-3">
          <div class="card-peymanyar text-center">
            <h3 id="adminActiveUsers">0</h3>
            <p>Ú©Ø§Ø±Ø¨Ø±Ø§Ù† ÙØ¹Ø§Ù„</p>
          </div>
        </div>
        <div class="col-md-3 col-6 mb-3">
          <div class="card-peymanyar text-center">
            <h3 id="adminTotalProjects">0</h3>
            <p>Ú©Ù„ Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§</p>
          </div>
        </div>
        <div class="col-md-3 col-6 mb-3">
          <div class="card-peymanyar text-center">
            <h3 id="adminPendingProjects">0</h3>
            <p>Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø± ØªØ§ÛŒÛŒØ¯</p>
          </div>
        </div>
      </div>

      <!-- ØªØ¨â€ŒÙ‡Ø§ -->
      <ul class="nav nav-tabs mb-4" id="adminTabs">
        <li class="nav-item"><button class="nav-link active" data-bs-toggle="tab" data-bs-target="#adminTab1">Ø¢Ù…Ø§Ø± Ù¾ÛŒØ´Ø±ÙØªÙ‡</button></li>
        <li class="nav-item"><button class="nav-link" data-bs-toggle="tab" data-bs-target="#adminTab2">Ø§Ø±Ø³Ø§Ù„ Ù¾ÛŒØ§Ù…</button></li>
        <li class="nav-item"><button class="nav-link" data-bs-toggle="tab" data-bs-target="#adminTab3">Ú©Ø§Ø±Ø¨Ø±Ø§Ù†</button></li>
        <li class="nav-item"><button class="nav-link" data-bs-toggle="tab" data-bs-target="#adminTab4">Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§</button></li>
        <li class="nav-item"><button class="nav-link" data-bs-toggle="tab" data-bs-target="#adminTab5">Ù¾Ø§Ú©Ø³Ø§Ø²ÛŒ</button></li>
        <li class="nav-item"><button class="nav-link" data-bs-toggle="tab" data-bs-target="#adminTab6">Ù„Ø§Ú¯â€ŒÙ‡Ø§</button></li>
      </ul>

      <div class="tab-content">
        <!-- ØªØ¨ 1: Ø¢Ù…Ø§Ø± -->
        <div class="tab-pane fade show active" id="adminTab1">
          <div class="card-peymanyar">
            <canvas id="adminChart" style="height:300px;"></canvas>
            <div class="row mt-4">
              <div class="col-md-4">
                <h6>Ú©Ø§Ø±Ø¨Ø±Ø§Ù† Ø¬Ø¯ÛŒØ¯</h6>
                <p id="newUsersToday">0 Ø§Ù…Ø±ÙˆØ²</p>
              </div>
              <div class="col-md-4">
                <h6>Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§ÛŒ Ø¬Ø¯ÛŒØ¯</h6>
                <p id="newProjectsToday">0 Ø§Ù…Ø±ÙˆØ²</p>
              </div>
              <div class="col-md-4">
                <h6>ÙØ¹Ø§Ù„â€ŒØªØ±ÛŒÙ† Ú©Ø§Ø±Ø¨Ø±Ø§Ù†</h6>
                <ul id="topUsersList"></ul>
              </div>
            </div>
          </div>
        </div>

        <!-- ØªØ¨ 2: Ø§Ø±Ø³Ø§Ù„ Ù¾ÛŒØ§Ù… -->
        <div class="tab-pane fade" id="adminTab2">
          <div class="card-peymanyar">
            <div class="row">
              <div class="col-md-8">
                <div class="mb-3">
                  <label class="form-label">Ú¯ÛŒØ±Ù†Ø¯Ú¯Ø§Ù†</label>
                  <select class="form-select" id="messageRecipients">
                    <option value="all">Ù‡Ù…Ù‡ Ú©Ø§Ø±Ø¨Ø±Ø§Ù†</option>
                    <option value="employers">Ú©Ø§Ø±ÙØ±Ù…Ø§ÛŒØ§Ù†</option>
                    <option value="contractors">Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø±Ø§Ù†</option>
                  </select>
                </div>
                <div class="mb-3">
                  <label class="form-label">Ø¹Ù†ÙˆØ§Ù† Ù¾ÛŒØ§Ù…</label>
                  <input type="text" class="form-control" id="messageTitle">
                </div>
                <div class="mb-3">
                  <label class="form-label">Ù…ØªÙ† Ù¾ÛŒØ§Ù…</label>
                  <textarea class="form-control" id="messageBody" rows="5"></textarea>
                </div>
                <button class="btn btn-primary" onclick="window.app.adminSendMessage()">Ø§Ø±Ø³Ø§Ù„ Ù¾ÛŒØ§Ù…</button>
              </div>
              <div class="col-md-4">
                <h6>ØªØ§Ø±ÛŒØ®Ú†Ù‡ Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§</h6>
                <div id="messageHistory" style="max-height:300px; overflow-y:auto;"></div>
              </div>
            </div>
          </div>
        </div>

        <!-- ØªØ¨ 3: Ú©Ø§Ø±Ø¨Ø±Ø§Ù† -->
        <div class="tab-pane fade" id="adminTab3">
          <div class="card-peymanyar">
            <div class="row mb-3">
              <div class="col-md-4">
                <input type="text" class="form-control" id="userSearch" placeholder="Ø¬Ø³ØªØ¬ÙˆÛŒ Ú©Ø§Ø±Ø¨Ø±Ø§Ù†...">
              </div>
              <div class="col-md-3">
                <select class="form-select" id="userTypeFilter">
                  <option value="all">Ù‡Ù…Ù‡ Ú©Ø§Ø±Ø¨Ø±Ø§Ù†</option>
                  <option value="employer">Ú©Ø§Ø±ÙØ±Ù…Ø§ÛŒØ§Ù†</option>
                  <option value="contractor">Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø±Ø§Ù†</option>
                </select>
              </div>
              <div class="col-md-2">
                <button class="btn btn-primary w-100" onclick="window.app.loadAdminUsers()">Ø¬Ø³ØªØ¬Ùˆ</button>
              </div>
            </div>
            <div id="adminUsersList"></div>
          </div>
        </div>

        <!-- ØªØ¨ 4: Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§ -->
        <div class="tab-pane fade" id="adminTab4">
          <div class="card-peymanyar">
            <div class="row mb-3">
              <div class="col-md-4">
                <input type="text" class="form-control" id="projectSearchAdmin" placeholder="Ø¬Ø³ØªØ¬ÙˆÛŒ Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§...">
              </div>
              <div class="col-md-3">
                <select class="form-select" id="projectFilterAdmin">
                  <option value="pending">Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø± ØªØ§ÛŒÛŒØ¯</option>
                  <option value="all">Ù‡Ù…Ù‡ Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§</option>
                </select>
              </div>
            </div>
            <div id="adminProjectsList"></div>
          </div>
        </div>

        <!-- ØªØ¨ 5: Ù¾Ø§Ú©Ø³Ø§Ø²ÛŒ -->
        <div class="tab-pane fade" id="adminTab5">
          <div class="card-peymanyar">
            <div class="row">
              <div class="col-md-4 mb-3">
                <div class="card">
                  <div class="card-body">
                    <h6>Ù¾Ø§Ú©Ø³Ø§Ø²ÛŒ Ú©Ø´</h6>
                    <button class="btn btn-warning" onclick="window.app.adminClearCache()">Ù¾Ø§Ú©Ø³Ø§Ø²ÛŒ</button>
                  </div>
                </div>
              </div>
              <div class="col-md-4 mb-3">
                <div class="card">
                  <div class="card-body">
                    <h6>Ù¾Ø§Ú©Ø³Ø§Ø²ÛŒ Ù„Ø§Ú¯â€ŒÙ‡Ø§</h6>
                    <button class="btn btn-warning" onclick="window.app.adminClearOldLogs()">Ù¾Ø§Ú©Ø³Ø§Ø²ÛŒ</button>
                  </div>
                </div>
              </div>
              <div class="col-md-4 mb-3">
                <div class="card">
                  <div class="card-body">
                    <h6>Ù¾Ø§Ú©Ø³Ø§Ø²ÛŒ ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ù…ÙˆÙ‚Øª</h6>
                    <button class="btn btn-warning" onclick="window.app.adminClearTempFiles()">Ù¾Ø§Ú©Ø³Ø§Ø²ÛŒ</button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- ØªØ¨ 6: Ù„Ø§Ú¯â€ŒÙ‡Ø§ -->
        <div class="tab-pane fade" id="adminTab6">
          <div class="card-peymanyar">
            <div class="row mb-3">
              <div class="col-md-3">
                <select class="form-select" id="logType">
                  <option value="all">Ù‡Ù…Ù‡ Ù„Ø§Ú¯â€ŒÙ‡Ø§</option>
                  <option value="login">ÙˆØ±ÙˆØ¯ Ú©Ø§Ø±Ø¨Ø±Ø§Ù†</option>
                  <option value="admin">ÙØ¹Ø§Ù„ÛŒØª Ù…Ø¯ÛŒØ±Ø§Ù†</option>
                  <option value="error">Ø®Ø·Ø§Ù‡Ø§</option>
                </select>
              </div>
              <div class="col-md-3">
                <input type="date" class="form-control" id="logDateFrom">
              </div>
              <div class="col-md-3">
                <input type="date" class="form-control" id="logDateTo">
              </div>
            </div>
            <div id="logsContainer" style="max-height:400px; overflow-y:auto;"></div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- ÙÙˆØªØ± -->
  <footer class="footer">
    <div class="container">
      <div class="row">
        <div class="col-lg-4">
          <div class="footer-logo">Ù¾ÛŒÙ…Ø§Ù†â€ŒÛŒØ§Ø±</div>
          <p>Ù¾Ù„ØªÙØ±Ù… Ù‡ÙˆØ´Ù…Ù†Ø¯ Ù¾ÛŒÙ…Ø§Ù†â€ŒÛŒØ§Ø±ØŒ Ø§ÙˆÙ„ÛŒÙ† Ùˆ ØªØ®ØµØµÛŒâ€ŒØªØ±ÛŒÙ† Ù¾Ù„ØªÙØ±Ù… Ø§Ø±ØªØ¨Ø§Ø· Ú©Ø§Ø±ÙØ±Ù…Ø§ÛŒØ§Ù† Ùˆ Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø±Ø§Ù† Ø³Ø§Ø®ØªÙ…Ø§Ù†ÛŒ Ø¯Ø± Ø§ÛŒØ±Ø§Ù†.</p>
          <div class="social-links">
            <a href="#" class="social-link"><i class="bi bi-instagram"></i></a>
            <a href="#" class="social-link"><i class="bi bi-telegram"></i></a>
            <a href="#" class="social-link"><i class="bi bi-linkedin"></i></a>
          </div>
        </div>
        <div class="col-lg-2 col-md-4">
          <h5 class="footer-title">Ù„ÛŒÙ†Ú©â€ŒÙ‡Ø§ÛŒ Ø³Ø±ÛŒØ¹</h5>
          <ul class="footer-links">
            <li><a href="#" onclick="window.app.showPage('home')">Ø®Ø§Ù†Ù‡</a></li>
            <li><a href="#" onclick="window.app.showPage('features')">ÙˆÛŒÚ˜Ú¯ÛŒâ€ŒÙ‡Ø§</a></li>
            <li><a href="#" onclick="window.app.showPage('search')">Ø¬Ø³ØªØ¬Ùˆ</a></li>
            <li><a href="#" onclick="window.app.showPage('projects')">Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§</a></li>
          </ul>
        </div>
        <div class="col-lg-3 col-md-4">
          <h5 class="footer-title">ØªÙ…Ø§Ø³ Ø¨Ø§ Ù…Ø§</h5>
          <ul class="footer-links">
            <li><i class="bi bi-geo-alt me-2"></i> ØªÙ‡Ø±Ø§Ù†ØŒ Ø®ÛŒØ§Ø¨Ø§Ù† ÙˆÙ„ÛŒØ¹ØµØ±</li>
            <li><i class="bi bi-telephone me-2"></i> Û°Û²Û±-Û±Û²Û³Û´ÛµÛ¶Û·Û¸</li>
            <li><i class="bi bi-envelope me-2"></i> info@peymanyar.com</li>
          </ul>
        </div>
        <div class="col-lg-3 col-md-4">
          <h5 class="footer-title">Ø®Ø¨Ø±Ù†Ø§Ù…Ù‡</h5>
          <p>Ø¨Ø±Ø§ÛŒ Ø¯Ø±ÛŒØ§ÙØª Ø¬Ø¯ÛŒØ¯ØªØ±ÛŒÙ† Ø§Ø®Ø¨Ø§Ø± Ø¹Ø¶Ùˆ Ø´ÙˆÛŒØ¯.</p>
          <div class="input-group">
            <input type="email" class="form-control" placeholder="Ø§ÛŒÙ…ÛŒÙ„ Ø´Ù…Ø§">
            <button class="btn btn-primary" type="button">Ø¹Ø¶ÙˆÛŒØª</button>
          </div>
        </div>
      </div>
      <div class="copyright">
        <p>Â© Û±Û´Û°Û³ ØªÙ…Ø§Ù…ÛŒ Ø­Ù‚ÙˆÙ‚ Ø¨Ø±Ø§ÛŒ Ù¾ÛŒÙ…Ø§Ù†â€ŒÛŒØ§Ø± Ù…Ø­ÙÙˆØ¸ Ø§Ø³Øª.</p>
      </div>
    </div>
  </footer>

  <!-- Ø§Ø³Ú©Ø±ÛŒÙ¾Øªâ€ŒÙ‡Ø§ -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script type="module">
    import { createClient } from 'https://esm.sh/@supabase/supabase-js@2'

    const supabaseUrl = 'https://fycyznoykgxpaatjsawi.supabase.co'
    const supabaseAnonKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZ5Y3l6bm95a2d4cGFhdGpzYXdpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzE2MDM0MjYsImV4cCI6MjA4NzE3OTQyNn0.fZQfDuaUW6jxQOF0be8eaK16mD-lHfPnyYht-0ryQSQ'

    const supabase = createClient(supabaseUrl, supabaseAnonKey)

    class PeymanyarApp {
      constructor() {
        this.supabase = supabase
        this.currentUser = null
        this.isAdmin = false
        this.currentPage = 'home'
        this.employerStep = 1
        this.contractorStep = 1
        this.assistantMessages = []
        this.projects = []
        this.heroInterval = null
        
        this.init()
      }

      async init() {
        await this.loadUser()
        this.setupEventListeners()
        this.renderHomeStats()
        this.startHeroSlider()
        this.loadAssistantMessages()
        this.checkHash()
        
        if (this.currentUser) {
          await this.checkAdminStatus()
        }
      }

      // ========== Ù…Ø¯ÛŒØ±ÛŒØª Ú©Ø§Ø±Ø¨Ø± ==========
      async loadUser() {
        try {
          const { data: { user } } = await this.supabase.auth.getUser()
          if (user) {
            const { data: profile } = await this.supabase
              .from('profiles')
              .select('*')
              .eq('user_id', user.id)
              .single()
            
            this.currentUser = { ...user, ...profile }
          }
        } catch (error) {
          console.error('Ø®Ø·Ø§:', error)
          this.currentUser = null
        }
      }

      async checkAdminStatus() {
        try {
          const { data, error } = await this.supabase
            .rpc('is_admin', { user_id: this.currentUser?.id })
          
          this.isAdmin = !!data
          if (this.isAdmin) {
            document.querySelectorAll('.admin-only').forEach(el => el.style.display = 'block')
          }
        } catch (error) {
          console.error('Ø®Ø·Ø§:', error)
          this.isAdmin = false
        }
      }

      // ========== Ù†Ù…Ø§ÛŒØ´ ØµÙØ­Ø§Øª ==========
      showPage(pageId, pushState = true) {
        document.querySelectorAll('.page-section').forEach(page => {
          page.classList.remove('active')
          page.style.display = 'none'
        })
        
        const target = document.getElementById(pageId)
        if (target) {
          target.classList.add('active')
          target.style.display = 'block'
          window.scrollTo({ top: 0, behavior: 'smooth' })
          
          if (pushState) {
            history.pushState({ page: pageId }, '', `#${pageId}`)
          }
          
          this.currentPage = pageId
          this.updateActiveLinks(pageId)
          
          // Ù„ÙˆØ¯ Ù…Ø­ØªÙˆØ§ÛŒ ØµÙØ­Ø§Øª
          if (pageId === 'profile') this.loadProfile()
          if (pageId === 'projects') this.loadProjects()
          if (pageId === 'adminMessages' && this.isAdmin) this.loadAdminPanel()
          if (pageId === 'employerRegistration') this.renderEmployerStep()
          if (pageId === 'contractorRegistration') this.renderContractorStep()
        }
      }

      updateActiveLinks(pageId) {
        document.querySelectorAll('.nav-link').forEach(link => {
          link.classList.remove('active')
          if (link.getAttribute('onclick')?.includes(pageId)) {
            link.classList.add('active')
          }
        })
      }

      checkHash() {
        const hash = window.location.hash.substring(1) || 'home'
        this.showPage(hash, false)
      }

      // ========== Ø§Ø­Ø±Ø§Ø² Ù‡ÙˆÛŒØª ==========
      showLogin() {
        this.showPage('login')
      }

      showForgotPassword() {
        this.showPage('forgotPassword')
      }

      togglePasswordVisibility(id) {
        const input = document.getElementById(id)
        if (input.type === 'password') {
          input.type = 'text'
        } else {
          input.type = 'password'
        }
      }

      async handleLogin(e) {
        e.preventDefault()
        
        const email = document.getElementById('loginEmail')?.value
        const password = document.getElementById('loginPassword')?.value
        
        if (!email || !password) {
          this.showToast('Ø§ÛŒÙ…ÛŒÙ„ Ùˆ Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯', 'error')
          return
        }

        try {
          const { data, error } = await this.supabase.auth.signInWithPassword({
            email, password
          })

          if (error) throw error

          await this.loadUser()
          await this.checkAdminStatus()
          this.showToast('ÙˆØ±ÙˆØ¯ Ù…ÙˆÙÙ‚ÛŒØªâ€ŒØ¢Ù…ÛŒØ² Ø¨ÙˆØ¯', 'success')
          this.showPage('home')
          
        } catch (error) {
          this.showToast(error.message, 'error')
        }
      }

      async handleForgotPassword(e) {
        e.preventDefault()
        
        const email = document.getElementById('forgotEmail')?.value
        if (!email) {
          this.showToast('Ø§ÛŒÙ…ÛŒÙ„ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯', 'error')
          return
        }

        try {
          const { error } = await this.supabase.auth.resetPasswordForEmail(email)
          if (error) throw error
          
          this.showToast('Ù„ÛŒÙ†Ú© Ø¨Ø§Ø²ÛŒØ§Ø¨ÛŒ Ø¨Ù‡ Ø§ÛŒÙ…ÛŒÙ„ Ø´Ù…Ø§ Ø§Ø±Ø³Ø§Ù„ Ø´Ø¯', 'success')
          setTimeout(() => this.showPage('login'), 2000)
          
        } catch (error) {
          this.showToast(error.message, 'error')
        }
      }

      async logout() {
        await this.supabase.auth.signOut()
        this.currentUser = null
        this.isAdmin = false
        document.querySelectorAll('.admin-only').forEach(el => el.style.display = 'none')
        this.showToast('Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø®Ø§Ø±Ø¬ Ø´Ø¯ÛŒØ¯', 'success')
        this.showPage('home')
      }

      // ========== Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ú©Ø§Ø±ÙØ±Ù…Ø§ ==========
      showEmployerRegistration() {
        this.showPage('employerRegistration')
        this.employerStep = 1
        this.renderEmployerStep()
      }

      renderEmployerStep() {
        // Ù†Ù…Ø§ÛŒØ´/Ù…Ø®ÙÛŒ Ú©Ø±Ø¯Ù† Ø¨Ø®Ø´â€ŒÙ‡Ø§
        for (let i = 1; i <= 4; i++) {
          const section = document.getElementById(`employerSection${i}`)
          if (section) {
            section.style.display = i === this.employerStep ? 'block' : 'none'
          }
        }

        // Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§
        document.getElementById('employerPrevBtn').style.display = this.employerStep > 1 ? 'block' : 'none'
        document.getElementById('employerNextBtn').style.display = this.employerStep < 4 ? 'block' : 'none'
        document.getElementById('employerSubmitBtn').style.display = this.employerStep === 4 ? 'block' : 'none'

        // Ø¢Ù¾Ø¯ÛŒØª ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ Ø¯Ø§ÛŒÙ†Ø§Ù…ÛŒÚ© Ø¨Ø± Ø§Ø³Ø§Ø³ Ù†ÙˆØ¹ Ø´Ø®ØµÛŒØª
        this.updateEmployerFields()
      }

      updateEmployerFields() {
        const accountType = document.getElementById('employerAccountType')?.value
        const dynamicFields = document.getElementById('employerDynamicFields')
        const companyFields = document.getElementById('employerCompanyFields')
        
        if (!dynamicFields) return

        if (accountType === 'individual') {
          dynamicFields.innerHTML = `
            <div class="row">
              <div class="col-md-6 mb-3">
                <label class="form-label required">Ù†Ø§Ù… Ùˆ Ù†Ø§Ù… Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ</label>
                <input type="text" class="form-control" id="employerFullName" required>
              </div>
              <div class="col-md-6 mb-3">
                <label class="form-label required">Ú©Ø¯ Ù…Ù„ÛŒ</label>
                <input type="text" class="form-control" id="employerNationalCode" required maxlength="10">
              </div>
            </div>
          `
          if (companyFields) companyFields.style.display = 'none'
          
        } else if (accountType === 'company') {
          dynamicFields.innerHTML = `
            <div class="row">
              <div class="col-md-6 mb-3">
                <label class="form-label required">Ù†Ø§Ù… Ø´Ø±Ú©Øª</label>
                <input type="text" class="form-control" id="employerCompanyName" required>
              </div>
              <div class="col-md-6 mb-3">
                <label class="form-label required">Ù†Ø§Ù… Ù…Ø¯ÛŒØ±Ø¹Ø§Ù…Ù„</label>
                <input type="text" class="form-control" id="employerManagerName" required>
              </div>
            </div>
          `
          if (companyFields) companyFields.style.display = 'block'
        }
      }

      nextEmployerStep() {
        if (this.validateEmployerStep()) {
          this.employerStep++
          this.renderEmployerStep()
          if (this.employerStep === 4) this.updateEmployerSummary()
        }
      }

      prevEmployerStep() {
        this.employerStep--
        this.renderEmployerStep()
      }

      validateEmployerStep() {
        const accountType = document.getElementById('employerAccountType')?.value
        if (!accountType) {
          this.showToast('Ù„Ø·ÙØ§Ù‹ Ù†ÙˆØ¹ Ø´Ø®ØµÛŒØª Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯', 'error')
          return false
        }

        const email = document.getElementById('employerEmail')?.value
        if (!email || !this.isValidEmail(email)) {
          this.showToast('Ø§ÛŒÙ…ÛŒÙ„ Ù…Ø¹ØªØ¨Ø± ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯', 'error')
          return false
        }

        const password = document.getElementById('employerPassword')?.value
        const confirm = document.getElementById('employerConfirmPassword')?.value
        if (!password || password.length < 6) {
          this.showToast('Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø­Ø¯Ø§Ù‚Ù„ Û¶ Ú©Ø§Ø±Ø§Ú©ØªØ±', 'error')
          return false
        }
        if (password !== confirm) {
          this.showToast('Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ùˆ ØªÚ©Ø±Ø§Ø± Ø¢Ù† ÛŒÚ©Ø³Ø§Ù† Ù†ÛŒØ³Øª', 'error')
          return false
        }

        return true
      }

      updateEmployerSummary() {
        const accountType = document.getElementById('employerAccountType').value
        let name = ''
        let id = ''
        
        if (accountType === 'individual') {
          name = document.getElementById('employerFullName')?.value || '-'
          id = document.getElementById('employerNationalCode')?.value || '-'
        } else {
          name = document.getElementById('employerCompanyName')?.value || '-'
          id = document.getElementById('employerCompanyId')?.value || '-'
        }

        const summary = `
          <p><strong>Ù†Ø§Ù…:</strong> ${name}</p>
          <p><strong>${accountType === 'individual' ? 'Ú©Ø¯ Ù…Ù„ÛŒ' : 'Ø´Ù†Ø§Ø³Ù‡ Ù…Ù„ÛŒ'}:</strong> ${id}</p>
          <p><strong>Ø§ÛŒÙ…ÛŒÙ„:</strong> ${document.getElementById('employerEmail').value}</p>
          <p><strong>ØªÙ„ÙÙ†:</strong> ${document.getElementById('employerMobile').value}</p>
        `
        
        document.getElementById('employerSummary').innerHTML = summary
      }

      async submitEmployerForm(e) {
        e.preventDefault()
        
        if (!document.getElementById('employerTerms').checked) {
          this.showToast('Ù„Ø·ÙØ§Ù‹ Ù‚ÙˆØ§Ù†ÛŒÙ† Ø±Ø§ Ø¨Ù¾Ø°ÛŒØ±ÛŒØ¯', 'error')
          return
        }

        const accountType = document.getElementById('employerAccountType').value
        const email = document.getElementById('employerEmail').value
        const password = document.getElementById('employerPassword').value
        const mobile = document.getElementById('employerMobile').value

        try {
          const { data, error } = await this.supabase.auth.signUp({
            email,
            password,
            options: {
              data: {
                user_type: 'employer',
                account_type: accountType
              }
            }
          })

          if (error) throw error

          const profileData = {
            user_id: data.user.id,
            email,
            user_type: 'employer',
            account_type: accountType,
            phone: mobile,
            address: document.getElementById('employerAddress')?.value
          }

          if (accountType === 'individual') {
            profileData.full_name = document.getElementById('employerFullName')?.value
            profileData.national_code = document.getElementById('employerNationalCode')?.value
          } else {
            profileData.company_name = document.getElementById('employerCompanyName')?.value
            profileData.company_id = document.getElementById('employerCompanyId')?.value
          }

          const { error: profileError } = await this.supabase
            .from('profiles')
            .insert([profileData])

          if (profileError) throw profileError

          this.showToast('Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯', 'success')
          setTimeout(() => this.showPage('login'), 2000)
          
        } catch (error) {
          this.showToast(error.message, 'error')
        }
      }

      // ========== Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø± ==========
      showContractorRegistration() {
        this.showPage('contractorRegistration')
        this.contractorStep = 1
        this.renderContractorStep()
        this.populateYearSelect()
      }

      renderContractorStep() {
        // Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ progress bar
        const progress = (this.contractorStep / 5) * 100
        document.getElementById('contractorProgress').style.width = progress + '%'

        // Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ steps
        for (let i = 1; i <= 5; i++) {
          const step = document.getElementById(`step${i}`)
          if (step) {
            step.classList.toggle('active', i === this.contractorStep)
          }
        }

        // Ù†Ù…Ø§ÛŒØ´/Ù…Ø®ÙÛŒ Ú©Ø±Ø¯Ù† Ø¨Ø®Ø´â€ŒÙ‡Ø§
        for (let i = 1; i <= 5; i++) {
          const section = document.getElementById(`contractorSection${i}`)
          if (section) {
            section.style.display = i === this.contractorStep ? 'block' : 'none'
          }
        }

        // Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§
        document.getElementById('contractorPrevBtn').style.display = this.contractorStep > 1 ? 'block' : 'none'
        document.getElementById('contractorNextBtn').style.display = this.contractorStep < 5 ? 'block' : 'none'
        document.getElementById('contractorSubmitBtn').style.display = this.contractorStep === 5 ? 'block' : 'none'

        if (this.contractorStep === 2) this.updateSubExpertise()
        if (this.contractorStep === 5) this.updateContractorSummary()
      }

      populateYearSelect() {
        const select = document.getElementById('startYear')
        if (!select) return
        
        select.innerHTML = '<option value="">Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</option>'
        for (let year = 1403; year >= 1350; year--) {
          select.innerHTML += `<option value="${year}">${year}</option>`
        }
      }

      updateSubExpertise() {
        const mainExpertise = document.getElementById('mainExpertise')?.value
        const container = document.getElementById('subExpertiseContainer')
        if (!container) return

        const subExpertises = {
          'steel_fabrication': ['Ø³Ø§Ø®Øª Ø§Ø³Ú©Ù„Øª ÙÙ„Ø²ÛŒ', 'Ø³Ø§Ø®Øª Ø³ÙˆÙ„Ù‡'],
          'concrete_execution': ['Ø¨ØªÙ†â€ŒØ±ÛŒØ²ÛŒ', 'Ù‚Ø§Ù„Ø¨â€ŒØ¨Ù†Ø¯ÛŒ']
        }

        if (mainExpertise && subExpertises[mainExpertise]) {
          container.innerHTML = subExpertises[mainExpertise].map((sub, i) => `
            <div class="form-check">
              <input class="form-check-input" type="checkbox" id="subExpertise${i}" value="${sub}">
              <label class="form-check-label">${sub}</label>
            </div>
          `).join('')
        } else {
          container.innerHTML = '<div class="form-text">Ø§Ø¨ØªØ¯Ø§ ØªØ®ØµØµ Ø§ØµÙ„ÛŒ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</div>'
        }
      }

      updateContractorSummary() {
        const name = document.getElementById('contactPerson')?.value || '-'
        const expertise = document.getElementById('mainExpertise')?.selectedOptions[0]?.text || '-'
        
        const summary = `
          <p><strong>Ù…Ø³Ø¦ÙˆÙ„ Ø§Ø±ØªØ¨Ø§Ø·:</strong> ${name}</p>
          <p><strong>ØªØ®ØµØµ Ø§ØµÙ„ÛŒ:</strong> ${expertise}</p>
        `
        
        document.getElementById('summaryContent').innerHTML = summary
        document.getElementById('formSummary').style.display = 'block'
      }

      nextContractorStep() {
        if (this.validateContractorStep()) {
          this.contractorStep++
          this.renderContractorStep()
        }
      }

      prevContractorStep() {
        this.contractorStep--
        this.renderContractorStep()
      }

      validateContractorStep() {
        switch(this.contractorStep) {
          case 1:
            const accountType = document.getElementById('contractorAccountType')?.value
            if (!accountType) {
              this.showToast('Ù†ÙˆØ¹ Ø´Ø®ØµÛŒØª Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯', 'error')
              return false
            }
            
            const mobile = document.getElementById('contractorMobile')?.value
            if (!mobile || !this.isValidMobile(mobile)) {
              this.showToast('Ø´Ù…Ø§Ø±Ù‡ Ù…ÙˆØ¨Ø§ÛŒÙ„ Ù…Ø¹ØªØ¨Ø± ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯', 'error')
              return false
            }
            break
            
          case 2:
            const expertise = document.getElementById('mainExpertise')?.value
            if (!expertise) {
              this.showToast('ØªØ®ØµØµ Ø§ØµÙ„ÛŒ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯', 'error')
              return false
            }
            break
            
          case 3:
            const year = document.getElementById('startYear')?.value
            if (!year) {
              this.showToast('Ø³Ø§Ù„ Ø¢ØºØ§Ø² ÙØ¹Ø§Ù„ÛŒØª Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯', 'error')
              return false
            }
            break
        }
        
        return true
      }

      async submitContractorForm(e) {
        e.preventDefault()
        
        if (!document.getElementById('contractorTerms').checked) {
          this.showToast('Ù„Ø·ÙØ§Ù‹ Ù‚ÙˆØ§Ù†ÛŒÙ† Ø±Ø§ Ø¨Ù¾Ø°ÛŒØ±ÛŒØ¯', 'error')
          return
        }

        const accountType = document.getElementById('contractorAccountType').value
        const email = document.getElementById('contractorEmail').value
        const password = document.getElementById('contractorPassword').value
        const mobile = document.getElementById('contractorMobile').value

        try {
          const { data, error } = await this.supabase.auth.signUp({
            email,
            password,
            options: {
              data: {
                user_type: 'contractor',
                account_type: accountType
              }
            }
          })

          if (error) throw error

          const profileData = {
            user_id: data.user.id,
            email,
            user_type: 'contractor',
            account_type: accountType,
            phone: mobile,
            contact_person: document.getElementById('contactPerson')?.value,
            main_expertise: document.getElementById('mainExpertise')?.value,
            verification_status: 'pending'
          }

          if (accountType === 'individual') {
            profileData.full_name = document.getElementById('contractorFullName')?.value
            profileData.national_code = document.getElementById('contractorNationalCode')?.value
          } else {
            profileData.company_name = document.getElementById('contractorCompanyName')?.value
            profileData.company_id = document.getElementById('contractorCompanyId')?.value
          }

          const { error: profileError } = await this.supabase
            .from('profiles')
            .insert([profileData])

          if (profileError) throw profileError

          this.showToast('Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯', 'success')
          setTimeout(() => this.showPage('login'), 2000)
          
        } catch (error) {
          this.showToast(error.message, 'error')
        }
      }

      addSampleProject() {
        const container = document.getElementById('projectContainer')
        const count = container.children.length + 1
        
        if (count > 5) {
          this.showToast('Ø­Ø¯Ø§Ú©Ø«Ø± Ûµ Ù¾Ø±ÙˆÚ˜Ù‡', 'error')
          return
        }

        const project = document.createElement('div')
        project.className = 'card mb-3 project-card'
        project.innerHTML = `
          <div class="card-body">
            <div class="d-flex justify-content-between">
              <h6>Ù¾Ø±ÙˆÚ˜Ù‡ Ù†Ù…ÙˆÙ†Ù‡ ${count}</h6>
              <button type="button" class="btn btn-sm btn-danger" onclick="this.closest('.project-card').remove()">
                <i class="bi bi-trash"></i>
              </button>
            </div>
            <div class="row">
              <div class="col-md-4 mb-3">
                <label class="form-label">Ù†Ø§Ù… Ù¾Ø±ÙˆÚ˜Ù‡</label>
                <input type="text" class="form-control" name="projectName[]">
              </div>
              <div class="col-md-4 mb-3">
                <label class="form-label">Ø³Ø§Ù„ ØªØ­ÙˆÛŒÙ„</label>
                <select class="form-select" name="projectYear[]">
                  <option value="">Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</option>
                </select>
              </div>
              <div class="col-md-4 mb-3">
                <label class="form-label">Ù…Ø´ØªØ±ÛŒ</label>
                <input type="text" class="form-control" name="projectClient[]">
              </div>
            </div>
          </div>
        `
        
        container.appendChild(project)
        
        // Ù¾Ø± Ú©Ø±Ø¯Ù† Ø³Ø§Ù„â€ŒÙ‡Ø§
        const yearSelect = project.querySelector('select')
        for (let year = 1403; year >= 1380; year--) {
          yearSelect.innerHTML += `<option value="${year}">${year}</option>`
        }
      }

      // ========== Ù¾Ø±ÙˆÙØ§ÛŒÙ„ ==========
      async loadProfile() {
        if (!this.currentUser) {
          this.showToast('Ù„Ø·ÙØ§Ù‹ ÙˆØ§Ø±Ø¯ Ø´ÙˆÛŒØ¯', 'error')
          this.showPage('login')
          return
        }

        try {
          const { data: profile } = await this.supabase
            .from('profiles')
            .select('*')
            .eq('user_id', this.currentUser.id)
            .single()

          this.currentUser = { ...this.currentUser, ...profile }
          this.displayProfile()
          
        } catch (error) {
          console.error('Ø®Ø·Ø§:', error)
        }
      }

      displayProfile() {
        const user = this.currentUser
        
        document.getElementById('profileDisplayName').textContent = 
          user.full_name || user.company_name || user.email || 'Ú©Ø§Ø±Ø¨Ø±'
        document.getElementById('profileDisplayEmail').textContent = user.email || '-'
        
        const avatar = document.getElementById('profileAvatar')
        if (avatar) {
          avatar.textContent = (user.full_name || user.company_name || '?').charAt(0)
        }

        let html = `
          <div class="col-md-6 mb-3">
            <div class="border rounded p-3">
              <small class="text-muted">Ù†ÙˆØ¹ Ø­Ø³Ø§Ø¨</small>
              <strong>${user.user_type === 'employer' ? 'Ú©Ø§Ø±ÙØ±Ù…Ø§' : 'Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø±'}</strong>
            </div>
          </div>
          <div class="col-md-6 mb-3">
            <div class="border rounded p-3">
              <small class="text-muted">Ù†ÙˆØ¹ Ø´Ø®ØµÛŒØª</small>
              <strong>${user.account_type === 'individual' ? 'Ø­Ù‚ÛŒÙ‚ÛŒ' : 'Ø­Ù‚ÙˆÙ‚ÛŒ'}</strong>
            </div>
          </div>
          <div class="col-md-6 mb-3">
            <div class="border rounded p-3">
              <small class="text-muted">ØªÙ„ÙÙ† Ù‡Ù…Ø±Ø§Ù‡</small>
              <strong>${user.phone || '-'}</strong>
            </div>
          </div>
          <div class="col-12 mb-3">
            <div class="border rounded p-3">
              <small class="text-muted">Ø¢Ø¯Ø±Ø³</small>
              <strong>${user.address || '-'}</strong>
            </div>
          </div>
        `

        document.getElementById('profileDisplayContent').innerHTML = html

        if (user.account_type === 'company') {
          document.getElementById('profileCompanyFields').innerHTML = `
            <div class="col-12"><h5>Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø´Ø±Ú©Øª</h5></div>
            <div class="col-md-6 mb-3">
              <div class="border rounded p-3">
                <small class="text-muted">Ù†Ø§Ù… Ø´Ø±Ú©Øª</small>
                <strong>${user.company_name || '-'}</strong>
              </div>
            </div>
            <div class="col-md-6 mb-3">
              <div class="border rounded p-3">
                <small class="text-muted">Ø´Ù†Ø§Ø³Ù‡ Ù…Ù„ÛŒ</small>
                <strong>${user.company_id || '-'}</strong>
              </div>
            </div>
          `
          document.getElementById('profileCompanyFields').style.display = 'flex'
        }

        if (user.user_type === 'contractor') {
          document.getElementById('profileContractorFields').innerHTML = `
            <div class="col-12"><h5>Ø§Ø·Ù„Ø§Ø¹Ø§Øª ØªØ®ØµØµÛŒ</h5></div>
            <div class="col-md-6 mb-3">
              <div class="border rounded p-3">
                <small class="text-muted">ØªØ®ØµØµ Ø§ØµÙ„ÛŒ</small>
                <strong>${user.main_expertise || '-'}</strong>
              </div>
            </div>
            <div class="col-md-6 mb-3">
              <div class="border rounded p-3">
                <small class="text-muted">Ø³Ø§Ù„ Ø´Ø±ÙˆØ¹ ÙØ¹Ø§Ù„ÛŒØª</small>
                <strong>${user.start_year || '-'}</strong>
              </div>
            </div>
          `
          document.getElementById('profileContractorFields').style.display = 'flex'
        }
      }

      enableProfileEdit() {
        document.getElementById('profileViewMode').style.display = 'none'
        document.getElementById('profileEditMode').style.display = 'block'
        
        document.getElementById('editFullName').value = this.currentUser.full_name || ''
        document.getElementById('editNationalId').value = this.currentUser.national_code || ''
        document.getElementById('editEmail').value = this.currentUser.email || ''
        document.getElementById('editMobile').value = this.currentUser.phone || ''
        document.getElementById('editAddress').value = this.currentUser.address || ''

        this.populateEditYears()
      }

      populateEditYears() {
        const select = document.getElementById('editStartYear')
        if (!select) return
        
        select.innerHTML = '<option value="">Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</option>'
        for (let year = 1403; year >= 1350; year--) {
          select.innerHTML += `<option value="${year}" ${this.currentUser.start_year == year ? 'selected' : ''}>${year}</option>`
        }
      }

      cancelProfileEdit() {
        document.getElementById('profileViewMode').style.display = 'block'
        document.getElementById('profileEditMode').style.display = 'none'
      }

      async saveProfileChanges(e) {
        e.preventDefault()
        
        const updates = {
          full_name: document.getElementById('editFullName').value,
          national_code: document.getElementById('editNationalId').value,
          phone: document.getElementById('editMobile').value,
          address: document.getElementById('editAddress').value
        }

        try {
          const { error } = await this.supabase
            .from('profiles')
            .update(updates)
            .eq('user_id', this.currentUser.id)

          if (error) throw error

          this.currentUser = { ...this.currentUser, ...updates }
          this.showToast('Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø¨Ù‡â€ŒØ±ÙˆØ² Ø´Ø¯', 'success')
          this.cancelProfileEdit()
          this.displayProfile()
          
        } catch (error) {
          this.showToast(error.message, 'error')
        }
      }

      // ========== Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§ ==========
      async loadProjects() {
        try {
          const { data, error } = await this.supabase
            .from('projects')
            .select('*')
            .eq('admin_approved', true)
            .order('created_at', { ascending: false })

          if (error) throw error

          this.projects = data || []
          this.displayProjects()
          
        } catch (error) {
          console.error('Ø®Ø·Ø§:', error)
        }
      }

      displayProjects() {
        const container = document.getElementById('projectsList')
        if (!container) return

        const filter = document.getElementById('projectFilterStatus')?.value || 'all'
        const search = document.getElementById('projectSearch')?.value || ''

        let filtered = [...this.projects]

        if (filter !== 'all') {
          filtered = filtered.filter(p => p.status === filter)
        }

        if (search) {
          const term = search.toLowerCase()
          filtered = filtered.filter(p => 
            p.title?.toLowerCase().includes(term) ||
            p.description?.toLowerCase().includes(term)
          )
        }

        if (filtered.length === 0) {
          container.innerHTML = '<div class="col-12"><div class="alert alert-info">Ù¾Ø±ÙˆÚ˜Ù‡â€ŒØ§ÛŒ ÛŒØ§ÙØª Ù†Ø´Ø¯</div></div>'
          return
        }

        let html = ''
        filtered.forEach(project => {
          const statusClass = {
            'open': 'bg-success',
            'in_progress': 'bg-primary',
            'completed': 'bg-secondary'
          }[project.status] || 'bg-secondary'

          const statusText = {
            'open': 'Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø± Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø±',
            'in_progress': 'Ø¯Ø± Ø­Ø§Ù„ Ø§Ù†Ø¬Ø§Ù…',
            'completed': 'ØªÚ©Ù…ÛŒÙ„ Ø´Ø¯Ù‡'
          }[project.status] || project.status

          html += `
            <div class="col-md-6 mb-4">
              <div class="card-peymanyar">
                <div class="d-flex justify-content-between">
                  <h5>${project.title}</h5>
                  <span class="badge ${statusClass}">${statusText}</span>
                </div>
                <p>${project.description || ''}</p>
                <div class="mt-3 text-muted small">
                  <i class="bi bi-calendar"></i> ${new Date(project.created_at).toLocaleDateString('fa-IR')}
                </div>
              </div>
            </div>
          `
        })

        container.innerHTML = html
      }

      filterProjects() {
        this.displayProjects()
      }

      openNewProjectModal() {
        if (!this.currentUser) {
          this.showToast('Ù„Ø·ÙØ§Ù‹ ÙˆØ§Ø±Ø¯ Ø´ÙˆÛŒØ¯', 'error')
          this.showPage('login')
          return
        }

        if (this.currentUser.user_type !== 'employer') {
          this.showToast('Ø«Ø¨Øª Ù¾Ø±ÙˆÚ˜Ù‡ ÙÙ‚Ø· Ø¨Ø±Ø§ÛŒ Ú©Ø§Ø±ÙØ±Ù…Ø§ÛŒØ§Ù†', 'error')
          return
        }

        new bootstrap.Modal(document.getElementById('newProjectModal')).show()
      }

      async saveProject() {
        const title = document.getElementById('projectTitle')?.value
        const description = document.getElementById('projectDescription')?.value

        if (!title || !description) {
          this.showToast('Ø¹Ù†ÙˆØ§Ù† Ùˆ ØªÙˆØ¶ÛŒØ­Ø§Øª Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯', 'error')
          return
        }

        try {
          const { error } = await this.supabase
            .from('projects')
            .insert([{
              title,
              description,
              employer_id: this.currentUser.id,
              status: 'pending',
              admin_approved: false,
              created_at: new Date().toISOString()
            }])

          if (error) throw error

          this.showToast('Ù¾Ø±ÙˆÚ˜Ù‡ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø«Ø¨Øª Ø´Ø¯', 'success')
          bootstrap.Modal.getInstance(document.getElementById('newProjectModal')).hide()
          document.getElementById('newProjectForm').reset()
          this.loadProjects()
          
        } catch (error) {
          this.showToast(error.message, 'error')
        }
      }

      // ========== Ø¬Ø³ØªØ¬Ùˆ ==========
      async performSearch() {
        const keyword = document.getElementById('searchKeyword')?.value
        const specialty = document.getElementById('searchSpecialty')?.value

        try {
          let query = this.supabase
            .from('profiles')
            .select('*')
            .eq('user_type', 'contractor')
            .eq('verification_status', 'verified')

          if (specialty) {
            query = query.eq('main_expertise', specialty)
          }

          if (keyword) {
            query = query.or(`full_name.ilike.%${keyword}%,company_name.ilike.%${keyword}%`)
          }

          const { data, error } = await query

          if (error) throw error

          this.displaySearchResults(data || [])
          
        } catch (error) {
          console.error('Ø®Ø·Ø§:', error)
          this.showToast('Ø®Ø·Ø§ Ø¯Ø± Ø¬Ø³ØªØ¬Ùˆ', 'error')
        }
      }

      displaySearchResults(results) {
        const container = document.getElementById('searchResults')
        if (!container) return

        if (results.length === 0) {
          container.innerHTML = '<div class="col-12"><div class="alert alert-info">Ù†ØªÛŒØ¬Ù‡â€ŒØ§ÛŒ ÛŒØ§ÙØª Ù†Ø´Ø¯</div></div>'
          return
        }

        let html = ''
        results.forEach(result => {
          html += `
            <div class="col-lg-4 col-md-6 mb-4">
              <div class="card-peymanyar">
                <h5>${result.full_name || result.company_name || 'Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø±'}</h5>
                <p class="text-muted">${result.main_expertise || '-'}</p>
                <button class="btn btn-sm btn-primary" onclick="window.app.viewContractorProfile('${result.id}')">
                  Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ù¾Ø±ÙˆÙØ§ÛŒÙ„
                </button>
              </div>
            </div>
          `
        })

        container.innerHTML = html
      }

      viewContractorProfile(id) {
        this.showToast('Ø¯Ø± Ø­Ø§Ù„ ØªÙˆØ³Ø¹Ù‡', 'info')
      }

      // ========== Ø¯Ø³ØªÛŒØ§Ø± Ù‡ÙˆØ´Ù…Ù†Ø¯ ==========
      toggleAssistant() {
        const window = document.getElementById('assistantWindow')
        const btn = document.querySelector('.assistant-toggle')
        
        if (window.classList.contains('active')) {
          window.classList.remove('active')
          btn.setAttribute('aria-expanded', 'false')
        } else {
          window.classList.add('active')
          btn.setAttribute('aria-expanded', 'true')
          document.getElementById('assistantNotification').style.display = 'none'
        }
      }

      sendAssistantMessage() {
        const input = document.getElementById('assistantInput')
        const message = input.value.trim()
        
        if (!message) return

        this.addAssistantMessage('user', message)
        input.value = ''

        setTimeout(() => {
          let response = 'Ù…ØªÙˆØ¬Ù‡ Ø³ÙˆØ§Ù„ØªÙˆÙ† Ù†Ø´Ø¯Ù…. Ù„Ø·ÙØ§Ù‹ ÙˆØ§Ø¶Ø­â€ŒØªØ± Ø¨Ù¾Ø±Ø³ÛŒØ¯.'
          
          if (message.includes('Ø«Ø¨Øª Ù†Ø§Ù…')) {
            response = 'Ø¨Ø±Ø§ÛŒ Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ø§Ø² Ù…Ù†ÙˆÛŒ Ø¨Ø§Ù„Ø§ Ú¯Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§ÛŒ Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ø±Ùˆ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯.'
          } else if (message.includes('Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø±')) {
            response = 'Ø¨Ø±Ø§ÛŒ Ø¬Ø³ØªØ¬ÙˆÛŒ Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø± Ø¨Ù‡ ØµÙØ­Ù‡ "Ø¬Ø³ØªØ¬ÙˆÛŒ Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø±" Ø¨Ø±ÛŒØ¯.'
          } else if (message.includes('Ù¾Ø±ÙˆÚ˜Ù‡')) {
            response = 'Ø¨Ø±Ø§ÛŒ Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§ Ø¨Ù‡ ØµÙØ­Ù‡ "Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§" Ø¨Ø±ÛŒØ¯.'
          }

          this.addAssistantMessage('assistant', response)
        }, 1000)
      }

      addAssistantMessage(role, content) {
        const container = document.getElementById('assistantMessages')
        const div = document.createElement('div')
        div.className = `message ${role}`
        div.innerHTML = `<div class="message-bubble">${this.escapeHTML(content)}</div>`
        container.appendChild(div)
        container.scrollTop = container.scrollHeight

        this.assistantMessages.push({ role, content })
        this.saveAssistantMessages()
      }

      loadAssistantMessages() {
        const saved = localStorage.getItem('assistant_messages')
        if (saved) {
          this.assistantMessages = JSON.parse(saved)
          this.renderAssistantMessages()
        } else {
          this.addAssistantMessage('assistant', 'Ø³Ù„Ø§Ù…! Ú†Ø·ÙˆØ± Ù…ÛŒâ€ŒØªÙˆÙ†Ù… Ú©Ù…Ú© Ú©Ù†Ù…ØŸ')
        }
      }

      renderAssistantMessages() {
        const container = document.getElementById('assistantMessages')
        container.innerHTML = ''
        this.assistantMessages.forEach(msg => {
          const div = document.createElement('div')
          div.className = `message ${msg.role}`
          div.innerHTML = `<div class="message-bubble">${this.escapeHTML(msg.content)}</div>`
          container.appendChild(div)
        })
      }

      saveAssistantMessages() {
        localStorage.setItem('assistant_messages', JSON.stringify(this.assistantMessages.slice(-50)))
      }

      // ========== Ù¾Ù†Ù„ Ù…Ø¯ÛŒØ±ÛŒØª ==========
      showAdminLogin() {
        this.showPage('login')
      }

      async showAdminMessages() {
        if (!this.isAdmin) {
          this.showToast('Ø´Ù…Ø§ Ø¯Ø³ØªØ±Ø³ÛŒ Ø§Ø¯Ù…ÛŒÙ† Ù†Ø¯Ø§Ø±ÛŒØ¯', 'error')
          return
        }

        this.showPage('adminMessages')
        await this.loadAdminPanel()
      }

      async loadAdminPanel() {
        await this.loadAdminStats()
        this.loadAdminUsers()
        this.loadAdminProjects()
        this.initAdminChart()
      }

      async loadAdminStats() {
        try {
          const { count: totalMessages } = await this.supabase
            .from('messages')
            .select('*', { count: 'exact', head: true })

          const { count: activeUsers } = await this.supabase
            .from('profiles')
            .select('*', { count: 'exact', head: true })
            .gte('last_login', new Date(Date.now() - 7*24*60*60*1000).toISOString())

          const { count: totalProjects } = await this.supabase
            .from('projects')
            .select('*', { count: 'exact', head: true })

          const { count: pendingProjects } = await this.supabase
            .from('projects')
            .select('*', { count: 'exact', head: true })
            .eq('admin_approved', false)

          document.getElementById('adminTotalMessages').textContent = totalMessages || 0
          document.getElementById('adminActiveUsers').textContent = activeUsers || 0
          document.getElementById('adminTotalProjects').textContent = totalProjects || 0
          document.getElementById('adminPendingProjects').textContent = pendingProjects || 0
          
        } catch (error) {
          console.error('Ø®Ø·Ø§:', error)
        }
      }

      async loadAdminUsers() {
        try {
          const { data, error } = await this.supabase
            .from('profiles')
            .select('*')
            .limit(10)

          if (error) throw error

          const container = document.getElementById('adminUsersList')
          if (!container) return

          let html = '<table class="table"><thead><tr><th>Ù†Ø§Ù…</th><th>Ø§ÛŒÙ…ÛŒÙ„</th><th>Ù†ÙˆØ¹</th><th>Ø¹Ù…Ù„ÛŒØ§Øª</th></tr></thead><tbody>'
          
          data?.forEach(user => {
            html += `<tr>
              <td>${user.full_name || user.company_name || '-'}</td>
              <td>${user.email || '-'}</td>
              <td>${user.user_type === 'employer' ? 'Ú©Ø§Ø±ÙØ±Ù…Ø§' : 'Ù¾ÛŒÙ…Ø§Ù†Ú©Ø§Ø±'}</td>
              <td>
                <button class="btn btn-sm btn-info" onclick="window.app.viewUserDetails('${user.user_id}')">Ù…Ø´Ø§Ù‡Ø¯Ù‡</button>
                <button class="btn btn-sm btn-danger" onclick="window.app.toggleUserStatus('${user.user_id}')">ØºÛŒØ±ÙØ¹Ø§Ù„</button>
              </td>
            </tr>`
          })

          html += '</tbody></table>'
          container.innerHTML = html
          
        } catch (error) {
          console.error('Ø®Ø·Ø§:', error)
        }
      }

      async loadAdminProjects() {
        try {
          const { data, error } = await this.supabase
            .from('projects')
            .select('*')
            .order('created_at', { ascending: false })
            .limit(10)

          if (error) throw error

          const container = document.getElementById('adminProjectsList')
          if (!container) return

          let html = '<table class="table"><thead><tr><th>Ø¹Ù†ÙˆØ§Ù†</th><th>Ú©Ø§Ø±ÙØ±Ù…Ø§</th><th>ÙˆØ¶Ø¹ÛŒØª</th><th>Ø¹Ù…Ù„ÛŒØ§Øª</th></tr></thead><tbody>'
          
          for (const project of data || []) {
            const { data: employer } = await this.supabase
              .from('profiles')
              .select('full_name, company_name')
              .eq('user_id', project.employer_id)
              .single()

            html += `<tr>
              <td>${project.title}</td>
              <td>${employer?.full_name || employer?.company_name || '-'}</td>
              <td>${project.admin_approved ? 'ØªØ§ÛŒÛŒØ¯ Ø´Ø¯Ù‡' : 'Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø±'}</td>
              <td>
                ${!project.admin_approved ? 
                  `<button class="btn btn-sm btn-success" onclick="window.app.approveProject('${project.id}')">ØªØ§ÛŒÛŒØ¯</button>` : ''}
                <button class="btn btn-sm btn-danger" onclick="window.app.deleteProject('${project.id}')">Ø­Ø°Ù</button>
              </td>
            </tr>`
          }

          html += '</tbody></table>'
          container.innerHTML = html
          
        } catch (error) {
          console.error('Ø®Ø·Ø§:', error)
        }
      }

      async approveProject(id) {
        try {
          const { error } = await this.supabase
            .from('projects')
            .update({ admin_approved: true, status: 'open' })
            .eq('id', id)

          if (error) throw error

          this.showToast('Ù¾Ø±ÙˆÚ˜Ù‡ ØªØ§ÛŒÛŒØ¯ Ø´Ø¯', 'success')
          this.loadAdminProjects()
          this.loadProjects()
          
        } catch (error) {
          this.showToast(error.message, 'error')
        }
      }

      async deleteProject(id) {
        if (!confirm('Ø¢ÛŒØ§ Ø§Ø² Ø­Ø°Ù Ø§ÛŒÙ† Ù¾Ø±ÙˆÚ˜Ù‡ Ø§Ø·Ù…ÛŒÙ†Ø§Ù† Ø¯Ø§Ø±ÛŒØ¯ØŸ')) return

        try {
          const { error } = await this.supabase
            .from('projects')
            .delete()
            .eq('id', id)

          if (error) throw error

          this.showToast('Ù¾Ø±ÙˆÚ˜Ù‡ Ø­Ø°Ù Ø´Ø¯', 'success')
          this.loadAdminProjects()
          this.loadProjects()
          
        } catch (error) {
          this.showToast(error.message, 'error')
        }
      }

      adminSendMessage() {
        const title = document.getElementById('messageTitle')?.value
        const body = document.getElementById('messageBody')?.value
        
        if (!body) {
          this.showToast('Ù…ØªÙ† Ù¾ÛŒØ§Ù… Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯', 'error')
          return
        }

        this.showToast(`Ù¾ÛŒØ§Ù… "${title || 'Ø¨Ø¯ÙˆÙ† Ø¹Ù†ÙˆØ§Ù†'}" Ø§Ø±Ø³Ø§Ù„ Ø´Ø¯`, 'success')
        
        // Ø°Ø®ÛŒØ±Ù‡ Ø¯Ø± ØªØ§Ø±ÛŒØ®Ú†Ù‡
        const history = document.getElementById('messageHistory')
        if (history) {
          history.innerHTML = `
            <div class="border p-2 mb-2">
              <small>${new Date().toLocaleString('fa-IR')}</small>
              <div>${title || 'Ø¨Ø¯ÙˆÙ† Ø¹Ù†ÙˆØ§Ù†'}</div>
            </div>
          ` + history.innerHTML
        }
      }

      adminClearCache() {
        this.showToast('Ú©Ø´ Ù¾Ø§Ú©Ø³Ø§Ø²ÛŒ Ø´Ø¯', 'success')
      }

      adminClearOldLogs() {
        this.showToast('Ù„Ø§Ú¯â€ŒÙ‡Ø§ÛŒ Ù‚Ø¯ÛŒÙ…ÛŒ Ù¾Ø§Ú© Ø´Ø¯Ù†Ø¯', 'success')
      }

      adminClearTempFiles() {
        this.showToast('ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ù…ÙˆÙ‚Øª Ù¾Ø§Ú© Ø´Ø¯Ù†Ø¯', 'success')
      }

      adminLogout() {
        this.isAdmin = false
        document.querySelectorAll('.admin-only').forEach(el => el.style.display = 'none')
        this.showToast('Ø§Ø² Ù¾Ù†Ù„ Ù…Ø¯ÛŒØ±ÛŒØª Ø®Ø§Ø±Ø¬ Ø´Ø¯ÛŒØ¯', 'success')
        this.showPage('home')
      }

      initAdminChart() {
        const canvas = document.getElementById('adminChart')
        if (!canvas) return

        new Chart(canvas, {
          type: 'line',
          data: {
            labels: ['ÙØ±ÙˆØ±Ø¯ÛŒÙ†', 'Ø§Ø±Ø¯ÛŒØ¨Ù‡Ø´Øª', 'Ø®Ø±Ø¯Ø§Ø¯', 'ØªÛŒØ±', 'Ù…Ø±Ø¯Ø§Ø¯', 'Ø´Ù‡Ø±ÛŒÙˆØ±'],
            datasets: [{
              label: 'Ú©Ø§Ø±Ø¨Ø±Ø§Ù† Ø¬Ø¯ÛŒØ¯',
              data: [12, 19, 15, 22, 18, 25],
              borderColor: '#4361ee',
              tension: 0.4
            }]
          },
          options: {
            responsive: true,
            maintainAspectRatio: false
          }
        })
      }

      // ========== Ø§Ø³Ù„Ø§ÛŒØ¯Ø± ==========
      startHeroSlider() {
        const slider = document.getElementById('heroSlider')
        if (!slider) return

        const images = [
          'https://images.unsplash.com/photo-1541888946425-d81bb19240f5',
          'https://images.unsplash.com/photo-1504917595217-d4dc5ebe6122',
          'https://images.unsplash.com/photo-1581094794329-811d9b8a4e9e'
        ]

        slider.innerHTML = images.map((img, i) => 
          `<img src="${img}" alt="Ø§Ø³Ù„Ø§ÛŒØ¯ ${i+1}" class="hero-slide ${i === 0 ? 'active' : ''}" style="width:100%; height:100%; object-fit:cover; position:absolute;">`
        ).join('')

        slider.innerHTML += `
          <div class="hero-slide-controls">
            ${images.map((_, i) => `<div class="hero-slide-dot ${i === 0 ? 'active' : ''}" data-index="${i}"></div>`).join('')}
          </div>
        `

        let current = 0
        const slides = slider.querySelectorAll('.hero-slide')
        const dots = slider.querySelectorAll('.hero-slide-dot')

        dots.forEach(dot => {
          dot.addEventListener('click', () => {
            const index = parseInt(dot.dataset.index)
            slides[current].classList.remove('active')
            dots[current].classList.remove('active')
            slides[index].classList.add('active')
            dots[index].classList.add('active')
            current = index
          })
        })

        this.heroInterval = setInterval(() => {
          slides[current].classList.remove('active')
          dots[current].classList.remove('active')
          current = (current + 1) % slides.length
          slides[current].classList.add('active')
          dots[current].classList.add('active')
        }, 5000)
      }

      // ========== Ø¢Ù…Ø§Ø± ØµÙØ­Ù‡ Ø§ØµÙ„ÛŒ ==========
      async renderHomeStats() {
        try {
          const { count: contractors } = await this.supabase
            .from('profiles')
            .select('*', { count: 'exact', head: true })
            .eq('user_type', 'contractor')

          const { count: employers } = await this.supabase
            .from('profiles')
            .select('*', { count: 'exact', head: true })
            .eq('user_type', 'employer')

          const { count: projects } = await this.supabase
            .from('projects')
            .select('*', { count: 'exact', head: true })

          document.getElementById('statContractors').textContent = (contractors || 1250).toLocaleString('fa-IR')
          document.getElementById('statEmployers').textContent = (employers || 320).toLocaleString('fa-IR')
          document.getElementById('statProjects').textContent = (projects || 540).toLocaleString('fa-IR')
          document.getElementById('statSatisfaction').textContent = 'Û¹Û¸Ùª'
          
        } catch (error) {
          console.error('Ø®Ø·Ø§:', error)
        }
      }

      // ========== Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§ÛŒ Ú©Ù…Ú©ÛŒ ==========
      showToast(message, type = 'info') {
        const container = document.getElementById('toastContainer')
        if (!container) return

        const toast = document.createElement('div')
        toast.className = `toast align-items-center text-bg-${type} border-0`
        toast.setAttribute('role', 'alert')
        toast.innerHTML = `
          <div class="d-flex">
            <div class="toast-body">${message}</div>
            <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast"></button>
          </div>
        `

        container.appendChild(toast)
        const bsToast = new bootstrap.Toast(toast)
        bsToast.show()

        toast.addEventListener('hidden.bs.toast', () => toast.remove())
      }

      escapeHTML(text) {
        const div = document.createElement('div')
        div.textContent = text
        return div.innerHTML
      }

      isValidEmail(email) {
        return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)
      }

      isValidMobile(mobile) {
        return /^09[0-9]{9}$/.test(mobile)
      }

      // ========== Event Listeners ==========
      setupEventListeners() {
        window.addEventListener('popstate', (e) => {
          if (e.state?.page) {
            this.showPage(e.state.page, false)
          }
        })

        document.getElementById('loginForm')?.addEventListener('submit', (e) => this.handleLogin(e))
        document.getElementById('forgotPasswordForm')?.addEventListener('submit', (e) => this.handleForgotPassword(e))
        document.getElementById('profileEditForm')?.addEventListener('submit', (e) => this.saveProfileChanges(e))
        document.getElementById('employerForm')?.addEventListener('submit', (e) => this.submitEmployerForm(e))
        document.getElementById('contractorForm')?.addEventListener('submit', (e) => this.submitContractorForm(e))

        document.getElementById('employerAccountType')?.addEventListener('change', () => this.updateEmployerFields())
        document.getElementById('employerNextBtn')?.addEventListener('click', () => this.nextEmployerStep())
        document.getElementById('employerPrevBtn')?.addEventListener('click', () => this.prevEmployerStep())

        document.getElementById('mainExpertise')?.addEventListener('change', () => this.updateSubExpertise())
        document.getElementById('contractorNextBtn')?.addEventListener('click', () => this.nextContractorStep())
        document.getElementById('contractorPrevBtn')?.addEventListener('click', () => this.prevContractorStep())
        document.getElementById('addProject')?.addEventListener('click', () => this.addSampleProject())

        document.getElementById('assistantInput')?.addEventListener('keypress', (e) => {
          if (e.key === 'Enter') this.sendAssistantMessage()
        })
      }
    }

    // Ø§ÛŒØ¬Ø§Ø¯ Ù†Ù…ÙˆÙ†Ù‡
    window.app = new PeymanyarApp()

    // ØªÙˆØ§Ø¨Ø¹ Ø³Ø±Ø§Ø³Ø±ÛŒ
    window.showPage = (pageId) => window.app?.showPage(pageId)
    window.showLogin = () => window.app?.showLogin()
    window.showForgotPassword = () => window.app?.showForgotPassword()
    window.showEmployerRegistration = () => window.app?.showEmployerRegistration()
    window.showContractorRegistration = () => window.app?.showContractorRegistration()
    window.toggleAssistant = () => window.app?.toggleAssistant()
    window.sendAssistantMessage = () => window.app?.sendAssistantMessage()
    window.performSearch = () => window.app?.performSearch()
    window.logout = () => window.app?.logout()
    window.togglePasswordVisibility = (id) => window.app?.togglePasswordVisibility(id)
    window.showTermsModal = () => new bootstrap.Modal(document.getElementById('termsModal')).show()
    window.acceptTerms = () => {
      document.getElementById('employerTerms')?.click()
      document.getElementById('contractorTerms')?.click()
      bootstrap.Modal.getInstance(document.getElementById('termsModal')).hide()
      window.app?.showToast('Ù‚ÙˆØ§Ù†ÛŒÙ† Ù¾Ø°ÛŒØ±ÙØªÙ‡ Ø´Ø¯', 'success')
    }
  </script>
</body>
</html>